import{$ as L,$a as xr,A as ro,Aa as ee,Ab as np,B as Uc,Ba as vt,Bb as ip,C as tn,Ca as Sr,Cb as Nr,D as ui,Da as Vf,Db as rp,E as Ir,Ea as uo,Eb as sp,F as jc,Fa as Ff,Fb as iu,G as Bc,Ga as ot,Gb as op,H as Ce,Ha as Uf,I as Df,Ia as jf,J as zc,Ja as An,K as so,Ka as Bf,L as en,La as zf,M as $c,Ma as $f,N as kf,Na as Rr,O as qc,Oa as le,P as oo,Pa as rn,Q as wr,Qa as lo,R as fe,Ra as Sn,S as li,Sa as ho,T as bt,Ta as Pt,U as mt,Ua as Ut,V as Q,Va as ne,W as zt,Wa as mo,X as Pf,Xa as qf,Y as rt,Ya as Cr,Z as Gc,Za as Rn,_ as j,_a as Xc,a as O,aa as $t,ab as Zc,b as Et,ba as Er,bb as fo,ca as xe,cb as po,d as Xe,da as qt,db as Gf,e as _,ea as nn,eb as Dr,f as Pc,fa as ue,fb as Hf,g as Nc,ga as Nf,gb as Oe,h as En,ha as ao,hb as Wf,i as Oc,ia as De,ib as kr,j as Mc,ja as Hc,jb as Kf,k as Jt,ka as Wc,kb as go,l as Bt,la as Kc,lb as Qf,m as Sf,ma as Qc,mb as Yf,n as Rf,na as Of,nb as tu,o as Ze,oa as Yc,ob as eu,p as Lc,pa as ke,pb as Jf,q as Vc,qa as Jc,qb as bo,r as Fc,ra as te,rb as Xf,s as Xt,sa as Tn,sb as sn,t as $,ta as Mf,tb as Pr,u as _r,ua as co,ub as nu,v as Cf,va as Lf,vb as Zf,w as xf,wa as Pe,wb as tp,x as tt,xa as Ne,xb as _t,y as yr,ya as Tr,yb as vo,z as Zt,za as Ar,zb as ep}from"./chunk-P3MWJIRG.js";var ou=class extends tp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},au=class n extends ou{static makeCurrent(){Zf(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=my();return e==null?null:fy(e)}resetBaseElement(){Or=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ep(document.cookie,t)}},Or=null;function my(){return Or=Or||document.querySelector("base"),Or?Or.getAttribute("href"):null}function fy(n){return new URL(n,document.baseURI).pathname}var py=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac});let n=t;return n})(),cu=new rt(""),up=(()=>{let t=class t{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(a=>a.supports(i)),!r)throw new mt(5101,!1);return this._eventNameToPlugin.set(i,r),r}};t.\u0275fac=function(r){return new(r||t)(j(cu),j(ot))},t.\u0275prov=Q({token:t,factory:t.\u0275fac});let n=t;return n})(),_o=class{constructor(t){this._doc=t}},ru="ng-app-id",lp=(()=>{let t=class t{constructor(i,r,s,a={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=iu(a),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${ru}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let a=s.get(i);return a.usage+=r,a.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,a=s?.get(r);if(a?.parentNode===i)return s.delete(r),a.removeAttribute(ru),a;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(ru,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),a=this.styleRef,c=a.get(r)?.elements;c?c.push(s):a.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(j(_t),j(co),j(Tr,8),j(Pe))},t.\u0275prov=Q({token:t,factory:t.\u0275fac});let n=t;return n})(),su={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},lu=/%COMP%/g,dp="%COMP%",gy=`_nghost-${dp}`,by=`_ngcontent-${dp}`,vy=!0,_y=new rt("",{providedIn:"root",factory:()=>vy});function yy(n){return by.replace(lu,n)}function Iy(n){return gy.replace(lu,n)}function hp(n,t){return t.map(e=>e.replace(lu,n))}var yo=(()=>{let t=class t{constructor(i,r,s,a,c,l,d,m=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=l,this.ngZone=d,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=iu(l),this.defaultRenderer=new Mr(i,c,d,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Er.ShadowDom&&(r=Et(O({},r),{encapsulation:Er.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Io?s.applyToHost(i):s instanceof Lr&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,a=s.get(r.id);if(!a){let c=this.doc,l=this.ngZone,d=this.eventManager,m=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(r.encapsulation){case Er.Emulated:a=new Io(d,m,r,this.appId,g,c,l,y);break;case Er.ShadowDom:return new uu(d,m,i,r,c,l,this.nonce,y);default:a=new Lr(d,m,r,g,c,l,y);break}s.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(j(up),j(lp),j(co),j(_y),j(_t),j(Pe),j(ot),j(Tr))},t.\u0275prov=Q({token:t,factory:t.\u0275fac});let n=t;return n})(),Mr=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(su[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(ap(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(ap(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new mt(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=su[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=su[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Ar.DashCase|Ar.Important)?t.style.setProperty(e,i,r&Ar.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Ar.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=nu().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function ap(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var uu=class extends Mr{constructor(t,e,i,r,s,a,c,l){super(t,s,a,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=hp(r.id,r.styles);for(let m of d){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=m,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Lr=class extends Mr{constructor(t,e,i,r,s,a,c,l){super(t,s,a,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?hp(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Io=class extends Lr{constructor(t,e,i,r,s,a,c,l){let d=r+"-"+i.id;super(t,e,i,s,a,c,l,d),this.contentAttr=yy(d),this.hostAttr=Iy(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},wy=(()=>{let t=class t extends _o{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};t.\u0275fac=function(r){return new(r||t)(j(_t))},t.\u0275prov=Q({token:t,factory:t.\u0275fac});let n=t;return n})(),cp=["alt","control","meta","shift"],Ey={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ty={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Ay=(()=>{let t=class t extends _o{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,r,s){let a=t.parseEventName(r),c=t.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>nu().onAndCancel(i,a.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let a=t._normalizeKey(r.pop()),c="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),c="code."),cp.forEach(m=>{let g=r.indexOf(m);g>-1&&(r.splice(g,1),c+=m+".")}),c+=a,r.length!=0||a.length===0)return null;let d={};return d.domEventName=s,d.fullKey=c,d}static matchEventFullKeyCode(i,r){let s=Ey[i.key]||i.key,a="";return r.indexOf("code.")>-1&&(s=i.code,a="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),cp.forEach(c=>{if(c!==s){let l=Ty[c];l(i)&&(a+=c+".")}}),a+=s,a===r)}static eventCallback(i,r,s){return a=>{t.matchEventFullKeyCode(a,i)&&s.runGuarded(()=>r(a))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(r){return new(r||t)(j(_t))},t.\u0275prov=Q({token:t,factory:t.\u0275fac});let n=t;return n})();function mp(n,t){return Xf(O({rootComponent:n},Sy(t)))}function Sy(n){return{appProviders:[...ky,...n?.providers??[]],platformProviders:Dy}}function Ry(){au.makeCurrent()}function Cy(){return new Jc}function xy(){return Mf(document),document}var Dy=[{provide:Pe,useValue:rp},{provide:Lf,useValue:Ry,multi:!0},{provide:_t,useFactory:xy,deps:[]}];var ky=[{provide:Nf,useValue:"root"},{provide:Jc,useFactory:Cy,deps:[]},{provide:cu,useClass:wy,multi:!0,deps:[_t,ot,Pe]},{provide:cu,useClass:Ay,multi:!0,deps:[_t]},yo,lp,up,{provide:uo,useExisting:yo},{provide:op,useClass:py,deps:[]},[]];var fp=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(r){return new(r||t)(j(_t))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var W="primary",Zr=Symbol("RouteTitle"),pu=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function gi(n){return new pu(n)}function Oy(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let a=i[s],c=n[s];if(a[0]===":")r[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function My(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!pe(n[e],t[e]))return!1;return!0}function pe(n,t){let e=n?gu(n):void 0,i=t?gu(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!wp(n[r],t[r]))return!1;return!0}function gu(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wp(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function Ep(n){return n.length>0?n[n.length-1]:null}function an(n){return Cf(n)?n:Qf(n)?Xt(Promise.resolve(n)):$(n)}var Ly={exact:Ap,subset:Sp},Tp={exact:Vy,subset:Fy,ignored:()=>!0};function pp(n,t,e){return Ly[e.paths](n.root,t.root,e.matrixParams)&&Tp[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function Vy(n,t){return pe(n,t)}function Ap(n,t,e){if(!xn(n.segments,t.segments)||!To(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!Ap(n.children[i],t.children[i],e))return!1;return!0}function Fy(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>wp(n[e],t[e]))}function Sp(n,t,e){return Rp(n,t,t.segments,e)}function Rp(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!xn(r,e)||t.hasChildren()||!To(r,e,i))}else if(n.segments.length===e.length){if(!xn(n.segments,e)||!To(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!Sp(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!xn(n.segments,r)||!To(n.segments,r,i)||!n.children[W]?!1:Rp(n.children[W],t,s,i)}}function To(n,t,e){return t.every((i,r)=>Tp[e](n[r].parameters,i.parameters))}var on=class{constructor(t=new nt([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=gi(this.queryParams),this._queryParamMap}toString(){return By.serialize(this)}},nt=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ao(this)}},Cn=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=gi(this.parameters),this._parameterMap}toString(){return xp(this)}};function Uy(n,t){return xn(n,t)&&n.every((e,i)=>pe(e.parameters,t[i].parameters))}function xn(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function jy(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===W&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==W&&(e=e.concat(t(r,i)))}),e}var zu=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Q({token:t,factory:()=>new $r,providedIn:"root"});let n=t;return n})(),$r=class{parse(t){let e=new vu(t);return new on(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Vr(t.root,!0)}`,i=qy(t.queryParams),r=typeof t.fragment=="string"?`#${zy(t.fragment)}`:"";return`${e}${i}${r}`}},By=new $r;function Ao(n){return n.segments.map(t=>xp(t)).join("/")}function Vr(n,t){if(!n.hasChildren())return Ao(n);if(t){let e=n.children[W]?Vr(n.children[W],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==W&&i.push(`${r}:${Vr(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=jy(n,(i,r)=>r===W?[Vr(n.children[W],!1)]:[`${r}:${Vr(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[W]!=null?`${Ao(n)}/${e[0]}`:`${Ao(n)}/(${e.join("//")})`}}function Cp(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wo(n){return Cp(n).replace(/%3B/gi,";")}function zy(n){return encodeURI(n)}function bu(n){return Cp(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function So(n){return decodeURIComponent(n)}function gp(n){return So(n.replace(/\+/g,"%20"))}function xp(n){return`${bu(n.path)}${$y(n.parameters)}`}function $y(n){return Object.entries(n).map(([t,e])=>`;${bu(t)}=${bu(e)}`).join("")}function qy(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${wo(e)}=${wo(r)}`).join("&"):`${wo(e)}=${wo(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var Gy=/^[^\/()?;#]+/;function du(n){let t=n.match(Gy);return t?t[0]:""}var Hy=/^[^\/()?;=#]+/;function Wy(n){let t=n.match(Hy);return t?t[0]:""}var Ky=/^[^=?&#]+/;function Qy(n){let t=n.match(Ky);return t?t[0]:""}var Yy=/^[^&#]+/;function Jy(n){let t=n.match(Yy);return t?t[0]:""}var vu=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new nt([],{}):new nt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[W]=new nt(t,e)),i}parseSegment(){let t=du(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new mt(4009,!1);return this.capture(t),new Cn(So(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Wy(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=du(this.remaining);r&&(i=r,this.capture(i))}t[So(e)]=So(i)}parseQueryParam(t){let e=Qy(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let a=Jy(this.remaining);a&&(i=a,this.capture(i))}let r=gp(e),s=gp(i);if(t.hasOwnProperty(r)){let a=t[r];Array.isArray(a)||(a=[a],t[r]=a),a.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=du(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new mt(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=W);let a=this.parseChildren();e[s]=Object.keys(a).length===1?a[W]:new nt([],a),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new mt(4011,!1)}};function Dp(n){return n.segments.length>0?new nt([],{[W]:n}):n}function kp(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=kp(r);if(i===W&&s.segments.length===0&&s.hasChildren())for(let[a,c]of Object.entries(s.children))t[a]=c;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new nt(n.segments,t);return Xy(e)}function Xy(n){if(n.numberOfChildren===1&&n.children[W]){let t=n.children[W];return new nt(n.segments.concat(t.segments),t.children)}return n}function qr(n){return n instanceof on}function Zy(n,t,e=null,i=null){let r=Pp(n);return Np(r,t,e,i)}function Pp(n){let t;function e(s){let a={};for(let l of s.children){let d=e(l);a[l.outlet]=d}let c=new nt(s.url,a);return s===n&&(t=c),c}let i=e(n.root),r=Dp(i);return t??r}function Np(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return hu(r,r,r,e,i);let s=tI(t);if(s.toRoot())return hu(r,r,new nt([],{}),e,i);let a=eI(s,r,n),c=a.processChildren?jr(a.segmentGroup,a.index,s.commands):Mp(a.segmentGroup,a.index,s.commands);return hu(r,a.segmentGroup,c,e,i)}function Ro(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Gr(n){return typeof n=="object"&&n!=null&&n.outlets}function hu(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(m=>`${m}`):`${d}`});let a;n===t?a=e:a=Op(n,t,e);let c=Dp(kp(a));return new on(c,s,r)}function Op(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=Op(s,t,e)}),new nt(n.segments,i)}var Co=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Ro(i[0]))throw new mt(4003,!1);let r=i.find(Gr);if(r&&r!==Ep(i))throw new mt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function tI(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Co(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:a===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?e=!0:c===".."?t++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Co(e,t,i)}var mi=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function eI(n,t,e){if(n.isAbsolute)return new mi(t,!0,0);if(!e)return new mi(t,!1,NaN);if(e.parent===null)return new mi(e,!0,0);let i=Ro(n.commands[0])?0:1,r=e.segments.length-1+i;return nI(e,r,n.numberOfDoubleDots)}function nI(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new mt(4005,!1);r=i.segments.length}return new mi(i,!1,r-s)}function iI(n){return Gr(n[0])?n[0].outlets:{[W]:n}}function Mp(n,t,e){if(n??=new nt([],{}),n.segments.length===0&&n.hasChildren())return jr(n,t,e);let i=rI(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new nt(n.segments.slice(0,i.pathIndex),{});return s.children[W]=new nt(n.segments.slice(i.pathIndex),n.children),jr(s,0,r)}else return i.match&&r.length===0?new nt(n.segments,{}):i.match&&!n.hasChildren()?_u(n,t,e):i.match?jr(n,0,r):_u(n,t,e)}function jr(n,t,e){if(e.length===0)return new nt(n.segments,{});{let i=iI(e),r={};if(Object.keys(i).some(s=>s!==W)&&n.children[W]&&n.numberOfChildren===1&&n.children[W].segments.length===0){let s=jr(n.children[W],t,e);return new nt(n.segments,s.children)}return Object.entries(i).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[s]=Mp(n.children[s],t,a))}),Object.entries(n.children).forEach(([s,a])=>{i[s]===void 0&&(r[s]=a)}),new nt(n.segments,r)}}function rI(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let a=n.segments[r],c=e[i];if(Gr(c))break;let l=`${c}`,d=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!vp(l,d,a))return s;i+=2}else{if(!vp(l,{},a))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function _u(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Gr(s)){let l=sI(s.outlets);return new nt(i,l)}if(r===0&&Ro(e[0])){let l=n.segments[t];i.push(new Cn(l.path,bp(e[0]))),r++;continue}let a=Gr(s)?s.outlets[W]:`${s}`,c=r<e.length-1?e[r+1]:null;a&&c&&Ro(c)?(i.push(new Cn(a,bp(c))),r+=2):(i.push(new Cn(a,{})),r++)}return new nt(i,{})}function sI(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=_u(new nt([],{}),0,i))}),t}function bp(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function vp(n,t,e){return n==e.path&&pe(t,e.parameters)}var Br="imperative",St=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(St||{}),ie=class{constructor(t,e){this.id=t,this.url=e}},Hr=class extends ie{constructor(t,e,i="imperative",r=null){super(t,e),this.type=St.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Dn=class extends ie{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=St.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Wt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Wt||{}),yu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(yu||{}),Me=class extends ie{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=St.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},kn=class extends ie{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=St.NavigationSkipped}},Wr=class extends ie{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=St.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xo=class extends ie{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=St.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iu=class extends ie{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=St.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wu=class extends ie{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=St.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Eu=class extends ie{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=St.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tu=class extends ie{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=St.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Au=class{constructor(t){this.route=t,this.type=St.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Su=class{constructor(t){this.route=t,this.type=St.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ru=class{constructor(t){this.snapshot=t,this.type=St.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cu=class{constructor(t){this.snapshot=t,this.type=St.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xu=class{constructor(t){this.snapshot=t,this.type=St.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Du=class{constructor(t){this.snapshot=t,this.type=St.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Kr=class{},bi=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};var ku=class{constructor(t){this.injector=t,this.outlet=null,this.route=null,this.children=new Lo(this.injector),this.attachRef=null}},Lo=(()=>{let t=class t{constructor(i){this.parentInjector=i,this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new ku(this.parentInjector),this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(r){return new(r||t)(j(ao))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Do=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Pu(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=Pu(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Nu(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Nu(t,this._root).map(e=>e.value)}};function Pu(n,t){if(n===t.value)return t;for(let e of t.children){let i=Pu(n,e);if(i)return i}return null}function Nu(n,t){if(n===t.value)return[t];for(let e of t.children){let i=Nu(n,e);if(i.length)return i.unshift(t),i}return[]}var Ht=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function hi(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var ko=class extends Do{constructor(t,e){super(t),this.snapshot=e,$u(this,t)}toString(){return this.snapshot.toString()}};function Lp(n){let t=oI(n),e=new Bt([new Cn("",{})]),i=new Bt({}),r=new Bt({}),s=new Bt({}),a=new Bt(""),c=new vi(e,i,s,a,r,W,n,t.root);return c.snapshot=t.root,new ko(new Ht(c,[]),t)}function oI(n){let t={},e={},i={},r="",s=new fi([],t,i,r,e,W,n,null,{});return new No("",new Ht(s,[]))}var vi=class{constructor(t,e,i,r,s,a,c,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(tt(d=>d[Zr]))??$(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(tt(t=>gi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(tt(t=>gi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Po(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:O(O({},t.params),n.params),data:O(O({},t.data),n.data),resolve:O(O(O(O({},n.data),t.data),r?.data),n._resolvedData)}:i={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},r&&Fp(r)&&(i.resolve[Zr]=r.title),i}var fi=class{get title(){return this.data?.[Zr]}constructor(t,e,i,r,s,a,c,l,d){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=a,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},No=class extends Do{constructor(t,e){super(e),this.url=t,$u(this,e)}toString(){return Vp(this._root)}};function $u(n,t){t.value._routerState=n,t.children.forEach(e=>$u(n,e))}function Vp(n){let t=n.children.length>0?` { ${n.children.map(Vp).join(", ")} } `:"";return`${n.value}${t}`}function mu(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,pe(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),pe(t.params,e.params)||n.paramsSubject.next(e.params),My(t.url,e.url)||n.urlSubject.next(e.url),pe(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ou(n,t){let e=pe(n.params,t.params)&&Uy(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||Ou(n.parent,t.parent))}function Fp(n){return typeof n.title=="string"||n.title===null}var qu=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new Tn,this.deactivateEvents=new Tn,this.attachEvents=new Tn,this.detachEvents=new Tn,this.parentContexts=L(Lo),this.location=L(Uf),this.changeDetector=L(bo),this.inputBinder=L(Gu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new mt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new mt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new mt(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new mt(4013,!1);this._activatedRoute=i;let s=this.location,c=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new Mu(i,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=nn({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Hc]});let n=t;return n})(),Mu=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===vi?this.route:t===Lo?this.childContexts:this.parent.get(t,e)}},Gu=new rt("");function aI(n,t,e){let i=Qr(n,t._root,e?e._root:void 0);return new ko(i,t)}function Qr(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=cI(n,t,e);return new Ht(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(c=>Qr(n,c)),a}}let i=uI(t.value),r=t.children.map(s=>Qr(n,s));return new Ht(i,r)}}function cI(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Qr(n,i,r);return Qr(n,i)})}function uI(n){return new vi(new Bt(n.url),new Bt(n.params),new Bt(n.queryParams),new Bt(n.fragment),new Bt(n.data),n.outlet,n.component,n)}var Yr=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},Up="ngNavigationCancelingError";function Oo(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=qr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=jp(!1,Wt.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function jp(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[Up]=!0,e.cancellationCode=t,e}function lI(n){return Bp(n)&&qr(n.url)}function Bp(n){return!!n&&n[Up]}var dI=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=xe({type:t,selectors:[["ng-component"]],standalone:!0,features:[Oe],decls:1,vars:0,template:function(r,s){r&1&&ne(0,"router-outlet")},dependencies:[qu],encapsulation:2});let n=t;return n})();function hI(n,t){return n.providers&&!n._injector&&(n._injector=zf(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Hu(n){let t=n.children&&n.children.map(Hu),e=t?Et(O({},n),{children:t}):O({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==W&&(e.component=dI),e}function he(n){return n.outlet||W}function mI(n,t){let e=n.filter(i=>he(i)===t);return e.push(...n.filter(i=>he(i)!==t)),e}function ts(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var fI=(n,t,e,i)=>tt(r=>(new Lu(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),Lu=class{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),mu(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=hi(e);t.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,r[a],i),delete r[a]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(t,e,a.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=hi(t);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:c})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=hi(t);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=hi(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Du(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Cu(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(mu(r),r===s)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,a.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),mu(c.route.value),this.activateChildRoutes(t,null,a.children)}else{let c=ts(r.snapshot);a.attachRef=null,a.route=r,a.injector=c??a.injector,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,i)}},Mo=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},pi=class{constructor(t,e){this.component=t,this.route=e}};function pI(n,t,e){let i=n._root,r=t?t._root:null;return Fr(i,r,e,[i.value])}function gI(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function yi(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!Pf(n)?n:t.get(n):i}function Fr(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=hi(t);return n.children.forEach(a=>{bI(a,s[a.value.outlet],e,i.concat([a.value]),r),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>zr(c,e.getContext(a),r)),r}function bI(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,a=t?t.value:null,c=e?e.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let l=vI(a,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Mo(i)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?Fr(n,t,c?c.children:null,i,r):Fr(n,t,e,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new pi(c.outlet.component,a))}else a&&zr(t,c,r),r.canActivateChecks.push(new Mo(i)),s.component?Fr(n,null,c?c.children:null,i,r):Fr(n,null,e,i,r);return r}function vI(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!xn(n.url,t.url);case"pathParamsOrQueryParamsChange":return!xn(n.url,t.url)||!pe(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ou(n,t)||!pe(n.queryParams,t.queryParams);case"paramsChange":default:return!Ou(n,t)}}function zr(n,t,e){let i=hi(n),r=n.value;Object.entries(i).forEach(([s,a])=>{r.component?t?zr(a,t.children.getContext(s),e):zr(a,null,e):zr(a,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new pi(t.outlet.component,r)):e.canDeactivateChecks.push(new pi(null,r)):e.canDeactivateChecks.push(new pi(null,r))}function es(n){return typeof n=="function"}function _I(n){return typeof n=="boolean"}function yI(n){return n&&es(n.canLoad)}function II(n){return n&&es(n.canActivate)}function wI(n){return n&&es(n.canActivateChild)}function EI(n){return n&&es(n.canDeactivate)}function TI(n){return n&&es(n.canMatch)}function zp(n){return n instanceof xf||n?.name==="EmptyError"}var Eo=Symbol("INITIAL_VALUE");function _i(){return fe(n=>yr(n.map(t=>t.pipe(Ce(1),wr(Eo)))).pipe(tt(t=>{for(let e of t)if(e!==!0){if(e===Eo)return Eo;if(e===!1||AI(e))return e}return!0}),tn(t=>t!==Eo),Ce(1)))}function AI(n){return qr(n)||n instanceof Yr}function SI(n,t){return Zt(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:a}}=e;return a.length===0&&s.length===0?$(Et(O({},e),{guardsResult:!0})):RI(a,i,r,n).pipe(Zt(c=>c&&_I(c)?CI(i,s,n,t):$(c)),tt(c=>Et(O({},e),{guardsResult:c})))})}function RI(n,t,e,i){return Xt(n).pipe(Zt(r=>NI(r.component,r.route,e,t,i)),en(r=>r!==!0,!0))}function CI(n,t,e,i){return Xt(t).pipe(Ir(r=>ro(DI(r.route.parent,i),xI(r.route,i),PI(n,r.path,e),kI(n,r.route,e))),en(r=>r!==!0,!0))}function xI(n,t){return n!==null&&t&&t(new xu(n)),$(!0)}function DI(n,t){return n!==null&&t&&t(new Ru(n)),$(!0)}function kI(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return $(!0);let r=i.map(s=>Uc(()=>{let a=ts(t)??e,c=yi(s,a),l=II(c)?c.canActivate(t,n):De(a,()=>c(t,n));return an(l).pipe(en())}));return $(r).pipe(_i())}function PI(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>gI(a)).filter(a=>a!==null).map(a=>Uc(()=>{let c=a.guards.map(l=>{let d=ts(a.node)??e,m=yi(l,d),g=wI(m)?m.canActivateChild(i,n):De(d,()=>m(i,n));return an(g).pipe(en())});return $(c).pipe(_i())}));return $(s).pipe(_i())}function NI(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return $(!0);let a=s.map(c=>{let l=ts(t)??r,d=yi(c,l),m=EI(d)?d.canDeactivate(n,t,e,i):De(l,()=>d(n,t,e,i));return an(m).pipe(en())});return $(a).pipe(_i())}function OI(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return $(!0);let s=r.map(a=>{let c=yi(a,n),l=yI(c)?c.canLoad(t,e):De(n,()=>c(t,e));return an(l)});return $(s).pipe(_i(),$p(i))}function $p(n){return Nc(bt(t=>{if(typeof t!="boolean")throw Oo(n,t)}),tt(t=>t===!0))}function MI(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return $(!0);let s=r.map(a=>{let c=yi(a,n),l=TI(c)?c.canMatch(t,e):De(n,()=>c(t,e));return an(l)});return $(s).pipe(_i(),$p(i))}var Jr=class{constructor(t){this.segmentGroup=t||null}},Xr=class extends Error{constructor(t){super(),this.urlTree=t}};function di(n){return _r(new Jr(n))}function LI(n){return _r(new mt(4e3,!1))}function VI(n){return _r(jp(!1,Wt.GuardRejected))}var Vu=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return $(i);if(r.numberOfChildren>1||!r.children[W])return LI(`${t.redirectTo}`);r=r.children[W]}}applyRedirectCommands(t,e,i,r,s){if(typeof e!="string"){let c=e,{queryParams:l,fragment:d,routeConfig:m,url:g,outlet:y,params:R,data:D,title:N}=r,C=De(s,()=>c({params:R,data:D,queryParams:l,fragment:d,routeConfig:m,url:g,outlet:y,title:N}));if(C instanceof on)throw new Xr(C);e=C}let a=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Xr(a);return a}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new on(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);i[r]=e[c]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),a={};return Object.entries(e.children).forEach(([c,l])=>{a[c]=this.createSegmentGroup(t,l,i,r)}),new nt(s,a)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new mt(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},Fu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function FI(n,t,e,i,r){let s=Wu(n,t,e);return s.matched?(i=hI(t,i),MI(i,t,e,r).pipe(tt(a=>a===!0?s:O({},Fu)))):$(s)}function Wu(n,t,e){if(t.path==="**")return UI(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?O({},Fu):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||Oy)(e,n,t);if(!r)return O({},Fu);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let a=r.consumed.length>0?O(O({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function UI(n){return{matched:!0,parameters:n.length>0?Ep(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function _p(n,t,e,i){return e.length>0&&zI(n,e,i)?{segmentGroup:new nt(t,BI(i,new nt(e,n.children))),slicedSegments:[]}:e.length===0&&$I(n,e,i)?{segmentGroup:new nt(n.segments,jI(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new nt(n.segments,n.children),slicedSegments:e}}function jI(n,t,e,i){let r={};for(let s of e)if(Vo(n,t,s)&&!i[he(s)]){let a=new nt([],{});r[he(s)]=a}return O(O({},i),r)}function BI(n,t){let e={};e[W]=t;for(let i of n)if(i.path===""&&he(i)!==W){let r=new nt([],{});e[he(i)]=r}return e}function zI(n,t,e){return e.some(i=>Vo(n,t,i)&&he(i)!==W)}function $I(n,t,e){return e.some(i=>Vo(n,t,i))}function Vo(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function qI(n,t,e,i){return he(n)!==i&&(i===W||!Vo(t,e,n))?!1:Wu(t,n,e).matched}function GI(n,t,e){return t.length===0&&!n.children[e]}var Uu=class{};function HI(n,t,e,i,r,s,a="emptyOnly"){return new ju(n,t,e,i,r,a,s).recognize()}var WI=31,ju=class{constructor(t,e,i,r,s,a,c){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new Vu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new mt(4002,`'${t.segmentGroup}'`)}recognize(){let t=_p(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(tt(({children:e,rootSnapshot:i})=>{let r=new Ht(i,e),s=new No("",r),a=Zy(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(t){let e=new fi([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),W,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,W,e).pipe(tt(i=>({children:i,rootSnapshot:e})),ui(i=>{if(i instanceof Xr)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Jr?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,s):this.processSegment(t,e,i,i.segments,r,!0,s).pipe(tt(a=>a instanceof Ht?[a]:[]))}processChildren(t,e,i,r){let s=[];for(let a of Object.keys(i.children))a==="primary"?s.unshift(a):s.push(a);return Xt(s).pipe(Ir(a=>{let c=i.children[a],l=mI(e,a);return this.processSegmentGroup(t,l,c,a,r)}),qc((a,c)=>(a.push(...c),a)),Bc(null),kf(),Zt(a=>{if(a===null)return di(i);let c=qp(a);return KI(c),$(c)}))}processSegment(t,e,i,r,s,a,c){return Xt(e).pipe(Ir(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,i,r,s,a,c).pipe(ui(d=>{if(d instanceof Jr)return $(null);throw d}))),en(l=>!!l),ui(l=>{if(zp(l))return GI(i,r,s)?$(new Uu):di(i);throw l}))}processSegmentAgainstRoute(t,e,i,r,s,a,c,l){return qI(i,r,s,a)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,a,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,a,l):di(r):di(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,a,c){let{matched:l,parameters:d,consumedSegments:m,positionalParamSegments:g,remainingSegments:y}=Wu(e,r,s);if(!l)return di(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>WI&&(this.allowRedirects=!1));let R=new fi(s,d,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,yp(r),he(r),r.component??r._loadedComponent??null,r,Ip(r)),D=Po(R,c,this.paramsInheritanceStrategy);R.params=Object.freeze(D.params),R.data=Object.freeze(D.data);let N=this.applyRedirects.applyRedirectCommands(m,r.redirectTo,g,R,t);return this.applyRedirects.lineralizeSegments(r,N).pipe(Zt(C=>this.processSegment(t,i,e,C.concat(y),a,!1,c)))}matchSegmentAgainstRoute(t,e,i,r,s,a){let c=FI(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),c.pipe(fe(l=>l.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(fe(({routes:d})=>{let m=i._loadedInjector??t,{parameters:g,consumedSegments:y,remainingSegments:R}=l,D=new fi(y,g,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,yp(i),he(i),i.component??i._loadedComponent??null,i,Ip(i)),N=Po(D,a,this.paramsInheritanceStrategy);D.params=Object.freeze(N.params),D.data=Object.freeze(N.data);let{segmentGroup:C,slicedSegments:U}=_p(e,y,R,d);if(U.length===0&&C.hasChildren())return this.processChildren(m,d,C,D).pipe(tt(K=>new Ht(D,K)));if(d.length===0&&U.length===0)return $(new Ht(D,[]));let G=he(i)===s;return this.processSegment(m,d,C,U,G?W:s,!0,D).pipe(tt(K=>new Ht(D,K instanceof Ht?[K]:[])))}))):di(e)))}getChildConfig(t,e,i){return e.children?$({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?$({routes:e._loadedRoutes,injector:e._loadedInjector}):OI(t,e,i,this.urlSerializer).pipe(Zt(r=>r?this.configLoader.loadChildren(t,e).pipe(bt(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):VI(e))):$({routes:[],injector:t})}};function KI(n){n.sort((t,e)=>t.value.outlet===W?-1:e.value.outlet===W?1:t.value.outlet.localeCompare(e.value.outlet))}function QI(n){let t=n.value.routeConfig;return t&&t.path===""}function qp(n){let t=[],e=new Set;for(let i of n){if(!QI(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=qp(i.children);t.push(new Ht(i.value,r))}return t.filter(i=>!e.has(i))}function yp(n){return n.data||{}}function Ip(n){return n.resolve||{}}function YI(n,t,e,i,r,s){return Zt(a=>HI(n,t,e,i,a.extractedUrl,r,s).pipe(tt(({state:c,tree:l})=>Et(O({},a),{targetSnapshot:c,urlAfterRedirects:l}))))}function JI(n,t){return Zt(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return $(e);let s=new Set(r.map(l=>l.route)),a=new Set;for(let l of s)if(!a.has(l))for(let d of Gp(l))a.add(d);let c=0;return Xt(a).pipe(Ir(l=>s.has(l)?XI(l,i,n,t):(l.data=Po(l,l.parent,n).resolve,$(void 0))),bt(()=>c++),$c(1),Zt(l=>c===a.size?$(e):Ze))})}function Gp(n){let t=n.children.map(e=>Gp(e)).flat();return[n,...t]}function XI(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!Fp(r)&&(s[Zr]=r.title),ZI(s,n,t,i).pipe(tt(a=>(n._resolvedData=a,n.data=Po(n,n.parent,e).resolve,null)))}function ZI(n,t,e,i){let r=gu(n);if(r.length===0)return $({});let s={};return Xt(r).pipe(Zt(a=>tw(n[a],t,e,i).pipe(en(),bt(c=>{if(c instanceof Yr)throw Oo(new $r,c);s[a]=c}))),$c(1),Df(s),ui(a=>zp(a)?Ze:_r(a)))}function tw(n,t,e,i){let r=ts(t)??i,s=yi(n,r),a=s.resolve?s.resolve(t,e):De(r,()=>s(t,e));return an(a)}function fu(n){return fe(t=>{let e=n(t);return e?Xt(e).pipe(tt(()=>t)):$(t)})}var Hp=(()=>{let t=class t{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(a=>a.outlet===W);return r}getResolvedTitleForRoute(i){return i.data[Zr]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Q({token:t,factory:()=>L(ew),providedIn:"root"});let n=t;return n})(),ew=(()=>{let t=class t extends Hp{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(j(fp))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Ku=new rt("",{providedIn:"root",factory:()=>({})}),Qu=new rt(""),nw=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(eu)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return $(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=an(i.loadComponent()).pipe(tt(Wp),bt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),so(()=>{this.componentLoaders.delete(i)})),s=new Mc(r,()=>new Jt).pipe(Oc());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let a=iw(r,this.compiler,i,this.onLoadEndListener).pipe(so(()=>{this.childrenLoaders.delete(r)})),c=new Mc(a,()=>new Jt).pipe(Oc());return this.childrenLoaders.set(r,c),c}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function iw(n,t,e,i){return an(n.loadChildren()).pipe(tt(Wp),Zt(r=>r instanceof Bf||Array.isArray(r)?$(r):Xt(t.compileModuleAsync(r))),tt(r=>{i&&i(n);let s,a,c=!1;return Array.isArray(r)?(a=r,c=!0):(s=r.create(e).injector,a=s.get(Qu,[],{optional:!0,self:!0}).flat()),{routes:a.map(Hu),injector:s}}))}function rw(n){return n&&typeof n=="object"&&"default"in n}function Wp(n){return rw(n)?n.default:n}var Yu=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Q({token:t,factory:()=>L(sw),providedIn:"root"});let n=t;return n})(),sw=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),ow=new rt("");var aw=new rt(""),cw=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Jt,this.transitionAbortSubject=new Jt,this.configLoader=L(nw),this.environmentInjector=L(ao),this.urlSerializer=L(zu),this.rootContexts=L(Lo),this.location=L(vo),this.inputBindingEnabled=L(Gu,{optional:!0})!==null,this.titleStrategy=L(Hp),this.options=L(Ku,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(Yu),this.createViewTransition=L(ow,{optional:!0}),this.navigationErrorHandler=L(aw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>$(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Au(s)),r=s=>this.events.next(new Su(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Et(O(O({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Bt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Br,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(tn(a=>a.id!==0),tt(a=>Et(O({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),fe(a=>{let c=!1,l=!1;return $(a).pipe(fe(d=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",Wt.SupersededByNewNavigation),Ze;this.currentTransition=a,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Et(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=d.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!m&&g!=="reload"){let y="";return this.events.next(new kn(d.id,this.urlSerializer.serialize(d.rawUrl),y,yu.IgnoredSameUrlNavigation)),d.resolve(!1),Ze}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return $(d).pipe(fe(y=>{let R=this.transitions?.getValue();return this.events.next(new Hr(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),R!==this.transitions?.getValue()?Ze:Promise.resolve(y)}),YI(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),bt(y=>{a.targetSnapshot=y.targetSnapshot,a.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation=Et(O({},this.currentNavigation),{finalUrl:y.urlAfterRedirects});let R=new xo(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(R)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:y,extractedUrl:R,source:D,restoredState:N,extras:C}=d,U=new Hr(y,this.urlSerializer.serialize(R),D,N);this.events.next(U);let G=Lp(this.rootComponentType).snapshot;return this.currentTransition=a=Et(O({},d),{targetSnapshot:G,urlAfterRedirects:R,extras:Et(O({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=R,$(a)}else{let y="";return this.events.next(new kn(d.id,this.urlSerializer.serialize(d.extractedUrl),y,yu.IgnoredByUrlHandlingStrategy)),d.resolve(!1),Ze}}),bt(d=>{let m=new Iu(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(m)}),tt(d=>(this.currentTransition=a=Et(O({},d),{guards:pI(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),a)),SI(this.environmentInjector,d=>this.events.next(d)),bt(d=>{if(a.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw Oo(this.urlSerializer,d.guardsResult);let m=new wu(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(m)}),tn(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Wt.GuardRejected),!1)),fu(d=>{if(d.guards.canActivateChecks.length)return $(d).pipe(bt(m=>{let g=new Eu(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(g)}),fe(m=>{let g=!1;return $(m).pipe(JI(this.paramsInheritanceStrategy,this.environmentInjector),bt({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(m,"",Wt.NoDataFromResolver)}}))}),bt(m=>{let g=new Tu(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(g)}))}),fu(d=>{let m=g=>{let y=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(g.routeConfig).pipe(bt(R=>{g.component=R}),tt(()=>{})));for(let R of g.children)y.push(...m(R));return y};return yr(m(d.targetSnapshot.root)).pipe(Bc(null),Ce(1))}),fu(()=>this.afterPreactivation()),fe(()=>{let{currentSnapshot:d,targetSnapshot:m}=a,g=this.createViewTransition?.(this.environmentInjector,d.root,m.root);return g?Xt(g).pipe(tt(()=>a)):$(a)}),tt(d=>{let m=aI(i.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=a=Et(O({},d),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,a}),bt(()=>{this.events.next(new Kr)}),fI(this.rootContexts,i.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),Ce(1),bt({next:d=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Dn(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{c=!0}}),li(this.transitionAbortSubject.pipe(bt(d=>{throw d}))),so(()=>{!c&&!l&&this.cancelNavigationTransition(a,"",Wt.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),ui(d=>{if(l=!0,Bp(d))this.events.next(new Me(a.id,this.urlSerializer.serialize(a.extractedUrl),d.message,d.cancellationCode)),lI(d)?this.events.next(new bi(d.url,d.navigationBehaviorOptions)):a.resolve(!1);else{let m=new Wr(a.id,this.urlSerializer.serialize(a.extractedUrl),d,a.targetSnapshot??void 0);try{let g=De(this.environmentInjector,()=>this.navigationErrorHandler?.(m));if(g instanceof Yr){let{message:y,cancellationCode:R}=Oo(this.urlSerializer,g);this.events.next(new Me(a.id,this.urlSerializer.serialize(a.extractedUrl),y,R)),this.events.next(new bi(g.redirectTo,g.navigationBehaviorOptions))}else{this.events.next(m);let y=i.errorHandler(d);a.resolve(!!y)}}catch(g){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(g)}}return Ze}))}))}cancelNavigationTransition(i,r,s){let a=new Me(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(a),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function uw(n){return n!==Br}var lw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Q({token:t,factory:()=>L(dw),providedIn:"root"});let n=t;return n})(),Bu=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},dw=(()=>{let t=class t extends Bu{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Yc(t)))(s||t)}})(),t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Kp=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Q({token:t,factory:()=>L(hw),providedIn:"root"});let n=t;return n})(),hw=(()=>{let t=class t extends Kp{constructor(){super(...arguments),this.location=L(vo),this.urlSerializer=L(zu),this.options=L(Ku,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(Yu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new on,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Lp(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Hr)this.stateMemento=this.createStateMemento();else if(i instanceof kn)this.rawUrlTree=r.initialUrl;else if(i instanceof xo){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Kr?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Me&&(i.code===Wt.GuardRejected||i.code===Wt.NoDataFromResolver)?this.restoreHistory(r):i instanceof Wr?this.restoreHistory(r,!0):i instanceof Dn&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let a=this.browserPageId,c=O(O({},r.extras.state),this.generateNgRouterState(r.id,a));this.location.replaceState(s,"",c)}else{let a=O(O({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",a)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,a=this.currentPageId-s;a!==0?this.location.historyGo(a):this.currentUrlTree===i.finalUrl&&a===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Yc(t)))(s||t)}})(),t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Ur=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ur||{});function mw(n,t){n.events.pipe(tn(e=>e instanceof Dn||e instanceof Me||e instanceof Wr||e instanceof kn),tt(e=>e instanceof Dn||e instanceof kn?Ur.COMPLETE:(e instanceof Me?e.code===Wt.Redirect||e.code===Wt.SupersededByNewNavigation:!1)?Ur.REDIRECTING:Ur.FAILED),tn(e=>e!==Ur.REDIRECTING),Ce(1)).subscribe(()=>{t()})}function fw(n){throw n}var pw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qp=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=L(go),this.stateManager=L(Kp),this.options=L(Ku,{optional:!0})||{},this.pendingTasks=L($f),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(cw),this.urlSerializer=L(zu),this.location=L(vo),this.urlHandlingStrategy=L(Yu),this._events=new Jt,this.errorHandler=this.options.errorHandler||fw,this.navigated=!1,this.routeReuseStrategy=L(lw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(Qu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(Gu,{optional:!0}),this.eventsSubscription=new Pc,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(s!==null&&a!==null){if(this.stateManager.handleRouterEvent(r,a),r instanceof Me&&r.code!==Wt.Redirect&&r.code!==Wt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Dn)this.navigated=!0;else if(r instanceof bi){let c=r.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),d=O({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||uw(s.source)},c);this.scheduleNavigation(l,Br,null,d,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}vw(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Br,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let a={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let d=O({},s);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(a.state=d)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Hu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:a,fragment:c,queryParamsHandling:l,preserveFragment:d}=r,m=d?this.currentUrlTree.fragment:c,g=null;switch(l){case"merge":g=O(O({},this.currentUrlTree.queryParams),a);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=a||null}g!==null&&(g=this.removeEmptyProps(g));let y;try{let R=s?s.snapshot:this.routerState.snapshot.root;y=Pp(R)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),y=this.currentUrlTree.root}return Np(y,i,g,m??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=qr(i)?i:this.parseUrl(i),a=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(a,Br,null,r)}navigate(i,r={skipLocationChange:!1}){return bw(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=O({},pw):r===!1?s=O({},gw):s=r,qr(i))return pp(this.currentUrlTree,i,s);let a=this.parseUrl(i);return pp(this.currentUrlTree,a,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,a])=>(a!=null&&(r[s]=a),r),{})}scheduleNavigation(i,r,s,a,c){if(this.disposed)return Promise.resolve(!1);let l,d,m;c?(l=c.resolve,d=c.reject,m=c.promise):m=new Promise((y,R)=>{l=y,d=R});let g=this.pendingTasks.add();return mw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:a,resolve:l,reject:d,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(y=>Promise.reject(y))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function bw(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new mt(4008,!1)}function vw(n){return!(n instanceof Kr)&&!(n instanceof bi)}var _w=new rt("");function Yp(n,...t){return ue([{provide:Qu,multi:!0,useValue:n},[],{provide:vi,useFactory:yw,deps:[Qp]},{provide:Yf,multi:!0,useFactory:Iw},t.map(e=>e.\u0275providers)])}function yw(n){return n.routerState.root}function Iw(){let n=L(ke);return t=>{let e=n.get(tu);if(t!==e.components[0])return;let i=n.get(Qp),r=n.get(ww);n.get(Ew)===1&&i.initialNavigation(),n.get(Tw,null,Gc.Optional)?.setUpPreloading(),n.get(_w,null,Gc.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var ww=new rt("",{factory:()=>new Jt}),Ew=new rt("",{providedIn:"root",factory:()=>1});var Tw=new rt("");var Jp=[];var Aw="@",Sw=(()=>{let t=class t{constructor(i,r,s,a,c){this.doc=i,this.delegate=r,this.zone=s,this.animationType=a,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=L(Vf,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-UFT3ICJI.js").then(r=>r)).catch(r=>{throw new mt(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let a=new s(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let a=new Ju(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let l=c.createRenderer(i,r);a.use(l),this.scheduler?.notify(9)}).catch(c=>{a.use(s)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(r){Sr()},t.\u0275prov=Q({token:t,factory:t.\u0275fac});let n=t;return n})(),Ju=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,r){this.delegate.insertBefore(t,e,i,r)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,i)),this.delegate.listen(t,e,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(Aw)}};function Xp(n="animations"){return Ff("NgAsyncAnimations"),ue([{provide:uo,useFactory:(t,e,i)=>new Sw(t,e,i,n),deps:[_t,yo,ot]},{provide:Ne,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var tg=function(n){let t=[],e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},Rw=function(n){let t=[],e=0,i=0;for(;e<n.length;){let r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[e++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[e++],a=n[e++],c=n[e++],l=((r&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{let s=n[e++],a=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},eg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],a=r+1<n.length,c=a?n[r+1]:0,l=r+2<n.length,d=l?n[r+2]:0,m=s>>2,g=(s&3)<<4|c>>4,y=(c&15)<<2|d>>6,R=d&63;l||(R=64,a||(y=64)),i.push(e[m],e[g],e[y],e[R])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(tg(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Rw(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=e[n.charAt(r++)],c=r<n.length?e[n.charAt(r)]:0;++r;let d=r<n.length?e[n.charAt(r)]:64;++r;let g=r<n.length?e[n.charAt(r)]:64;if(++r,s==null||c==null||d==null||g==null)throw new Zu;let y=s<<2|c>>4;if(i.push(y),d!==64){let R=c<<4&240|d>>2;if(i.push(R),g!==64){let D=d<<6&192|g;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Zu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Cw=function(n){let t=tg(n);return eg.encodeByteArray(t,!0)},ns=function(n){return Cw(n).replace(/\./g,"")},el=function(n){try{return eg.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function xw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Dw=()=>xw().__FIREBASE_DEFAULTS__,kw=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Pw=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=n&&el(n[1]);return t&&JSON.parse(t)},Uo=()=>{try{return Dw()||kw()||Pw()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},nl=n=>{var t,e;return(e=(t=Uo())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},ng=n=>{let t=nl(n);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},il=()=>{var n;return(n=Uo())===null||n===void 0?void 0:n.config},rl=n=>{var t;return(t=Uo())===null||t===void 0?void 0:t[`_${n}`]};var Fo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}};function ig(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ns(JSON.stringify(e)),ns(JSON.stringify(a)),""].join(".")}function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function Nw(){var n;let t=(n=Uo())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sg(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function og(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ag(){let n=yt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function cg(){return!Nw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sl(){try{return typeof indexedDB=="object"}catch{return!1}}function ug(){return new Promise((n,t)=>{try{let e=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}var Ow="FirebaseError",Kt=class n extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=Ow,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}},Le=class{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){let i=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?Mw(s,i):"Error",c=`${this.serviceName}: ${a} (${r}).`;return new Kt(r,c,i)}};function Mw(n,t){return n.replace(Lw,(e,i)=>{let r=t[i];return r!=null?String(r):`<${i}?>`})}var Lw=/\{\$([^}]+)}/g;function lg(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Pn(n,t){if(n===t)return!0;let e=Object.keys(n),i=Object.keys(t);for(let r of e){if(!i.includes(r))return!1;let s=n[r],a=t[r];if(Zp(s)&&Zp(a)){if(!Pn(s,a))return!1}else if(s!==a)return!1}for(let r of i)if(!e.includes(r))return!1;return!0}function Zp(n){return n!==null&&typeof n=="object"}function is(n){let t=[];for(let[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function dg(n,t){let e=new tl(n,t);return e.subscribe.bind(e)}var tl=class{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");Vw(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=Xu),r.error===void 0&&(r.error=Xu),r.complete===void 0&&(r.complete=Xu);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Vw(n,t){if(typeof n!="object"||n===null)return!1;for(let e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Xu(){}var _x=4*60*60*1e3;function Nt(n){return n&&n._delegate?n._delegate:n}var re=class{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Nn="[DEFAULT]";var ol=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let i=new Fo;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let i=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Uw(t))try{this.getOrInitializeService({instanceIdentifier:Nn})}catch{}for(let[e,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Nn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return _(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Nn){return this.instances.has(t)}getOptions(t=Nn){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&a.resolve(r)}return r}onInit(t,e){var i;let r=this.normalizeInstanceIdentifier(e),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);let a=this.instances.get(r);return a&&t(a,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){let i=this.onInitCallbacks.get(e);if(i)for(let r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Fw(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Nn){return this.component?this.component.multipleInstances?t:Nn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Fw(n){return n===Nn?void 0:n}function Uw(n){return n.instantiationMode==="EAGER"}var jo=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new ol(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var jw=[],Y=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Y||{}),Bw={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},zw=Y.INFO,$w={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},qw=(n,t,...e)=>{if(t<n.logLevel)return;let i=new Date().toISOString(),r=$w[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},cn=class{constructor(t){this.name=t,this._logLevel=zw,this._logHandler=qw,this._userLogHandler=null,jw.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Y))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Bw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...t),this._logHandler(this,Y.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...t),this._logHandler(this,Y.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...t),this._logHandler(this,Y.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...t),this._logHandler(this,Y.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...t),this._logHandler(this,Y.ERROR,...t)}};var Gw=(n,t)=>t.some(e=>n instanceof e),hg,mg;function Hw(){return hg||(hg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ww(){return mg||(mg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var fg=new WeakMap,cl=new WeakMap,pg=new WeakMap,al=new WeakMap,ll=new WeakMap;function Kw(n){let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(ge(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&fg.set(e,n)}).catch(()=>{}),ll.set(t,n),t}function Qw(n){if(cl.has(n))return;let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});cl.set(n,t)}var ul={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return cl.get(n);if(t==="objectStoreNames")return n.objectStoreNames||pg.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ge(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function gg(n){ul=n(ul)}function Yw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let i=n.call(Bo(this),t,...e);return pg.set(i,t.sort?t.sort():[t]),ge(i)}:Ww().includes(n)?function(...t){return n.apply(Bo(this),t),ge(fg.get(this))}:function(...t){return ge(n.apply(Bo(this),t))}}function Jw(n){return typeof n=="function"?Yw(n):(n instanceof IDBTransaction&&Qw(n),Gw(n,Hw())?new Proxy(n,ul):n)}function ge(n){if(n instanceof IDBRequest)return Kw(n);if(al.has(n))return al.get(n);let t=Jw(n);return t!==n&&(al.set(n,t),ll.set(t,n)),t}var Bo=n=>ll.get(n);function vg(n,t,{blocked:e,upgrade:i,blocking:r,terminated:s}={}){let a=indexedDB.open(n,t),c=ge(a);return i&&a.addEventListener("upgradeneeded",l=>{i(ge(a.result),l.oldVersion,l.newVersion,ge(a.transaction),l)}),e&&a.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var Xw=["get","getKey","getAll","getAllKeys","count"],Zw=["put","add","delete","clear"],dl=new Map;function bg(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(dl.get(t))return dl.get(t);let e=t.replace(/FromIndex$/,""),i=t!==e,r=Zw.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Xw.includes(e)))return;let s=function(a,...c){return _(this,null,function*(){let l=this.transaction(a,r?"readwrite":"readonly"),d=l.store;return i&&(d=d.index(c.shift())),(yield Promise.all([d[e](...c),r&&l.done]))[0]})};return dl.set(t,s),s}gg(n=>Et(O({},n),{get:(t,e,i)=>bg(t,e)||n.get(t,e,i),has:(t,e)=>!!bg(t,e)||n.has(t,e)}));var ml=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(t0(e)){let i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}};function t0(n){let t=n.getComponent();return t?.type==="VERSION"}var fl="@firebase/app",_g="0.10.4";var On=new cn("@firebase/app"),e0="@firebase/app-compat",n0="@firebase/analytics-compat",i0="@firebase/analytics",r0="@firebase/app-check-compat",s0="@firebase/app-check",o0="@firebase/auth",a0="@firebase/auth-compat",c0="@firebase/database",u0="@firebase/database-compat",l0="@firebase/functions",d0="@firebase/functions-compat",h0="@firebase/installations",m0="@firebase/installations-compat",f0="@firebase/messaging",p0="@firebase/messaging-compat",g0="@firebase/performance",b0="@firebase/performance-compat",v0="@firebase/remote-config",_0="@firebase/remote-config-compat",y0="@firebase/storage",I0="@firebase/storage-compat",w0="@firebase/firestore",E0="@firebase/vertexai-preview",T0="@firebase/firestore-compat",A0="firebase",S0="10.12.1";var pl="[DEFAULT]",R0={[fl]:"fire-core",[e0]:"fire-core-compat",[i0]:"fire-analytics",[n0]:"fire-analytics-compat",[s0]:"fire-app-check",[r0]:"fire-app-check-compat",[o0]:"fire-auth",[a0]:"fire-auth-compat",[c0]:"fire-rtdb",[u0]:"fire-rtdb-compat",[l0]:"fire-fn",[d0]:"fire-fn-compat",[h0]:"fire-iid",[m0]:"fire-iid-compat",[f0]:"fire-fcm",[p0]:"fire-fcm-compat",[g0]:"fire-perf",[b0]:"fire-perf-compat",[v0]:"fire-rc",[_0]:"fire-rc-compat",[y0]:"fire-gcs",[I0]:"fire-gcs-compat",[w0]:"fire-fst",[T0]:"fire-fst-compat",[E0]:"fire-vertex","fire-js":"fire-js",[A0]:"fire-js-all"};var rs=new Map,C0=new Map,gl=new Map;function yg(n,t){try{n.container.addComponent(t)}catch(e){On.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function ln(n){let t=n.name;if(gl.has(t))return On.debug(`There were multiple attempts to register component ${t}.`),!1;gl.set(t,n);for(let e of rs.values())yg(e,n);for(let e of C0.values())yg(e,n);return!0}function os(n,t){let e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Ve(n){return n.settings!==void 0}var x0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},un=new Le("app","Firebase",x0);var bl=class{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new re("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw un.create("app-deleted",{appName:this._name})}};var dn=S0;function yl(n,t={}){let e=n;typeof t!="object"&&(t={name:t});let i=Object.assign({name:pl,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw un.create("bad-app-name",{appName:String(r)});if(e||(e=il()),!e)throw un.create("no-options");let s=rs.get(r);if(s){if(Pn(e,s.options)&&Pn(i,s.config))return s;throw un.create("duplicate-app",{appName:r})}let a=new jo(r);for(let l of gl.values())a.addComponent(l);let c=new bl(e,i,a);return rs.set(r,c),c}function Ii(n=pl){let t=rs.get(n);if(!t&&n===pl&&il())return yl();if(!t)throw un.create("no-app",{appName:n});return t}function zo(){return Array.from(rs.values())}function It(n,t,e){var i;let r=(i=R0[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);let s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){let c=[`Unable to register library "${r}" with version "${t}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),On.warn(c.join(" "));return}ln(new re(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var D0="firebase-heartbeat-database",k0=1,ss="firebase-heartbeat-store",hl=null;function Tg(){return hl||(hl=vg(D0,k0,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(ss)}catch(e){console.warn(e)}}}}).catch(n=>{throw un.create("idb-open",{originalErrorMessage:n.message})})),hl}function P0(n){return _(this,null,function*(){try{let e=(yield Tg()).transaction(ss),i=yield e.objectStore(ss).get(Ag(n));return yield e.done,i}catch(t){if(t instanceof Kt)On.warn(t.message);else{let e=un.create("idb-get",{originalErrorMessage:t?.message});On.warn(e.message)}}})}function Ig(n,t){return _(this,null,function*(){try{let i=(yield Tg()).transaction(ss,"readwrite");yield i.objectStore(ss).put(t,Ag(n)),yield i.done}catch(e){if(e instanceof Kt)On.warn(e.message);else{let i=un.create("idb-set",{originalErrorMessage:e?.message});On.warn(i.message)}}})}function Ag(n){return`${n.name}!${n.options.appId}`}var N0=1024,O0=30*24*60*60*1e3,vl=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new _l(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return _(this,null,function*(){var t,e;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wg();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=O0}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return _(this,null,function*(){var t;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=wg(),{heartbeatsToSend:i,unsentEntries:r}=M0(this._heartbeatsCache.heartbeats),s=ns(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function wg(){return new Date().toISOString().substring(0,10)}function M0(n,t=N0){let e=[],i=n.slice();for(let r of n){let s=e.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),Eg(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Eg(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}var _l=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return sl()?ug().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield P0(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return _(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ig(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return _(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ig(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function Eg(n){return ns(JSON.stringify({version:2,heartbeats:n})).length}function L0(n){ln(new re("platform-logger",t=>new ml(t),"PRIVATE")),ln(new re("heartbeat",t=>new vl(t),"PRIVATE")),It(fl,_g,n),It(fl,_g,"esm2017"),It("fire-js","")}L0("");var V0="firebase",F0="10.12.1";It(V0,F0,"app");var Ln=new kr("ANGULARFIRE2_VERSION");function qo(n,t,e){if(t){if(t.length===1)return t[0];let s=t.filter(a=>a.app===e);if(s.length===1)return s[0]}return e.container.getProvider(n).getImmediate({optional:!0})}var as=(n,t)=>{let e=t?[t]:zo(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},Ei=class{constructor(){return as(U0)}},U0="app-check";function wi(){}var $o=class{zone;delegate;constructor(t,e=Rf){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){let r=this.zone,s=function(a){r.runGuarded(()=>{t.apply(this,[a])})};return this.delegate.schedule(s,e,i)}},Il=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wi,{},wi,wi)),e.pipe(bt({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ti=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new $o(Zone.current)),this.insideAngular=e.run(()=>new $o(Zone.current,Sf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(j(ot))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Go(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function j0(n){return Go().ngZone.runOutsideAngular(()=>n())}function Mn(n){return Go().ngZone.run(()=>n())}function B0(n){return z0(Go())(n)}function z0(n){return function(e){return e=e.lift(new Il(n.ngZone)),e.pipe(Fc(n.outsideAngular),Vc(n.insideAngular))}}var $0=(n,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),Mn(()=>n.apply(void 0,i))},Vn=(n,t)=>function(){let e,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(t&&(e||=Mn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wi,{},wi,wi))),i[s]=$0(i[s],e));let r=j0(()=>n.apply(this,i));if(!t)if(r instanceof En){let s=Go();return r.pipe(Fc(s.outsideAngular),Vc(s.insideAngular))}else return Mn(()=>r);return r instanceof En?r.pipe(B0):r instanceof Promise?Mn(()=>new Promise((s,a)=>r.then(c=>Mn(()=>s(c)),c=>Mn(()=>a(c))))):typeof r=="function"&&e?function(){return setTimeout(()=>{e&&e.state==="scheduled"&&e.invoke()},10),r.apply(this,arguments)}:Mn(()=>r)};var Fe=class{constructor(t){return t}},Fn=class{constructor(){return zo()}};function q0(n){return n&&n.length===1?n[0]:new Fe(Ii())}var wl=new rt("angularfire2._apps"),G0={provide:Fe,useFactory:q0,deps:[[new $t,wl]]},H0={provide:Fn,deps:[[new $t,wl]]};function W0(n){return(t,e)=>{let i=e.get(Pe);It("angularfire",Ln.full,"core"),It("angularfire",Ln.full,"app"),It("angular",Kf.full,i.toString());let r=t.runOutsideAngular(()=>n(e));return new Fe(r)}}function Sg(n,...t){return ue([G0,H0,{provide:wl,useFactory:W0(n),multi:!0,deps:[ot,ke,Ti,...t]}])}var Rg=Vn(yl,!0);function zg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var $g=zg,qg=new Le("auth","Firebase",zg());var Jo=new cn("@firebase/auth");function K0(n,...t){Jo.logLevel<=Y.WARN&&Jo.warn(`Auth (${dn}): ${n}`,...t)}function Wo(n,...t){Jo.logLevel<=Y.ERROR&&Jo.error(`Auth (${dn}): ${n}`,...t)}function mn(n,...t){throw zl(n,...t)}function jn(n,...t){return zl(n,...t)}function Gg(n,t,e){let i=Object.assign(Object.assign({},$g()),{[t]:e});return new Le("auth","Firebase",i).create(t,{appName:n.name})}function Un(n){return Gg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zl(n,...t){if(typeof n!="string"){let e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return qg.create(n,...t)}function z(n,t,...e){if(!n)throw zl(t,...e)}function Ue(n){let t="INTERNAL ASSERTION FAILED: "+n;throw Wo(t),new Error(t)}function fn(n,t){n||Ue(t)}function Sl(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Q0(){return Cg()==="http:"||Cg()==="https:"}function Cg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Y0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q0()||sg()||"connection"in navigator)?navigator.onLine:!0}function J0(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Bn=class{constructor(t,e){this.shortDelay=t,this.longDelay=e,fn(e>t,"Short delay should be less than long delay!"),this.isMobile=rg()||og()}get(){return Y0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function $l(n,t){fn(n.emulator,"Emulator should always be set here");let{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}var Xo=class{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var X0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Z0=new Bn(3e4,6e4);function ql(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}function Si(s,a,c,l){return _(this,arguments,function*(n,t,e,i,r={}){return Hg(n,r,()=>_(this,null,function*(){let d={},m={};i&&(t==="GET"?m=i:d={body:JSON.stringify(i)});let g=is(Object.assign({key:n.config.apiKey},m)).slice(1),y=yield n._getAdditionalHeaders();return y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode),Xo.fetch()(Wg(n,n.config.apiHost,e,g),Object.assign({method:t,headers:y,referrerPolicy:"no-referrer"},d))}))})}function Hg(n,t,e){return _(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},X0),t);try{let r=new Rl(n),s=yield Promise.race([e(),r.promise]);r.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw Ho(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ho(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Ho(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Ho(n,"user-disabled",a);let m=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Gg(n,m,d);mn(n,m)}}catch(r){if(r instanceof Kt)throw r;mn(n,"network-request-failed",{message:String(r)})}})}function tE(s,a,c,l){return _(this,arguments,function*(n,t,e,i,r={}){let d=yield Si(n,t,e,i,r);return"mfaPendingCredential"in d&&mn(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function Wg(n,t,e,i){let r=`${t}${e}?${i}`;return n.config.emulator?$l(n.config,r):`${n.config.apiScheme}://${r}`}var Rl=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(jn(this.auth,"network-request-failed")),Z0.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ho(n,t,e){let i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);let r=jn(n,t,i);return r.customData._tokenResponse=e,r}function eE(n,t){return _(this,null,function*(){return Si(n,"POST","/v1/accounts:delete",t)})}function Kg(n,t){return _(this,null,function*(){return Si(n,"POST","/v1/accounts:lookup",t)})}function cs(n){if(n)try{let t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Gl(n,t=!1){return _(this,null,function*(){let e=Nt(n),i=yield e.getIdToken(t),r=Hl(i);z(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,a=s?.sign_in_provider;return{claims:r,token:i,authTime:cs(El(r.auth_time)),issuedAtTime:cs(El(r.iat)),expirationTime:cs(El(r.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function El(n){return Number(n)*1e3}function Hl(n){let[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Wo("JWT malformed, contained fewer than 3 sections"),null;try{let r=el(e);return r?JSON.parse(r):(Wo("Failed to decode base64 JWT payload"),null)}catch(r){return Wo("Caught error parsing JWT payload as JSON",r?.toString()),null}}function xg(n){let t=Hl(n);return z(t,"internal-error"),z(typeof t.exp<"u","internal-error"),z(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function ls(n,t,e=!1){return _(this,null,function*(){if(e)return t;try{return yield t}catch(i){throw i instanceof Kt&&nE(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function nE({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Cl=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let e=this.getInterval(t);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),e)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ds=class{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=cs(this.lastLoginAt),this.creationTime=cs(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Zo(n){return _(this,null,function*(){var t;let e=n.auth,i=yield n.getIdToken(),r=yield ls(n,Kg(e,{idToken:i}));z(r?.users.length,e,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let a=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?Qg(s.providerUserInfo):[],c=iE(n.providerData,a),l=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,m=l?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new ds(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)})}function Wl(n){return _(this,null,function*(){let t=Nt(n);yield Zo(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function iE(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function Qg(n){return n.map(t=>{var{providerId:e}=t,i=Lc(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function rE(n,t){return _(this,null,function*(){let e=yield Hg(n,{},()=>_(this,null,function*(){let i=is({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,a=Wg(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Xo.fetch()(a,{method:"POST",headers:c,body:i})}));return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}})}function sE(n,t){return _(this,null,function*(){return Si(n,"POST","/v2/accounts:revokeToken",ql(n,t))})}var us=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){z(t.idToken,"internal-error"),z(typeof t.idToken<"u","internal-error"),z(typeof t.refreshToken<"u","internal-error");let e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):xg(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){z(t.length!==0,"internal-error");let e=xg(t);this.updateTokensAndExpiration(t,null,e)}getToken(t,e=!1){return _(this,null,function*(){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,e){return _(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield rE(t,e);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){let{refreshToken:i,accessToken:r,expirationTime:s}=e,a=new n;return i&&(z(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),r&&(z(typeof r=="string","internal-error",{appName:t}),a.accessToken=r),s&&(z(typeof s=="number","internal-error",{appName:t}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ue("not implemented")}};function hn(n,t){z(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}var Ai=class n{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,s=Lc(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ds(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(t){return _(this,null,function*(){let e=yield ls(this,this.stsTokenManager.getToken(this.auth,t));return z(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e})}getIdTokenResult(t){return Gl(this,t)}reload(){return Wl(this)}_assign(t){this!==t&&(z(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let e=new n(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){return _(this,null,function*(){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&(yield Zo(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Ve(this.auth.app))return Promise.reject(Un(this.auth));let t=yield this.getIdToken();return yield ls(this,eE(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,s,a,c,l,d,m;let g=(i=e.displayName)!==null&&i!==void 0?i:void 0,y=(r=e.email)!==null&&r!==void 0?r:void 0,R=(s=e.phoneNumber)!==null&&s!==void 0?s:void 0,D=(a=e.photoURL)!==null&&a!==void 0?a:void 0,N=(c=e.tenantId)!==null&&c!==void 0?c:void 0,C=(l=e._redirectEventId)!==null&&l!==void 0?l:void 0,U=(d=e.createdAt)!==null&&d!==void 0?d:void 0,G=(m=e.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:K,emailVerified:ct,isAnonymous:Lt,providerData:it,stsTokenManager:w}=e;z(K&&w,t,"internal-error");let p=us.fromJSON(this.name,w);z(typeof K=="string",t,"internal-error"),hn(g,t.name),hn(y,t.name),z(typeof ct=="boolean",t,"internal-error"),z(typeof Lt=="boolean",t,"internal-error"),hn(R,t.name),hn(D,t.name),hn(N,t.name),hn(C,t.name),hn(U,t.name),hn(G,t.name);let v=new n({uid:K,auth:t,email:y,emailVerified:ct,displayName:g,isAnonymous:Lt,photoURL:D,phoneNumber:R,tenantId:N,stsTokenManager:p,createdAt:U,lastLoginAt:G});return it&&Array.isArray(it)&&(v.providerData=it.map(I=>Object.assign({},I))),C&&(v._redirectEventId=C),v}static _fromIdTokenResponse(t,e,i=!1){return _(this,null,function*(){let r=new us;r.updateFromServerResponse(e);let s=new n({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return yield Zo(s),s})}static _fromGetAccountInfoResponse(t,e,i){return _(this,null,function*(){let r=e.users[0];z(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Qg(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!s?.length,c=new us;c.updateFromIdToken(i);let l=new n({uid:r.localId,auth:t,stsTokenManager:c,isAnonymous:a}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new ds(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var Dg=new Map;function je(n){fn(n instanceof Function,"Expected a class definition");let t=Dg.get(n);return t?(fn(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,Dg.set(n,t),t)}var oE=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(e,i){return _(this,null,function*(){this.storage[e]=i})}_get(e){return _(this,null,function*(){let i=this.storage[e];return i===void 0?null:i})}_remove(e){return _(this,null,function*(){delete this.storage[e]})}_addListener(e,i){}_removeListener(e,i){}}return n.type="NONE",n})(),xl=oE;function Ko(n,t,e){return`firebase:${n}:${t}:${e}`}var ta=class n{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Ko(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ko("persistence",r.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return _(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);return t?Ai._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return _(this,null,function*(){if(this.persistence===t)return;let e=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,i="authUser"){return _(this,null,function*(){if(!e.length)return new n(je(xl),t,i);let r=(yield Promise.all(e.map(d=>_(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=r[0]||je(xl),a=Ko(i,t.config.apiKey,t.name),c=null;for(let d of e)try{let m=yield d._get(a);if(m){let g=Ai._fromJSON(t,m);d!==s&&(c=g),s=d;break}}catch{}let l=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,t,i):(s=l[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(e.map(d=>_(this,null,function*(){if(d!==s)try{yield d._remove(a)}catch{}}))),new n(s,t,i))})}};function kg(n){let t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Xg(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yg(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(tb(t))return"Blackberry";if(eb(t))return"Webos";if(Kl(t))return"Safari";if((t.includes("chrome/")||Jg(t))&&!t.includes("edge/"))return"Chrome";if(Zg(t))return"Android";{let e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function Yg(n=yt()){return/firefox\//i.test(n)}function Kl(n=yt()){let t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Jg(n=yt()){return/crios\//i.test(n)}function Xg(n=yt()){return/iemobile/i.test(n)}function Zg(n=yt()){return/android/i.test(n)}function tb(n=yt()){return/blackberry/i.test(n)}function eb(n=yt()){return/webos/i.test(n)}function ca(n=yt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function aE(n=yt()){var t;return ca(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function cE(){return ag()&&document.documentMode===10}function nb(n=yt()){return ca(n)||Zg(n)||eb(n)||tb(n)||/windows phone/i.test(n)||Xg(n)}function uE(){try{return!!(window&&window!==window.top)}catch{return!1}}function ib(n,t=[]){let e;switch(n){case"Browser":e=kg(yt());break;case"Worker":e=`${kg(yt())}-${n}`;break;default:e=n}let i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${dn}/${i}`}var Dl=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){let i=s=>new Promise((a,c)=>{try{let l=t(s);a(l)}catch(l){c(l)}});i.onAbort=e,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(t){return _(this,null,function*(){if(this.auth.currentUser===t)return;let e=[];try{for(let i of this.queue)yield i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(let r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function lE(e){return _(this,arguments,function*(n,t={}){return Si(n,"GET","/v2/passwordPolicy",ql(n,t))})}var dE=6,kl=class{constructor(t){var e,i,r,s;let a=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=a.minPasswordLength)!==null&&e!==void 0?e:dE,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,s,a,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(e=l.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(t,e){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};var Pl=class{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ea(this),this.idTokenSubscription=new ea(this),this.beforeStateQueue=new Dl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=je(e)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield ta.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(e),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return _(this,null,function*(){try{let e=yield Kg(this,{idToken:t}),i=yield Ai._fromGetAccountInfoResponse(this,e,t);yield this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return _(this,null,function*(){var e;if(Ve(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(t);(!a||a===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return _(this,null,function*(){let e=null;try{e=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return e})}reloadAndSetCurrentUserOrClear(t){return _(this,null,function*(){try{yield Zo(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=J0()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return _(this,null,function*(){if(Ve(this.app))return Promise.reject(Un(this));let e=t?Nt(t):null;return e&&z(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))})}_updateCurrentUser(t,e=!1){return _(this,null,function*(){if(!this._deleted)return t&&z(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Ve(this.app)?Promise.reject(Un(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return Ve(this.app)?Promise.reject(Un(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(je(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let t=yield lE(this),e=new kl(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Le("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{let i=this.onAuthStateChanged(()=>{i(),t()},e)}})}revokeAccessToken(t){return _(this,null,function*(){if(this.currentUser){let e=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),yield sE(this,i)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,e){return _(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return _(this,null,function*(){if(!this.redirectPersistenceManager){let e=t&&je(t)||this._popupRedirectResolver;z(e,this,"argument-error"),this.redirectPersistenceManager=yield ta.create(this,[je(e._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return _(this,null,function*(){var e,i;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return _(this,null,function*(){if(t===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};let s=typeof e=="function"?e:e.next.bind(e),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof e=="function"){let l=t.addObserver(e,i,r);return()=>{a=!0,l()}}else{let l=t.addObserver(e);return()=>{a=!0,l()}}}directlySetCurrentUser(t){return _(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=ib(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var t;let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return _(this,null,function*(){var t;let e=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return e?.error&&K0(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Ql(n){return Nt(n)}var ea=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=dg(e=>this.observer=e)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Yl={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hE(n){Yl=n}function mE(n){return Yl.loadJS(n)}function fE(){return Yl.gapiScript}function rb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Jl(n,t){let e=os(n,"auth");if(e.isInitialized()){let r=e.getImmediate(),s=e.getOptions();if(Pn(s,t??{}))return r;mn(r,"already-initialized")}return e.initialize({options:t})}function pE(n,t){let e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(je);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function Xl(n,t,e){let i=Ql(n);z(i._canInitEmulator,i,"emulator-config-failed"),z(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");let r=!!e?.disableWarnings,s=sb(t),{host:a,port:c}=gE(t),l=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${a}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||bE()}function sb(n){let t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function gE(n){let t=sb(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};let i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:Pg(i.substr(s.length+1))}}else{let[s,a]=i.split(":");return{host:s,port:Pg(a)}}}function Pg(n){if(!n)return null;let t=Number(n);return isNaN(t)?null:t}function bE(){function n(){let t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var na=class{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ue("not implemented")}_getIdTokenResponse(t){return Ue("not implemented")}_linkToIdToken(t,e){return Ue("not implemented")}_getReauthenticationResolver(t){return Ue("not implemented")}};function Tl(n,t){return _(this,null,function*(){return tE(n,"POST","/v1/accounts:signInWithIdp",ql(n,t))})}var ia=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var Nl=class extends ia{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var hs=class n{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,i,r=!1){return _(this,null,function*(){let s=yield Ai._fromIdTokenResponse(t,i,r),a=Ng(i);return new n({user:s,providerId:a,_tokenResponse:i,operationType:e})})}static _forOperation(t,e,i){return _(this,null,function*(){yield t._updateTokensIfNecessary(i,!0);let r=Ng(i);return new n({user:t,providerId:r,_tokenResponse:i,operationType:e})})}};function Ng(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ol=class n extends Kt{constructor(t,e,i,r){var s;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new n(t,e,i,r)}};function ob(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ol._fromErrorAndOperation(n,s,t,i):s})}function vE(n,t,e=!1){return _(this,null,function*(){let i=yield ls(n,t._linkToIdToken(n.auth,yield n.getIdToken()),e);return hs._forOperation(n,"link",i)})}function _E(n,t,e=!1){return _(this,null,function*(){let{auth:i}=n;if(Ve(i.app))return Promise.reject(Un(i));let r="reauthenticate";try{let s=yield ls(n,ob(i,r,t,n),e);z(s.idToken,i,"internal-error");let a=Hl(s.idToken);z(a,i,"internal-error");let{sub:c}=a;return z(n.uid===c,i,"user-mismatch"),hs._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&mn(i,"user-mismatch"),s}})}function yE(n,t,e=!1){return _(this,null,function*(){if(Ve(n.app))return Promise.reject(Un(n));let i="signIn",r=yield ob(n,i,t),s=yield hs._fromIdTokenResponse(n,i,r);return e||(yield n._updateCurrentUser(s.user)),s})}function Zl(n,t,e,i){return Nt(n).onIdTokenChanged(t,e,i)}function td(n,t,e){return Nt(n).beforeAuthStateChanged(t,e)}var ra="__sak";var sa=class{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(ra,"1"),this.storage.removeItem(ra),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){let e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};function IE(){let n=yt();return Kl(n)||ca(n)}var wE=1e3,EE=10,TE=(()=>{class n extends sa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=IE()&&uE(),this.fallbackToPolling=nb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&e(i,s,r)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let r=e.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(r);if(e.newValue!==c)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!i)return}let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);cE()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,EE):s()}notifyListeners(e,i){this.localCache[e]=i;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:r}),!0)})},wE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,i){return _(this,null,function*(){yield Xe(n.prototype,this,"_set").call(this,e,i),this.localCache[e]=JSON.stringify(i)})}_get(e){return _(this,null,function*(){let i=yield Xe(n.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(i),i})}_remove(e){return _(this,null,function*(){yield Xe(n.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}return n.type="LOCAL",n})(),ab=TE;var AE=(()=>{class n extends sa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}return n.type="SESSION",n})(),ed=AE;function SE(n){return Promise.all(n.map(t=>_(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}})))}var RE=(()=>{class n{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let i=this.receivers.find(s=>s.isListeningto(e));if(i)return i;let r=new n(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return _(this,null,function*(){let i=e,{eventId:r,eventType:s,data:a}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(m=>_(this,null,function*(){return m(i.origin,a)})),d=yield SE(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function cb(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}var Ml=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,i=50){return _(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((c,l)=>{let d=cb("",20);r.port1.start();let m=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){let y=g;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(y.data.response);break;default:clearTimeout(m),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:d,data:e},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function be(){return window}function CE(n){be().location.href=n}function ub(){return typeof be().WorkerGlobalScope<"u"&&typeof be().importScripts=="function"}function xE(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function DE(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function kE(){return ub()?self:null}var lb="firebaseLocalStorageDb",PE=1,oa="firebaseLocalStorage",db="fbase_key",zn=class{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}};function ua(n,t){return n.transaction([oa],t?"readwrite":"readonly").objectStore(oa)}function NE(){let n=indexedDB.deleteDatabase(lb);return new zn(n).toPromise()}function Ll(){let n=indexedDB.open(lb,PE);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(oa,{keyPath:db})}catch(r){e(r)}}),n.addEventListener("success",()=>_(this,null,function*(){let i=n.result;i.objectStoreNames.contains(oa)?t(i):(i.close(),yield NE(),t(yield Ll()))}))})}function Og(n,t,e){return _(this,null,function*(){let i=ua(n,!0).put({[db]:t,value:e});return new zn(i).toPromise()})}function OE(n,t){return _(this,null,function*(){let e=ua(n,!1).get(t),i=yield new zn(e).toPromise();return i===void 0?null:i.value})}function Mg(n,t){let e=ua(n,!0).delete(t);return new zn(e).toPromise()}var ME=800,LE=3,VE=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Ll(),this.db)})}_withRetries(e){return _(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield e(r)}catch(r){if(i++>LE)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return ub()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=RE._getInstance(kE()),this.receiver._subscribe("keyChanged",(e,i)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(e,i)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var e,i;if(this.activeServiceWorker=yield xE(),!this.activeServiceWorker)return;this.sender=new Ml(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||DE()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let e=yield Ll();return yield Og(e,ra,"1"),yield Mg(e,ra),!0}catch{}return!1})}_withPendingWrite(e){return _(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,i){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>Og(r,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)}))})}_get(e){return _(this,null,function*(){let i=yield this._withRetries(r=>OE(r,e));return this.localCache[e]=i,i})}_remove(e){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>Mg(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return _(this,null,function*(){let e=yield this._withRetries(s=>{let a=ua(s,!1).getAll();return new zn(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(e.length!==0)for(let{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(e,i){this.localCache[e]=i;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),ME)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),hb=VE;var mD=rb("rcb"),fD=new Bn(3e4,6e4);function FE(n,t){return t?je(t):(z(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ms=class extends na{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Tl(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Tl(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Tl(t,this._buildIdpRequest())}_buildIdpRequest(t){let e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}};function UE(n){return yE(n.auth,new ms(n),n.bypassAuthState)}function jE(n){let{auth:t,user:e}=n;return z(e,t,"internal-error"),_E(e,new ms(n),n.bypassAuthState)}function BE(n){return _(this,null,function*(){let{auth:t,user:e}=n;return z(e,t,"internal-error"),vE(e,new ms(n),n.bypassAuthState)})}var Vl=class{constructor(t,e,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((t,e)=>_(this,null,function*(){this.pendingPromise={resolve:t,reject:e};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(t){return _(this,null,function*(){let{urlResponse:e,sessionId:i,postBody:r,tenantId:s,error:a,type:c}=t;if(a){this.reject(a);return}let l={auth:this.auth,requestUri:e,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return UE;case"linkViaPopup":case"linkViaRedirect":return BE;case"reauthViaPopup":case"reauthViaRedirect":return jE;default:mn(this.auth,"internal-error")}}resolve(t){fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var pD=new Bn(2e3,1e4);var zE="pendingRedirect",Qo=new Map,Fl=class n extends Vl{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}execute(){return _(this,null,function*(){let t=Qo.get(this.auth._key());if(!t){try{let i=(yield $E(this.resolver,this.auth))?yield Xe(n.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Qo.set(this.auth._key(),t)}return this.bypassAuthState||Qo.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return _(this,null,function*(){if(t.type==="signInViaRedirect")return Xe(n.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let e=yield this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,Xe(n.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function $E(n,t){return _(this,null,function*(){let e=HE(t),i=GE(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(e))==="true";return yield i._remove(e),r})}function qE(n,t){Qo.set(n._key(),t)}function GE(n){return je(n._redirectPersistence)}function HE(n){return Ko(zE,n.config.apiKey,n.name)}function WE(n,t,e=!1){return _(this,null,function*(){if(Ve(n.app))return Promise.reject(Un(n));let i=Ql(n),r=FE(i,t),a=yield new Fl(i,r,e).execute();return a&&!e&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,t)),a})}var KE=10*60*1e3,Ul=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!QE(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!mb(t)){let r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(jn(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){let i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=KE&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lg(t))}saveEventToCache(t){this.cachedEventUids.add(Lg(t)),this.lastProcessedEventTime=Date.now()}};function Lg(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function mb({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function QE(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mb(n);default:return!1}}function YE(e){return _(this,arguments,function*(n,t={}){return Si(n,"GET","/v1/projects",t)})}var JE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XE=/^https?/;function ZE(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:t}=yield YE(n);for(let e of t)try{if(tT(e))return}catch{}mn(n,"unauthorized-domain")})}function tT(n){let t=Sl(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&a.hostname===i}if(!XE.test(e))return!1;if(JE.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var eT=new Bn(3e4,6e4);function Vg(){let n=be().___jsl;if(n?.H){for(let t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function nT(n){return new Promise((t,e)=>{var i,r,s;function a(){Vg(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Vg(),e(jn(n,"network-request-failed"))},timeout:eT.get()})}if(!((r=(i=be().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=be().gapi)===null||s===void 0)&&s.load)a();else{let c=rb("iframefcb");return be()[c]=()=>{gapi.load?a():e(jn(n,"network-request-failed"))},mE(`${fE()}?onload=${c}`).catch(l=>e(l))}}).catch(t=>{throw Yo=null,t})}var Yo=null;function iT(n){return Yo=Yo||nT(n),Yo}var rT=new Bn(5e3,15e3),sT="__/auth/iframe",oT="emulator/auth/iframe",aT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uT(n){let t=n.config;z(t.authDomain,n,"auth-domain-config-required");let e=t.emulator?$l(t,oT):`https://${n.config.authDomain}/${sT}`,i={apiKey:t.apiKey,appName:n.name,v:dn},r=cT.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${e}?${is(i).slice(1)}`}function lT(n){return _(this,null,function*(){let t=yield iT(n),e=be().gapi;return z(e,n,"internal-error"),t.open({where:document.body,url:uT(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aT,dontclear:!0},i=>new Promise((r,s)=>_(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let a=jn(n,"network-request-failed"),c=be().setTimeout(()=>{s(a)},rT.get());function l(){be().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(a)})})))})}var dT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hT=500,mT=600,fT="_blank",pT="http://localhost",aa=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function gT(n,t,e,i=hT,r=mT){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},dT),{width:i.toString(),height:r.toString(),top:s,left:a}),d=yt().toLowerCase();e&&(c=Jg(d)?fT:e),Yg(d)&&(t=t||pT,l.scrollbars="yes");let m=Object.entries(l).reduce((y,[R,D])=>`${y}${R}=${D},`,"");if(aE(d)&&c!=="_self")return bT(t||"",c),new aa(null);let g=window.open(t||"",c,m);z(g,n,"popup-blocked");try{g.focus()}catch{}return new aa(g)}function bT(n,t){let e=document.createElement("a");e.href=n,e.target=t;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}var vT="__/auth/handler",_T="emulator/auth/handler",yT=encodeURIComponent("fac");function Fg(n,t,e,i,r,s){return _(this,null,function*(){z(n.config.authDomain,n,"auth-domain-config-required"),z(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:dn,eventId:r};if(t instanceof ia){t.setDefaultLanguage(n.languageCode),a.providerId=t.providerId||"",lg(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(let[m,g]of Object.entries(s||{}))a[m]=g}if(t instanceof Nl){let m=t.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let m of Object.keys(c))c[m]===void 0&&delete c[m];let l=yield n._getAppCheckToken(),d=l?`#${yT}=${encodeURIComponent(l)}`:"";return`${IT(n)}?${is(c).slice(1)}${d}`})}function IT({config:n}){return n.emulator?$l(n,_T):`https://${n.authDomain}/${vT}`}var Al="webStorageSupport",jl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ed,this._completeRedirectFn=WE,this._overrideRedirectResult=qE}_openPopup(t,e,i,r){return _(this,null,function*(){var s;fn((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield Fg(t,e,i,Sl(),r);return gT(t,a,cb())})}_openRedirect(t,e,i,r){return _(this,null,function*(){yield this._originValidation(t);let s=yield Fg(t,e,i,Sl(),r);return CE(s),new Promise(()=>{})})}_initialize(t){let e=t._key();if(this.eventManagers[e]){let{manager:r,promise:s}=this.eventManagers[e];return r?Promise.resolve(r):(fn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}initAndGetManager(t){return _(this,null,function*(){let e=yield lT(t),i=new Ul(t);return e.register("authEvent",r=>(z(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i})}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Al,{type:Al},r=>{var s;let a=(s=r?.[0])===null||s===void 0?void 0:s[Al];a!==void 0&&e(!!a),mn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=ZE(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return nb()||Kl()||ca()}},fb=jl;var Ug="@firebase/auth",jg="1.7.3";var Bl=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function wT(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ET(n){ln(new re("auth",(t,{options:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;z(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ib(n)},d=new Pl(i,r,s,l);return pE(d,e),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),ln(new re("auth-internal",t=>{let e=Ql(t.getProvider("auth").getImmediate());return(i=>new Bl(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),It(Ug,jg,wT(n)),It(Ug,jg,"esm2017")}var TT=5*60,AT=rl("authIdTokenMaxAge")||TT,Bg=null,ST=n=>t=>_(void 0,null,function*(){let e=t&&(yield t.getIdTokenResult()),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>AT)return;let r=e?.token;Bg!==r&&(Bg=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function nd(n=Ii()){let t=os(n,"auth");if(t.isInitialized())return t.getImmediate();let e=Jl(n,{popupRedirectResolver:fb,persistence:[hb,ab,ed]}),i=rl("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let a=ST(s.toString());td(e,a,()=>a(e.currentUser)),Zl(e,c=>a(c))}}let r=nl("auth");return r&&Xl(e,`http://${r}`),e}function RT(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}hE({loadJS(n){return new Promise((t,e)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{let s=jn("internal-error");s.customData=r,e(s)},i.type="text/javascript",i.charset="UTF-8",RT().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ET("Browser");var pb="auth",fs=class{constructor(t){return t}},ps=class{constructor(){return as(pb)}};var id=new rt("angularfire2.auth-instances");function IA(n,t){let e=qo(pb,n,t);return e&&new fs(e)}function wA(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new fs(i)}}var EA={provide:ps,deps:[[new $t,id]]},TA={provide:fs,useFactory:IA,deps:[[new $t,id],Fe]};function gb(n,...t){return It("angularfire",Ln.full,"auth"),ue([TA,EA,{provide:id,useFactory:wA(n),multi:!0,deps:[ot,ke,Ti,Fn,[new $t,Ei],...t]}])}var bb=Vn(nd,!0);var vb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_b={};var pn,rd;(function(){var n;function t(w,p){function v(){}v.prototype=p.prototype,w.D=p.prototype,w.prototype=new v,w.prototype.constructor=w,w.C=function(I,E,A){for(var b=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)b[Ae-2]=arguments[Ae];return p.prototype[E].apply(I,b)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,p,v){v||(v=0);var I=Array(16);if(typeof p=="string")for(var E=0;16>E;++E)I[E]=p.charCodeAt(v++)|p.charCodeAt(v++)<<8|p.charCodeAt(v++)<<16|p.charCodeAt(v++)<<24;else for(E=0;16>E;++E)I[E]=p[v++]|p[v++]<<8|p[v++]<<16|p[v++]<<24;p=w.g[0],v=w.g[1],E=w.g[2];var A=w.g[3],b=p+(A^v&(E^A))+I[0]+3614090360&4294967295;p=v+(b<<7&4294967295|b>>>25),b=A+(E^p&(v^E))+I[1]+3905402710&4294967295,A=p+(b<<12&4294967295|b>>>20),b=E+(v^A&(p^v))+I[2]+606105819&4294967295,E=A+(b<<17&4294967295|b>>>15),b=v+(p^E&(A^p))+I[3]+3250441966&4294967295,v=E+(b<<22&4294967295|b>>>10),b=p+(A^v&(E^A))+I[4]+4118548399&4294967295,p=v+(b<<7&4294967295|b>>>25),b=A+(E^p&(v^E))+I[5]+1200080426&4294967295,A=p+(b<<12&4294967295|b>>>20),b=E+(v^A&(p^v))+I[6]+2821735955&4294967295,E=A+(b<<17&4294967295|b>>>15),b=v+(p^E&(A^p))+I[7]+4249261313&4294967295,v=E+(b<<22&4294967295|b>>>10),b=p+(A^v&(E^A))+I[8]+1770035416&4294967295,p=v+(b<<7&4294967295|b>>>25),b=A+(E^p&(v^E))+I[9]+2336552879&4294967295,A=p+(b<<12&4294967295|b>>>20),b=E+(v^A&(p^v))+I[10]+4294925233&4294967295,E=A+(b<<17&4294967295|b>>>15),b=v+(p^E&(A^p))+I[11]+2304563134&4294967295,v=E+(b<<22&4294967295|b>>>10),b=p+(A^v&(E^A))+I[12]+1804603682&4294967295,p=v+(b<<7&4294967295|b>>>25),b=A+(E^p&(v^E))+I[13]+4254626195&4294967295,A=p+(b<<12&4294967295|b>>>20),b=E+(v^A&(p^v))+I[14]+2792965006&4294967295,E=A+(b<<17&4294967295|b>>>15),b=v+(p^E&(A^p))+I[15]+1236535329&4294967295,v=E+(b<<22&4294967295|b>>>10),b=p+(E^A&(v^E))+I[1]+4129170786&4294967295,p=v+(b<<5&4294967295|b>>>27),b=A+(v^E&(p^v))+I[6]+3225465664&4294967295,A=p+(b<<9&4294967295|b>>>23),b=E+(p^v&(A^p))+I[11]+643717713&4294967295,E=A+(b<<14&4294967295|b>>>18),b=v+(A^p&(E^A))+I[0]+3921069994&4294967295,v=E+(b<<20&4294967295|b>>>12),b=p+(E^A&(v^E))+I[5]+3593408605&4294967295,p=v+(b<<5&4294967295|b>>>27),b=A+(v^E&(p^v))+I[10]+38016083&4294967295,A=p+(b<<9&4294967295|b>>>23),b=E+(p^v&(A^p))+I[15]+3634488961&4294967295,E=A+(b<<14&4294967295|b>>>18),b=v+(A^p&(E^A))+I[4]+3889429448&4294967295,v=E+(b<<20&4294967295|b>>>12),b=p+(E^A&(v^E))+I[9]+568446438&4294967295,p=v+(b<<5&4294967295|b>>>27),b=A+(v^E&(p^v))+I[14]+3275163606&4294967295,A=p+(b<<9&4294967295|b>>>23),b=E+(p^v&(A^p))+I[3]+4107603335&4294967295,E=A+(b<<14&4294967295|b>>>18),b=v+(A^p&(E^A))+I[8]+1163531501&4294967295,v=E+(b<<20&4294967295|b>>>12),b=p+(E^A&(v^E))+I[13]+2850285829&4294967295,p=v+(b<<5&4294967295|b>>>27),b=A+(v^E&(p^v))+I[2]+4243563512&4294967295,A=p+(b<<9&4294967295|b>>>23),b=E+(p^v&(A^p))+I[7]+1735328473&4294967295,E=A+(b<<14&4294967295|b>>>18),b=v+(A^p&(E^A))+I[12]+2368359562&4294967295,v=E+(b<<20&4294967295|b>>>12),b=p+(v^E^A)+I[5]+4294588738&4294967295,p=v+(b<<4&4294967295|b>>>28),b=A+(p^v^E)+I[8]+2272392833&4294967295,A=p+(b<<11&4294967295|b>>>21),b=E+(A^p^v)+I[11]+1839030562&4294967295,E=A+(b<<16&4294967295|b>>>16),b=v+(E^A^p)+I[14]+4259657740&4294967295,v=E+(b<<23&4294967295|b>>>9),b=p+(v^E^A)+I[1]+2763975236&4294967295,p=v+(b<<4&4294967295|b>>>28),b=A+(p^v^E)+I[4]+1272893353&4294967295,A=p+(b<<11&4294967295|b>>>21),b=E+(A^p^v)+I[7]+4139469664&4294967295,E=A+(b<<16&4294967295|b>>>16),b=v+(E^A^p)+I[10]+3200236656&4294967295,v=E+(b<<23&4294967295|b>>>9),b=p+(v^E^A)+I[13]+681279174&4294967295,p=v+(b<<4&4294967295|b>>>28),b=A+(p^v^E)+I[0]+3936430074&4294967295,A=p+(b<<11&4294967295|b>>>21),b=E+(A^p^v)+I[3]+3572445317&4294967295,E=A+(b<<16&4294967295|b>>>16),b=v+(E^A^p)+I[6]+76029189&4294967295,v=E+(b<<23&4294967295|b>>>9),b=p+(v^E^A)+I[9]+3654602809&4294967295,p=v+(b<<4&4294967295|b>>>28),b=A+(p^v^E)+I[12]+3873151461&4294967295,A=p+(b<<11&4294967295|b>>>21),b=E+(A^p^v)+I[15]+530742520&4294967295,E=A+(b<<16&4294967295|b>>>16),b=v+(E^A^p)+I[2]+3299628645&4294967295,v=E+(b<<23&4294967295|b>>>9),b=p+(E^(v|~A))+I[0]+4096336452&4294967295,p=v+(b<<6&4294967295|b>>>26),b=A+(v^(p|~E))+I[7]+1126891415&4294967295,A=p+(b<<10&4294967295|b>>>22),b=E+(p^(A|~v))+I[14]+2878612391&4294967295,E=A+(b<<15&4294967295|b>>>17),b=v+(A^(E|~p))+I[5]+4237533241&4294967295,v=E+(b<<21&4294967295|b>>>11),b=p+(E^(v|~A))+I[12]+1700485571&4294967295,p=v+(b<<6&4294967295|b>>>26),b=A+(v^(p|~E))+I[3]+2399980690&4294967295,A=p+(b<<10&4294967295|b>>>22),b=E+(p^(A|~v))+I[10]+4293915773&4294967295,E=A+(b<<15&4294967295|b>>>17),b=v+(A^(E|~p))+I[1]+2240044497&4294967295,v=E+(b<<21&4294967295|b>>>11),b=p+(E^(v|~A))+I[8]+1873313359&4294967295,p=v+(b<<6&4294967295|b>>>26),b=A+(v^(p|~E))+I[15]+4264355552&4294967295,A=p+(b<<10&4294967295|b>>>22),b=E+(p^(A|~v))+I[6]+2734768916&4294967295,E=A+(b<<15&4294967295|b>>>17),b=v+(A^(E|~p))+I[13]+1309151649&4294967295,v=E+(b<<21&4294967295|b>>>11),b=p+(E^(v|~A))+I[4]+4149444226&4294967295,p=v+(b<<6&4294967295|b>>>26),b=A+(v^(p|~E))+I[11]+3174756917&4294967295,A=p+(b<<10&4294967295|b>>>22),b=E+(p^(A|~v))+I[2]+718787259&4294967295,E=A+(b<<15&4294967295|b>>>17),b=v+(A^(E|~p))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+p&4294967295,w.g[1]=w.g[1]+(E+(b<<21&4294967295|b>>>11))&4294967295,w.g[2]=w.g[2]+E&4294967295,w.g[3]=w.g[3]+A&4294967295}i.prototype.u=function(w,p){p===void 0&&(p=w.length);for(var v=p-this.blockSize,I=this.B,E=this.h,A=0;A<p;){if(E==0)for(;A<=v;)r(this,w,A),A+=this.blockSize;if(typeof w=="string"){for(;A<p;)if(I[E++]=w.charCodeAt(A++),E==this.blockSize){r(this,I),E=0;break}}else for(;A<p;)if(I[E++]=w[A++],E==this.blockSize){r(this,I),E=0;break}}this.h=E,this.o+=p},i.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var p=1;p<w.length-8;++p)w[p]=0;var v=8*this.o;for(p=w.length-8;p<w.length;++p)w[p]=v&255,v/=256;for(this.u(w),w=Array(16),p=v=0;4>p;++p)for(var I=0;32>I;I+=8)w[v++]=this.g[p]>>>I&255;return w};function s(w,p){var v=c;return Object.prototype.hasOwnProperty.call(v,w)?v[w]:v[w]=p(w)}function a(w,p){this.h=p;for(var v=[],I=!0,E=w.length-1;0<=E;E--){var A=w[E]|0;I&&A==p||(v[E]=A,I=!1)}this.g=v}var c={};function l(w){return-128<=w&&128>w?s(w,function(p){return new a([p|0],0>p?-1:0)}):new a([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return g;if(0>w)return C(d(-w));for(var p=[],v=1,I=0;w>=v;I++)p[I]=w/v|0,v*=4294967296;return new a(p,0)}function m(w,p){if(w.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(w.charAt(0)=="-")return C(m(w.substring(1),p));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(p,8)),I=g,E=0;E<w.length;E+=8){var A=Math.min(8,w.length-E),b=parseInt(w.substring(E,E+A),p);8>A?(A=d(Math.pow(p,A)),I=I.j(A).add(d(b))):(I=I.j(v),I=I.add(d(b)))}return I}var g=l(0),y=l(1),R=l(16777216);n=a.prototype,n.m=function(){if(N(this))return-C(this).m();for(var w=0,p=1,v=0;v<this.g.length;v++){var I=this.i(v);w+=(0<=I?I:4294967296+I)*p,p*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(D(this))return"0";if(N(this))return"-"+C(this).toString(w);for(var p=d(Math.pow(w,6)),v=this,I="";;){var E=ct(v,p).g;v=U(v,E.j(p));var A=((0<v.g.length?v.g[0]:v.h)>>>0).toString(w);if(v=E,D(v))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function D(w){if(w.h!=0)return!1;for(var p=0;p<w.g.length;p++)if(w.g[p]!=0)return!1;return!0}function N(w){return w.h==-1}n.l=function(w){return w=U(this,w),N(w)?-1:D(w)?0:1};function C(w){for(var p=w.g.length,v=[],I=0;I<p;I++)v[I]=~w.g[I];return new a(v,~w.h).add(y)}n.abs=function(){return N(this)?C(this):this},n.add=function(w){for(var p=Math.max(this.g.length,w.g.length),v=[],I=0,E=0;E<=p;E++){var A=I+(this.i(E)&65535)+(w.i(E)&65535),b=(A>>>16)+(this.i(E)>>>16)+(w.i(E)>>>16);I=b>>>16,A&=65535,b&=65535,v[E]=b<<16|A}return new a(v,v[v.length-1]&-2147483648?-1:0)};function U(w,p){return w.add(C(p))}n.j=function(w){if(D(this)||D(w))return g;if(N(this))return N(w)?C(this).j(C(w)):C(C(this).j(w));if(N(w))return C(this.j(C(w)));if(0>this.l(R)&&0>w.l(R))return d(this.m()*w.m());for(var p=this.g.length+w.g.length,v=[],I=0;I<2*p;I++)v[I]=0;for(I=0;I<this.g.length;I++)for(var E=0;E<w.g.length;E++){var A=this.i(I)>>>16,b=this.i(I)&65535,Ae=w.i(E)>>>16,tr=w.i(E)&65535;v[2*I+2*E]+=b*tr,G(v,2*I+2*E),v[2*I+2*E+1]+=A*tr,G(v,2*I+2*E+1),v[2*I+2*E+1]+=b*Ae,G(v,2*I+2*E+1),v[2*I+2*E+2]+=A*Ae,G(v,2*I+2*E+2)}for(I=0;I<p;I++)v[I]=v[2*I+1]<<16|v[2*I];for(I=p;I<2*p;I++)v[I]=0;return new a(v,0)};function G(w,p){for(;(w[p]&65535)!=w[p];)w[p+1]+=w[p]>>>16,w[p]&=65535,p++}function K(w,p){this.g=w,this.h=p}function ct(w,p){if(D(p))throw Error("division by zero");if(D(w))return new K(g,g);if(N(w))return p=ct(C(w),p),new K(C(p.g),C(p.h));if(N(p))return p=ct(w,C(p)),new K(C(p.g),p.h);if(30<w.g.length){if(N(w)||N(p))throw Error("slowDivide_ only works with positive integers.");for(var v=y,I=p;0>=I.l(w);)v=Lt(v),I=Lt(I);var E=it(v,1),A=it(I,1);for(I=it(I,2),v=it(v,2);!D(I);){var b=A.add(I);0>=b.l(w)&&(E=E.add(v),A=b),I=it(I,1),v=it(v,1)}return p=U(w,E.j(p)),new K(E,p)}for(E=g;0<=w.l(p);){for(v=Math.max(1,Math.floor(w.m()/p.m())),I=Math.ceil(Math.log(v)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=d(v),b=A.j(p);N(b)||0<b.l(w);)v-=I,A=d(v),b=A.j(p);D(A)&&(A=y),E=E.add(A),w=U(w,b)}return new K(E,w)}n.A=function(w){return ct(this,w).h},n.and=function(w){for(var p=Math.max(this.g.length,w.g.length),v=[],I=0;I<p;I++)v[I]=this.i(I)&w.i(I);return new a(v,this.h&w.h)},n.or=function(w){for(var p=Math.max(this.g.length,w.g.length),v=[],I=0;I<p;I++)v[I]=this.i(I)|w.i(I);return new a(v,this.h|w.h)},n.xor=function(w){for(var p=Math.max(this.g.length,w.g.length),v=[],I=0;I<p;I++)v[I]=this.i(I)^w.i(I);return new a(v,this.h^w.h)};function Lt(w){for(var p=w.g.length+1,v=[],I=0;I<p;I++)v[I]=w.i(I)<<1|w.i(I-1)>>>31;return new a(v,w.h)}function it(w,p){var v=p>>5;p%=32;for(var I=w.g.length-v,E=[],A=0;A<I;A++)E[A]=0<p?w.i(A+v)>>>p|w.i(A+v+1)<<32-p:w.i(A+v);return new a(E,w.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,rd=_b.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,pn=_b.Integer=a}).apply(typeof vb<"u"?vb:typeof self<"u"?self:typeof window<"u"?window:{});var la=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Be={};var sd,od,Ri,ad,gs,da,cd,ud,ld;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function e(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof la=="object"&&la];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=e(this);function r(o,u){if(u)t:{var h=i;o=o.split(".");for(var f=0;f<o.length-1;f++){var T=o[f];if(!(T in h))break t;h=h[T]}o=o[o.length-1],f=h[o],u=u(f),u!=f&&u!=null&&t(h,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var h=0,f=!1,T={next:function(){if(!f&&h<o.length){var S=h++;return{value:u(S,o[S]),done:!1}}return f=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}r("Array.prototype.values",function(o){return o||function(){return s(this,function(u,h){return h})}});var a=a||{},c=this||self;function l(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function d(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function m(o,u,h){return o.call.apply(o.bind,arguments)}function g(o,u,h){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,f),o.apply(u,T)}}return function(){return o.apply(u,arguments)}}function y(o,u,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,y.apply(null,arguments)}function R(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var f=h.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function D(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(f,T,S){for(var P=Array(arguments.length-2),st=2;st<arguments.length;st++)P[st-2]=arguments[st];return u.prototype[T].apply(f,P)}}function N(o){let u=o.length;if(0<u){let h=Array(u);for(let f=0;f<u;f++)h[f]=o[f];return h}return[]}function C(o,u){for(let h=1;h<arguments.length;h++){let f=arguments[h];if(l(f)){let T=o.length||0,S=f.length||0;o.length=T+S;for(let P=0;P<S;P++)o[T+P]=f[P]}else o.push(f)}}class U{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function G(o){return/^[\s\xa0]*$/.test(o)}function K(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function ct(o){return ct[" "](o),o}ct[" "]=function(){};var Lt=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function it(o,u,h){for(let f in o)u.call(h,o[f],f,o)}function w(o,u){for(let h in o)u.call(void 0,o[h],h,o)}function p(o){let u={};for(let h in o)u[h]=o[h];return u}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(o,u){let h,f;for(let T=1;T<arguments.length;T++){f=arguments[T];for(h in f)o[h]=f[h];for(let S=0;S<v.length;S++)h=v[S],Object.prototype.hasOwnProperty.call(f,h)&&(o[h]=f[h])}}function E(o){var u=1;o=o.split(":");let h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function A(o){c.setTimeout(()=>{throw o},0)}function b(){var o=ac;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class Ae{constructor(){this.h=this.g=null}add(u,h){let f=tr.get();f.set(u,h),this.h?this.h.next=f:this.g=f,this.h=f}}var tr=new U(()=>new P_,o=>o.reset());class P_{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let er,nr=!1,ac=new Ae,Tm=()=>{let o=c.Promise.resolve(void 0);er=()=>{o.then(N_)}};var N_=()=>{for(var o;o=b();){try{o.h.call(o.g)}catch(h){A(h)}var u=tr;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}nr=!1};function Ke(){this.s=this.s,this.C=this.C}Ke.prototype.s=!1,Ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ct(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var O_=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return o}();function ir(o,u){if(Ct.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(Lt){t:{try{ct(u.nodeName);var T=!0;break t}catch{}T=!1}T||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:M_[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ir.aa.h.call(this)}}D(ir,Ct);var M_={2:"touch",3:"pen",4:"mouse"};ir.prototype.h=function(){ir.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var rr="closure_listenable_"+(1e6*Math.random()|0),L_=0;function V_(o,u,h,f,T){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!f,this.ha=T,this.key=++L_,this.da=this.fa=!1}function Bs(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function zs(o){this.src=o,this.g={},this.h=0}zs.prototype.add=function(o,u,h,f,T){var S=o.toString();o=this.g[S],o||(o=this.g[S]=[],this.h++);var P=uc(o,u,f,T);return-1<P?(u=o[P],h||(u.fa=!1)):(u=new V_(u,this.src,S,!!f,T),u.fa=h,o.push(u)),u};function cc(o,u){var h=u.type;if(h in o.g){var f=o.g[h],T=Array.prototype.indexOf.call(f,u,void 0),S;(S=0<=T)&&Array.prototype.splice.call(f,T,1),S&&(Bs(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function uc(o,u,h,f){for(var T=0;T<o.length;++T){var S=o[T];if(!S.da&&S.listener==u&&S.capture==!!h&&S.ha==f)return T}return-1}var lc="closure_lm_"+(1e6*Math.random()|0),dc={};function Am(o,u,h,f,T){if(f&&f.once)return Rm(o,u,h,f,T);if(Array.isArray(u)){for(var S=0;S<u.length;S++)Am(o,u[S],h,f,T);return null}return h=pc(h),o&&o[rr]?o.K(u,h,d(f)?!!f.capture:!!f,T):Sm(o,u,h,!1,f,T)}function Sm(o,u,h,f,T,S){if(!u)throw Error("Invalid event type");var P=d(T)?!!T.capture:!!T,st=mc(o);if(st||(o[lc]=st=new zs(o)),h=st.add(u,h,f,P,S),h.proxy)return h;if(f=F_(),h.proxy=f,f.src=o,f.listener=h,o.addEventListener)O_||(T=P),T===void 0&&(T=!1),o.addEventListener(u.toString(),f,T);else if(o.attachEvent)o.attachEvent(xm(u.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return h}function F_(){function o(h){return u.call(o.src,o.listener,h)}let u=U_;return o}function Rm(o,u,h,f,T){if(Array.isArray(u)){for(var S=0;S<u.length;S++)Rm(o,u[S],h,f,T);return null}return h=pc(h),o&&o[rr]?o.L(u,h,d(f)?!!f.capture:!!f,T):Sm(o,u,h,!0,f,T)}function Cm(o,u,h,f,T){if(Array.isArray(u))for(var S=0;S<u.length;S++)Cm(o,u[S],h,f,T);else f=d(f)?!!f.capture:!!f,h=pc(h),o&&o[rr]?(o=o.i,u=String(u).toString(),u in o.g&&(S=o.g[u],h=uc(S,h,f,T),-1<h&&(Bs(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete o.g[u],o.h--)))):o&&(o=mc(o))&&(u=o.g[u.toString()],o=-1,u&&(o=uc(u,h,f,T)),(h=-1<o?u[o]:null)&&hc(h))}function hc(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[rr])cc(u.i,o);else{var h=o.type,f=o.proxy;u.removeEventListener?u.removeEventListener(h,f,o.capture):u.detachEvent?u.detachEvent(xm(h),f):u.addListener&&u.removeListener&&u.removeListener(f),(h=mc(u))?(cc(h,o),h.h==0&&(h.src=null,u[lc]=null)):Bs(o)}}}function xm(o){return o in dc?dc[o]:dc[o]="on"+o}function U_(o,u){if(o.da)o=!0;else{u=new ir(u,this);var h=o.listener,f=o.ha||o.src;o.fa&&hc(o),o=h.call(f,u)}return o}function mc(o){return o=o[lc],o instanceof zs?o:null}var fc="__closure_events_fn_"+(1e9*Math.random()>>>0);function pc(o){return typeof o=="function"?o:(o[fc]||(o[fc]=function(u){return o.handleEvent(u)}),o[fc])}function xt(){Ke.call(this),this.i=new zs(this),this.M=this,this.F=null}D(xt,Ke),xt.prototype[rr]=!0,xt.prototype.removeEventListener=function(o,u,h,f){Cm(this,o,u,h,f)};function Vt(o,u){var h,f=o.F;if(f)for(h=[];f;f=f.F)h.push(f);if(o=o.M,f=u.type||u,typeof u=="string")u=new Ct(u,o);else if(u instanceof Ct)u.target=u.target||o;else{var T=u;u=new Ct(f,o),I(u,T)}if(T=!0,h)for(var S=h.length-1;0<=S;S--){var P=u.g=h[S];T=$s(P,f,!0,u)&&T}if(P=u.g=o,T=$s(P,f,!0,u)&&T,T=$s(P,f,!1,u)&&T,h)for(S=0;S<h.length;S++)P=u.g=h[S],T=$s(P,f,!1,u)&&T}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],f=0;f<h.length;f++)Bs(h[f]);delete o.g[u],o.h--}}this.F=null},xt.prototype.K=function(o,u,h,f){return this.i.add(String(o),u,!1,h,f)},xt.prototype.L=function(o,u,h,f){return this.i.add(String(o),u,!0,h,f)};function $s(o,u,h,f){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var T=!0,S=0;S<u.length;++S){var P=u[S];if(P&&!P.da&&P.capture==h){var st=P.listener,At=P.ha||P.src;P.fa&&cc(o.i,P),T=st.call(At,f)!==!1&&T}}return T&&!f.defaultPrevented}function Dm(o,u,h){if(typeof o=="function")h&&(o=y(o,h));else if(o&&typeof o.handleEvent=="function")o=y(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function km(o){o.g=Dm(()=>{o.g=null,o.i&&(o.i=!1,km(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class j_ extends Ke{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:km(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sr(o){Ke.call(this),this.h=o,this.g={}}D(sr,Ke);var Pm=[];function Nm(o){it(o.g,function(u,h){this.g.hasOwnProperty(h)&&hc(u)},o),o.g={}}sr.prototype.N=function(){sr.aa.N.call(this),Nm(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gc=c.JSON.stringify,B_=c.JSON.parse,z_=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function bc(){}bc.prototype.h=null;function Om(o){return o.h||(o.h=o.i())}function Mm(){}var or={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vc(){Ct.call(this,"d")}D(vc,Ct);function _c(){Ct.call(this,"c")}D(_c,Ct);var _n={},Lm=null;function qs(){return Lm=Lm||new xt}_n.La="serverreachability";function Vm(o){Ct.call(this,_n.La,o)}D(Vm,Ct);function ar(o){let u=qs();Vt(u,new Vm(u))}_n.STAT_EVENT="statevent";function Fm(o,u){Ct.call(this,_n.STAT_EVENT,o),this.stat=u}D(Fm,Ct);function Ft(o){let u=qs();Vt(u,new Fm(u,o))}_n.Ma="timingevent";function Um(o,u){Ct.call(this,_n.Ma,o),this.size=u}D(Um,Ct);function cr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function ur(){this.g=!0}ur.prototype.xa=function(){this.g=!1};function $_(o,u,h,f,T,S){o.info(function(){if(o.g)if(S)for(var P="",st=S.split("&"),At=0;At<st.length;At++){var Z=st[At].split("=");if(1<Z.length){var Dt=Z[0];Z=Z[1];var kt=Dt.split("_");P=2<=kt.length&&kt[1]=="type"?P+(Dt+"="+Z+"&"):P+(Dt+"=redacted&")}}else P=null;else P=S;return"XMLHTTP REQ ("+f+") [attempt "+T+"]: "+u+`
`+h+`
`+P})}function q_(o,u,h,f,T,S,P){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+T+"]: "+u+`
`+h+`
`+S+" "+P})}function si(o,u,h,f){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+H_(o,h)+(f?" "+f:"")})}function G_(o,u){o.info(function(){return"TIMEOUT: "+u})}ur.prototype.info=function(){};function H_(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var f=h[o];if(!(2>f.length)){var T=f[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var P=1;P<T.length;P++)T[P]=""}}}}return gc(h)}catch{return u}}var Gs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yc;function Hs(){}D(Hs,bc),Hs.prototype.g=function(){return new XMLHttpRequest},Hs.prototype.i=function(){return{}},yc=new Hs;function Qe(o,u,h,f){this.j=o,this.i=u,this.l=h,this.R=f||1,this.U=new sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bm}function Bm(){this.i=null,this.g="",this.h=!1}var zm={},Ic={};function wc(o,u,h){o.L=1,o.v=Ys(Se(u)),o.m=h,o.P=!0,$m(o,null)}function $m(o,u){o.F=Date.now(),Ws(o),o.A=Se(o.v);var h=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),rf(h.i,"t",f),o.C=0,h=o.j.J,o.h=new Bm,o.g=wf(o.j,h?u:null,!o.m),0<o.O&&(o.M=new j_(y(o.Y,o,o.g),o.O)),u=o.U,h=o.g,f=o.ca;var T="readystatechange";Array.isArray(T)||(T&&(Pm[0]=T.toString()),T=Pm);for(var S=0;S<T.length;S++){var P=Am(h,T[S],f||u.handleEvent,!1,u.h||u);if(!P)break;u.g[P.key]=P}u=o.H?p(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),ar(),$_(o.i,o.u,o.A,o.l,o.R,o.m)}Qe.prototype.ca=function(o){o=o.target;let u=this.M;u&&Re(o)==3?u.j():this.Y(o)},Qe.prototype.Y=function(o){try{if(o==this.g)t:{let kt=Re(this.g);var u=this.g.Ba();let ci=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||df(this.g)))){this.J||kt!=4||u==7||(u==8||0>=ci?ar(3):ar(2)),Ec(this);var h=this.g.Z();this.X=h;e:if(qm(this)){var f=df(this.g);o="";var T=f.length,S=Re(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),lr(this);var P="";break e}this.h.i=new c.TextDecoder}for(u=0;u<T;u++)this.h.h=!0,o+=this.h.i.decode(f[u],{stream:!(S&&u==T-1)});f.length=0,this.h.g+=o,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=h==200,q_(this.i,this.u,this.A,this.l,this.R,kt,h),this.o){if(this.T&&!this.K){e:{if(this.g){var st,At=this.g;if((st=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(st)){var Z=st;break e}}Z=null}if(h=Z)si(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tc(this,h);else{this.o=!1,this.s=3,Ft(12),yn(this),lr(this);break t}}if(this.P){h=!0;let ce;for(;!this.J&&this.C<P.length;)if(ce=W_(this,P),ce==Ic){kt==4&&(this.s=4,Ft(14),h=!1),si(this.i,this.l,null,"[Incomplete Response]");break}else if(ce==zm){this.s=4,Ft(15),si(this.i,this.l,P,"[Invalid Chunk]"),h=!1;break}else si(this.i,this.l,ce,null),Tc(this,ce);if(qm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||P.length!=0||this.h.h||(this.s=1,Ft(16),h=!1),this.o=this.o&&h,!h)si(this.i,this.l,P,"[Invalid Chunked Response]"),yn(this),lr(this);else if(0<P.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Dc(Dt),Dt.M=!0,Ft(11))}}else si(this.i,this.l,P,null),Tc(this,P);kt==4&&yn(this),this.o&&!this.J&&(kt==4?vf(this.j,this):(this.o=!1,Ws(this)))}else ly(this.g),h==400&&0<P.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),yn(this),lr(this)}}}catch{}finally{}};function qm(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function W_(o,u){var h=o.C,f=u.indexOf(`
`,h);return f==-1?Ic:(h=Number(u.substring(h,f)),isNaN(h)?zm:(f+=1,f+h>u.length?Ic:(u=u.slice(f,f+h),o.C=f+h,u)))}Qe.prototype.cancel=function(){this.J=!0,yn(this)};function Ws(o){o.S=Date.now()+o.I,Gm(o,o.I)}function Gm(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=cr(y(o.ba,o),u)}function Ec(o){o.B&&(c.clearTimeout(o.B),o.B=null)}Qe.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(G_(this.i,this.A),this.L!=2&&(ar(),Ft(17)),yn(this),this.s=2,lr(this)):Gm(this,this.S-o)};function lr(o){o.j.G==0||o.J||vf(o.j,o)}function yn(o){Ec(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Nm(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Tc(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||Ac(h.h,o))){if(!o.K&&Ac(h.h,o)&&h.G==3){try{var f=h.Da.g.parse(u)}catch{f=null}if(Array.isArray(f)&&f.length==3){var T=f;if(T[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)eo(h),Zs(h);else break t;xc(h),Ft(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=cr(y(h.Za,h),6e3));if(1>=Km(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else wn(h,11)}else if((o.K||h.g==o)&&eo(h),!G(u))for(T=h.Da.g.parse(u),u=0;u<T.length;u++){let Z=T[u];if(h.T=Z[0],Z=Z[1],h.G==2)if(Z[0]=="c"){h.K=Z[1],h.ia=Z[2];let Dt=Z[3];Dt!=null&&(h.la=Dt,h.j.info("VER="+h.la));let kt=Z[4];kt!=null&&(h.Aa=kt,h.j.info("SVER="+h.Aa));let ci=Z[5];ci!=null&&typeof ci=="number"&&0<ci&&(f=1.5*ci,h.L=f,h.j.info("backChannelRequestTimeoutMs_="+f)),f=h;let ce=o.g;if(ce){let io=ce.g?ce.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(io){var S=f.h;S.g||io.indexOf("spdy")==-1&&io.indexOf("quic")==-1&&io.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Sc(S,S.h),S.h=null))}if(f.D){let kc=ce.g?ce.g.getResponseHeader("X-HTTP-Session-Id"):null;kc&&(f.ya=kc,ut(f.I,f.D,kc))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),f=h;var P=o;if(f.qa=If(f,f.J?f.ia:null,f.W),P.K){Qm(f.h,P);var st=P,At=f.L;At&&(st.I=At),st.B&&(Ec(st),Ws(st)),f.g=P}else gf(f);0<h.i.length&&to(h)}else Z[0]!="stop"&&Z[0]!="close"||wn(h,7);else h.G==3&&(Z[0]=="stop"||Z[0]=="close"?Z[0]=="stop"?wn(h,7):Cc(h):Z[0]!="noop"&&h.l&&h.l.ta(Z),h.v=0)}}ar(4)}catch{}}var K_=class{constructor(o,u){this.g=o,this.map=u}};function Hm(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wm(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Km(o){return o.h?1:o.g?o.g.size:0}function Ac(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Sc(o,u){o.g?o.g.add(u):o.h=u}function Qm(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Hm.prototype.cancel=function(){if(this.i=Ym(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function Ym(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let h of o.g.values())u=u.concat(h.D);return u}return N(o.i)}function Q_(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(l(o)){for(var u=[],h=o.length,f=0;f<h;f++)u.push(o[f]);return u}u=[],h=0;for(f in o)u[h++]=o[f];return u}function Y_(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(l(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(let f in o)u[h++]=f;return u}}}function Jm(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(l(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=Y_(o),f=Q_(o),T=f.length,S=0;S<T;S++)u.call(void 0,f[S],h&&h[S],o)}var Xm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function J_(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var f=o[h].indexOf("="),T=null;if(0<=f){var S=o[h].substring(0,f);T=o[h].substring(f+1)}else S=o[h];u(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function In(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof In){this.h=o.h,Ks(this,o.j),this.o=o.o,this.g=o.g,Qs(this,o.s),this.l=o.l;var u=o.i,h=new mr;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),Zm(this,h),this.m=o.m}else o&&(u=String(o).match(Xm))?(this.h=!1,Ks(this,u[1]||"",!0),this.o=dr(u[2]||""),this.g=dr(u[3]||"",!0),Qs(this,u[4]),this.l=dr(u[5]||"",!0),Zm(this,u[6]||"",!0),this.m=dr(u[7]||"")):(this.h=!1,this.i=new mr(null,this.h))}In.prototype.toString=function(){var o=[],u=this.j;u&&o.push(hr(u,tf,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(hr(u,tf,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(hr(h,h.charAt(0)=="/"?ty:Z_,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",hr(h,ny)),o.join("")};function Se(o){return new In(o)}function Ks(o,u,h){o.j=h?dr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Qs(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Zm(o,u,h){u instanceof mr?(o.i=u,iy(o.i,o.h)):(h||(u=hr(u,ey)),o.i=new mr(u,o.h))}function ut(o,u,h){o.i.set(u,h)}function Ys(o){return ut(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function dr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function hr(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,X_),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function X_(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var tf=/[#\/\?@]/g,Z_=/[#\?:]/g,ty=/[#\?]/g,ey=/[#\?@]/g,ny=/#/g;function mr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Ye(o){o.g||(o.g=new Map,o.h=0,o.i&&J_(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=mr.prototype,n.add=function(o,u){Ye(this),this.i=null,o=oi(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function ef(o,u){Ye(o),u=oi(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function nf(o,u){return Ye(o),u=oi(o,u),o.g.has(u)}n.forEach=function(o,u){Ye(this),this.g.forEach(function(h,f){h.forEach(function(T){o.call(u,T,f,this)},this)},this)},n.na=function(){Ye(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let f=0;f<u.length;f++){let T=o[f];for(let S=0;S<T.length;S++)h.push(u[f])}return h},n.V=function(o){Ye(this);let u=[];if(typeof o=="string")nf(this,o)&&(u=u.concat(this.g.get(oi(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},n.set=function(o,u){return Ye(this),this.i=null,o=oi(this,o),nf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function rf(o,u,h){ef(o,u),0<h.length&&(o.i=null,o.g.set(oi(o,u),N(h)),o.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var f=u[h];let S=encodeURIComponent(String(f)),P=this.V(f);for(f=0;f<P.length;f++){var T=S;P[f]!==""&&(T+="="+encodeURIComponent(String(P[f]))),o.push(T)}}return this.i=o.join("&")};function oi(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function iy(o,u){u&&!o.j&&(Ye(o),o.i=null,o.g.forEach(function(h,f){var T=f.toLowerCase();f!=T&&(ef(this,f),rf(this,T,h))},o)),o.j=u}function ry(o,u){let h=new ur;if(c.Image){let f=new Image;f.onload=R(Je,h,"TestLoadImage: loaded",!0,u,f),f.onerror=R(Je,h,"TestLoadImage: error",!1,u,f),f.onabort=R(Je,h,"TestLoadImage: abort",!1,u,f),f.ontimeout=R(Je,h,"TestLoadImage: timeout",!1,u,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else u(!1)}function sy(o,u){let h=new ur,f=new AbortController,T=setTimeout(()=>{f.abort(),Je(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:f.signal}).then(S=>{clearTimeout(T),S.ok?Je(h,"TestPingServer: ok",!0,u):Je(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),Je(h,"TestPingServer: error",!1,u)})}function Je(o,u,h,f,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),f(h)}catch{}}function oy(){this.g=new z_}function ay(o,u,h){let f=h||"";try{Jm(o,function(T,S){let P=T;d(T)&&(P=gc(T)),u.push(f+S+"="+encodeURIComponent(P))})}catch(T){throw u.push(f+"type="+encodeURIComponent("_badmap")),T}}function fr(o){this.l=o.Ub||null,this.j=o.eb||!1}D(fr,bc),fr.prototype.g=function(){return new Js(this.l,this.j)},fr.prototype.i=function(o){return function(){return o}}({});function Js(o,u){xt.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Js,xt),n=Js.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,gr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function sf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?pr(this):gr(this),this.readyState==3&&sf(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,pr(this))},n.Qa=function(o){this.g&&(this.response=o,pr(this))},n.ga=function(){this.g&&pr(this)};function pr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,gr(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function gr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function of(o){let u="";return it(o,function(h,f){u+=f,u+=":",u+=h,u+=`\r
`}),u}function Rc(o,u,h){t:{for(f in h){var f=!1;break t}f=!0}f||(h=of(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):ut(o,u,h))}function lt(o){xt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(lt,xt);var cy=/^https?$/i,uy=["POST","PUT"];n=lt.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,h,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yc.g(),this.v=this.o?Om(this.o):Om(yc),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(S){af(this,S);return}if(o=h||"",h=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var T in f)h.set(T,f[T]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let S of f.keys())h.set(S,f.get(S));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),T=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(uy,u,void 0))||f||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,P]of h)this.g.setRequestHeader(S,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lf(this),this.u=!0,this.g.send(o),this.u=!1}catch(S){af(this,S)}};function af(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,cf(o),Xs(o)}function cf(o){o.A||(o.A=!0,Vt(o,"complete"),Vt(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Vt(this,"complete"),Vt(this,"abort"),Xs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xs(this,!0)),lt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?uf(this):this.bb())},n.bb=function(){uf(this)};function uf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Re(o)!=4||o.Z()!=2)){if(o.u&&Re(o)==4)Dm(o.Ea,0,o);else if(Vt(o,"readystatechange"),Re(o)==4){o.h=!1;try{let P=o.Z();t:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var h;if(!(h=u)){var f;if(f=P===0){var T=String(o.D).match(Xm)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),f=!cy.test(T?T.toLowerCase():"")}h=f}if(h)Vt(o,"complete"),Vt(o,"success");else{o.m=6;try{var S=2<Re(o)?o.g.statusText:""}catch{S=""}o.l=S+" ["+o.Z()+"]",cf(o)}}finally{Xs(o)}}}}function Xs(o,u){if(o.g){lf(o);let h=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Vt(o,"ready");try{h.onreadystatechange=f}catch{}}}function lf(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function Re(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<Re(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),B_(u)}};function df(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function ly(o){let u={};o=(o.g&&2<=Re(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(G(o[f]))continue;var h=E(o[f]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=u[T]||[];u[T]=S,S.push(h)}w(u,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function hf(o){this.Aa=0,this.i=[],this.j=new ur,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=br("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=br("baseRetryDelayMs",5e3,o),this.cb=br("retryDelaySeedMs",1e4,o),this.Wa=br("forwardChannelMaxRetries",2,o),this.wa=br("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Hm(o&&o.concurrentRequestLimit),this.Da=new oy,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=hf.prototype,n.la=8,n.G=1,n.connect=function(o,u,h,f){Ft(0),this.W=o,this.H=u||{},h&&f!==void 0&&(this.H.OSID=h,this.H.OAID=f),this.F=this.X,this.I=If(this,null,this.W),to(this)};function Cc(o){if(mf(o),o.G==3){var u=o.U++,h=Se(o.I);if(ut(h,"SID",o.K),ut(h,"RID",u),ut(h,"TYPE","terminate"),vr(o,h),u=new Qe(o,o.j,u),u.L=2,u.v=Ys(Se(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=wf(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Ws(u)}yf(o)}function Zs(o){o.g&&(Dc(o),o.g.cancel(),o.g=null)}function mf(o){Zs(o),o.u&&(c.clearTimeout(o.u),o.u=null),eo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function to(o){if(!Wm(o.h)&&!o.s){o.s=!0;var u=o.Ga;er||Tm(),nr||(er(),nr=!0),ac.add(u,o),o.B=0}}function dy(o,u){return Km(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=cr(y(o.Ga,o,u),_f(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let T=new Qe(this,this.j,o),S=this.o;if(this.S&&(S?(S=p(S),I(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)t:{for(var u=0,h=0;h<this.i.length;h++){e:{var f=this.i[h];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break e}f=void 0}if(f===void 0)break;if(u+=f,4096<u){u=h;break t}if(u===4096||h===this.i.length-1){u=h+1;break t}}u=1e3}else u=1e3;u=pf(this,T,u),h=Se(this.I),ut(h,"RID",o),ut(h,"CVER",22),this.D&&ut(h,"X-HTTP-Session-Id",this.D),vr(this,h),S&&(this.O?u="headers="+encodeURIComponent(String(of(S)))+"&"+u:this.m&&Rc(h,this.m,S)),Sc(this.h,T),this.Ua&&ut(h,"TYPE","init"),this.P?(ut(h,"$req",u),ut(h,"SID","null"),T.T=!0,wc(T,h,null)):wc(T,h,u),this.G=2}}else this.G==3&&(o?ff(this,o):this.i.length==0||Wm(this.h)||ff(this))};function ff(o,u){var h;u?h=u.l:h=o.U++;let f=Se(o.I);ut(f,"SID",o.K),ut(f,"RID",h),ut(f,"AID",o.T),vr(o,f),o.m&&o.o&&Rc(f,o.m,o.o),h=new Qe(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=pf(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Sc(o.h,h),wc(h,f,u)}function vr(o,u){o.H&&it(o.H,function(h,f){ut(u,f,h)}),o.l&&Jm({},function(h,f){ut(u,f,h)})}function pf(o,u,h){h=Math.min(o.i.length,h);var f=o.l?y(o.l.Na,o.l,o):null;t:{var T=o.i;let S=-1;for(;;){let P=["count="+h];S==-1?0<h?(S=T[0].g,P.push("ofs="+S)):S=0:P.push("ofs="+S);let st=!0;for(let At=0;At<h;At++){let Z=T[At].g,Dt=T[At].map;if(Z-=S,0>Z)S=Math.max(0,T[At].g-100),st=!1;else try{ay(Dt,P,"req"+Z+"_")}catch{f&&f(Dt)}}if(st){f=P.join("&");break t}}}return o=o.i.splice(0,h),u.D=o,f}function gf(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;er||Tm(),nr||(er(),nr=!0),ac.add(u,o),o.v=0}}function xc(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=cr(y(o.Fa,o),_f(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,bf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=cr(y(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),Zs(this),bf(this))};function Dc(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function bf(o){o.g=new Qe(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Se(o.qa);ut(u,"RID","rpc"),ut(u,"SID",o.K),ut(u,"AID",o.T),ut(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&ut(u,"TO",o.ja),ut(u,"TYPE","xmlhttp"),vr(o,u),o.m&&o.o&&Rc(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=Ys(Se(u)),h.m=null,h.P=!0,$m(h,o)}n.Za=function(){this.C!=null&&(this.C=null,Zs(this),xc(this),Ft(19))};function eo(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function vf(o,u){var h=null;if(o.g==u){eo(o),Dc(o),o.g=null;var f=2}else if(Ac(o.h,u))h=u.D,Qm(o.h,u),f=1;else return;if(o.G!=0){if(u.o)if(f==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var T=o.B;f=qs(),Vt(f,new Um(f,h)),to(o)}else gf(o);else if(T=u.s,T==3||T==0&&0<u.X||!(f==1&&dy(o,u)||f==2&&xc(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),T){case 1:wn(o,5);break;case 4:wn(o,10);break;case 3:wn(o,6);break;default:wn(o,2)}}}function _f(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function wn(o,u){if(o.j.info("Error code "+u),u==2){var h=y(o.fb,o),f=o.Xa;let T=!f;f=new In(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ks(f,"https"),Ys(f),T?ry(f.toString(),h):sy(f.toString(),h)}else Ft(2);o.G=0,o.l&&o.l.sa(u),yf(o),mf(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function yf(o){if(o.G=0,o.ka=[],o.l){let u=Ym(o.h);(u.length!=0||o.i.length!=0)&&(C(o.ka,u),C(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function If(o,u,h){var f=h instanceof In?Se(h):new In(h);if(f.g!="")u&&(f.g=u+"."+f.g),Qs(f,f.s);else{var T=c.location;f=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;var S=new In(null);f&&Ks(S,f),u&&(S.g=u),T&&Qs(S,T),h&&(S.l=h),f=S}return h=o.D,u=o.ya,h&&u&&ut(f,h,u),ut(f,"VER",o.la),vr(o,f),f}function wf(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new lt(new fr({eb:h})):new lt(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ef(){}n=Ef.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function no(){}no.prototype.g=function(o,u){return new Gt(o,u)};function Gt(o,u){xt.call(this),this.g=new hf(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!G(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!G(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new ai(this)}D(Gt,xt),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Cc(this.g)},Gt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=gc(o),o=h);u.i.push(new K_(u.Ya++,o)),u.G==3&&to(u)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Cc(this.g),delete this.g,Gt.aa.N.call(this)};function Tf(o){vc.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(let h in u){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}D(Tf,vc);function Af(){_c.call(this),this.status=1}D(Af,_c);function ai(o){this.g=o}D(ai,Ef),ai.prototype.ua=function(){Vt(this.g,"a")},ai.prototype.ta=function(o){Vt(this.g,new Tf(o))},ai.prototype.sa=function(o){Vt(this.g,new Af)},ai.prototype.ra=function(){Vt(this.g,"b")},no.prototype.createWebChannel=no.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,ld=Be.createWebChannelTransport=function(){return new no},ud=Be.getStatEventTarget=function(){return qs()},cd=Be.Event=_n,da=Be.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gs.NO_ERROR=0,Gs.TIMEOUT=8,Gs.HTTP_ERROR=6,gs=Be.ErrorCode=Gs,jm.COMPLETE="complete",ad=Be.EventType=jm,Mm.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Ri=Be.WebChannel=Mm,od=Be.FetchXmlHttpFactory=fr,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,sd=Be.XhrIo=lt}).apply(typeof la<"u"?la:typeof self<"u"?self:typeof window<"u"?window:{});var yb="@firebase/firestore";var Tt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");var Yi="10.12.1";var Wn=new cn("@firebase/firestore");function bs(){return Wn.logLevel}function M(n,...t){if(Wn.logLevel<=Y.DEBUG){let e=t.map(Gh);Wn.debug(`Firestore (${Yi}): ${n}`,...e)}}function $e(n,...t){if(Wn.logLevel<=Y.ERROR){let e=t.map(Gh);Wn.error(`Firestore (${Yi}): ${n}`,...e)}}function Mi(n,...t){if(Wn.logLevel<=Y.WARN){let e=t.map(Gh);Wn.warn(`Firestore (${Yi}): ${n}`,...e)}}function Gh(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function B(n="Unexpected state"){let t=`FIRESTORE (${Yi}) INTERNAL ASSERTION FAILED: `+n;throw $e(t),new Error(t)}function at(n,t){n||B()}function q(n,t){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends Kt{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ze=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var ga=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},pd=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Tt.UNAUTHENTICATED))}shutdown(){}},gd=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},bd=class{constructor(t){this.t=t,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let i=this.i,r=l=>this.i!==i?(i=this.i,e(l)):Promise.resolve(),s=new ze;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ze,t.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let l=s;t.enqueueRetryable(()=>_(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{M("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(M("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ze)}},0),a()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(M("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(at(typeof i.accessToken=="string"),new ga(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return at(t===null||typeof t=="string"),new Tt(t)}},vd=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},_d=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new vd(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},yd=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Id=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let i=s=>{s.error!=null&&M("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,M("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};let r=s=>{M("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):M("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(at(typeof e.token=="string"),this.R=e.token,new yd(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function AA(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var ba=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=AA(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}};function et(n,t){return n<t?-1:n>t?1:0}function Li(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}var Rt=class n{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new V(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new V(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new V(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new V(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new n(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?et(this.nanoseconds,t.nanoseconds):et(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var H=class n{constructor(t){this.timestamp=t}static fromTimestamp(t){return new n(t)}static min(){return new n(new Rt(0,0))}static max(){return new n(new Rt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var va=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&B(),i===void 0?i=t.length-e:i>t.length-e&&B(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let s=t.get(r),a=e.get(r);if(s<a)return-1;if(s>a)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},gt=class n extends va{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new V(x.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},SA=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qt=class n extends va{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return SA.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(t){let e=[],i="",r=0,s=()=>{if(i.length===0)throw new V(x.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},a=!1;for(;r<t.length;){let c=t[r];if(c==="\\"){if(r+1===t.length)throw new V(x.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new V(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(s(),r++)}if(s(),a)throw new V(x.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var F=class n{constructor(t){this.path=t}static fromPath(t){return new n(gt.fromString(t))}static fromName(t){return new n(gt.fromString(t).popFirst(5))}static empty(){return new n(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&gt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return gt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new gt(t.slice()))}};var wd=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};wd.UNKNOWN_ID=-1;function RA(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=H.fromTimestamp(i===1e9?new Rt(e+1,0):new Rt(e,i));return new Kn(r,F.empty(),t)}function CA(n){return new Kn(n.readTime,n.key,-1)}var Kn=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(H.min(),F.empty(),-1)}static max(){return new n(H.max(),F.empty(),-1)}};function xA(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=F.comparator(n.documentKey,t.documentKey),e!==0?e:et(n.largestBatchId,t.largestBatchId))}var DA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ed=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Ms(n){return _(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==DA)throw n;M("LocalStore","Unexpectedly lost primary lease")})}var k=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,s=0,a=!1;t.forEach(c=>{++r,c.next(()=>{++s,a&&s===r&&e()},l=>i(l))}),a=!0,s===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let s=t.length,a=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;e(t[d]).next(m=>{a[d]=m,++c,c===s&&i(a)},m=>r(m))}})}static doWhile(t,e){return new n((i,r)=>{let s=()=>{t()===!0?e().next(()=>{s()},r):i()};s()})}};function kA(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Ls(n){return n.name==="IndexedDbTransactionError"}var Yb=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function Ka(n){return n==null}function Es(n){return n===0&&1/n==-1/0}function PA(n){return typeof n=="number"&&Number.isInteger(n)&&!Es(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var NA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fk=[...NA,"documentOverlays"],OA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],MA=OA,pk=[...MA,"indexConfiguration","indexState","indexEntries"];function Ib(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Xn(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Jb(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var ht=class n{constructor(t,e){this.comparator=t,this.root=e||ye.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ye.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ye.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ki(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ki(this.root,t,this.comparator,!1)}getReverseIterator(){return new ki(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ki(this.root,t,this.comparator,!0)}},ki=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},ye=class n{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new n(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();let t=this.left.check();if(t!==this.right.check())throw B();return t+(this.isRed()?0:1)}};ye.EMPTY=null,ye.RED=!0,ye.BLACK=!1;ye.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(t,e,i,r,s){return this}insert(t,e,i){return new ye(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Mt=class n{constructor(t){this.comparator=t,this.data=new ht(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new _a(this.data.getIterator())}getIteratorFrom(t){return new _a(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},_a=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var _e=class n{constructor(t){this.fields=t,t.sort(Qt.comparator)}static empty(){return new n([])}unionWith(t){let e=new Mt(Qt.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Li(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var ya=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var jt=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ya("Invalid base64 string: "+s):s}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return et(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};jt.EMPTY_BYTE_STRING=new jt("");var LA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qe(n){if(at(!!n),typeof n=="string"){let t=0,e=LA.exec(n);if(at(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gn(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}function Hh(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Wh(n){let t=n.mapValue.fields.__previous_value__;return Hh(t)?Wh(t):t}function Ts(n){let t=qe(n.mapValue.fields.__local_write_time__.timestampValue);return new Rt(t.seconds,t.nanos)}var Td=class{constructor(t,e,i,r,s,a,c,l,d){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d}},Ia=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var ha={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Qn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hh(n)?4:Xb(n)?9007199254740991:10:B()}function Ee(n,t){if(n===t)return!0;let e=Qn(n);if(e!==Qn(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ts(n).isEqual(Ts(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let a=qe(r.timestampValue),c=qe(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,s){return gn(r.bytesValue).isEqual(gn(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return dt(r.geoPointValue.latitude)===dt(s.geoPointValue.latitude)&&dt(r.geoPointValue.longitude)===dt(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return dt(r.integerValue)===dt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let a=dt(r.doubleValue),c=dt(s.doubleValue);return a===c?Es(a)===Es(c):isNaN(a)&&isNaN(c)}return!1}(n,t);case 9:return Li(n.arrayValue.values||[],t.arrayValue.values||[],Ee);case 10:return function(r,s){let a=r.mapValue.fields||{},c=s.mapValue.fields||{};if(Ib(a)!==Ib(c))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!Ee(a[l],c[l])))return!1;return!0}(n,t);default:return B()}}function As(n,t){return(n.values||[]).find(e=>Ee(e,t))!==void 0}function Vi(n,t){if(n===t)return 0;let e=Qn(n),i=Qn(t);if(e!==i)return et(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return et(n.booleanValue,t.booleanValue);case 2:return function(s,a){let c=dt(s.integerValue||s.doubleValue),l=dt(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,t);case 3:return wb(n.timestampValue,t.timestampValue);case 4:return wb(Ts(n),Ts(t));case 5:return et(n.stringValue,t.stringValue);case 6:return function(s,a){let c=gn(s),l=gn(a);return c.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,a){let c=s.split("/"),l=a.split("/");for(let d=0;d<c.length&&d<l.length;d++){let m=et(c[d],l[d]);if(m!==0)return m}return et(c.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,a){let c=et(dt(s.latitude),dt(a.latitude));return c!==0?c:et(dt(s.longitude),dt(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(s,a){let c=s.values||[],l=a.values||[];for(let d=0;d<c.length&&d<l.length;++d){let m=Vi(c[d],l[d]);if(m)return m}return et(c.length,l.length)}(n.arrayValue,t.arrayValue);case 10:return function(s,a){if(s===ha.mapValue&&a===ha.mapValue)return 0;if(s===ha.mapValue)return 1;if(a===ha.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=a.fields||{},m=Object.keys(d);l.sort(),m.sort();for(let g=0;g<l.length&&g<m.length;++g){let y=et(l[g],m[g]);if(y!==0)return y;let R=Vi(c[l[g]],d[m[g]]);if(R!==0)return R}return et(l.length,m.length)}(n.mapValue,t.mapValue);default:throw B()}}function wb(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return et(n,t);let e=qe(n),i=qe(t),r=et(e.seconds,i.seconds);return r!==0?r:et(e.nanos,i.nanos)}function Fi(n){return Ad(n)}function Ad(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=qe(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return gn(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return F.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let s of e.values||[])r?r=!1:i+=",",i+=Ad(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",s=!0;for(let a of i)s?s=!1:r+=",",r+=`${a}:${Ad(e.fields[a])}`;return r+"}"}(n.mapValue):B()}function Sd(n){return!!n&&"integerValue"in n}function Kh(n){return!!n&&"arrayValue"in n}function Eb(n){return!!n&&"nullValue"in n}function Tb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fa(n){return!!n&&"mapValue"in n}function _s(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return Xn(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=_s(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=_s(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Xb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var se=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!fa(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=_s(e)}setAll(t){let e=Qt.emptyPath(),i={},r=[];t.forEach((a,c)=>{if(!e.isImmediateParentOf(c)){let l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=c.popLast()}a?i[c.lastSegment()]=_s(a):r.push(c.lastSegment())});let s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){let e=this.field(t.popLast());fa(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ee(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];fa(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Xn(e,(r,s)=>t[r]=s);for(let r of i)delete t[r]}clone(){return new n(_s(this.value))}};function Zb(n){let t=[];return Xn(n.fields,(e,i)=>{let r=new Qt([e]);if(fa(i)){let s=Zb(i.mapValue).fields;if(s.length===0)t.push(r);else for(let a of s)t.push(r.child(a))}else t.push(r)}),new _e(t)}var me=class n{constructor(t,e,i,r,s,a,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(t){return new n(t,0,H.min(),H.min(),H.min(),se.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,H.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,H.min(),H.min(),se.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,H.min(),H.min(),se.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=se.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=se.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ui=class{constructor(t,e){this.position=t,this.inclusive=e}};function Ab(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let s=t[r],a=n.position[r];if(s.field.isKeyField()?i=F.comparator(F.fromName(a.referenceValue),e.key):i=Vi(a,e.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Sb(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ee(n.position[e],t.position[e]))return!1;return!0}var ji=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function VA(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var wa=class{},wt=class n extends wa{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Cd(t,e,i):e==="array-contains"?new kd(t,i):e==="in"?new Pd(t,i):e==="not-in"?new Nd(t,i):e==="array-contains-any"?new Od(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new xd(t,i):new Dd(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Vi(e,this.value)):e!==null&&Qn(this.value)===Qn(e)&&this.matchesComparison(Vi(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class n extends wa{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new n(t,e)}matches(t){return tv(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function tv(n){return n.op==="and"}function ev(n){return FA(n)&&tv(n)}function FA(n){for(let t of n.filters)if(t instanceof Te)return!1;return!0}function Rd(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+Fi(n.value);if(ev(n))return n.filters.map(t=>Rd(t)).join(",");{let t=n.filters.map(e=>Rd(e)).join(",");return`${n.op}(${t})`}}function nv(n,t){return n instanceof wt?function(i,r){return r instanceof wt&&i.op===r.op&&i.field.isEqual(r.field)&&Ee(i.value,r.value)}(n,t):n instanceof Te?function(i,r){return r instanceof Te&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,c)=>s&&nv(a,r.filters[c]),!0):!1}(n,t):void B()}function iv(n){return n instanceof wt?function(e){return`${e.field.canonicalString()} ${e.op} ${Fi(e.value)}`}(n):n instanceof Te?function(e){return e.op.toString()+" {"+e.getFilters().map(iv).join(" ,")+"}"}(n):"Filter"}var Cd=class extends wt{constructor(t,e,i){super(t,e,i),this.key=F.fromName(i.referenceValue)}matches(t){let e=F.comparator(t.key,this.key);return this.matchesComparison(e)}},xd=class extends wt{constructor(t,e){super(t,"in",e),this.keys=rv("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},Dd=class extends wt{constructor(t,e){super(t,"not-in",e),this.keys=rv("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function rv(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>F.fromName(i.referenceValue))}var kd=class extends wt{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return Kh(e)&&As(e.arrayValue,this.value)}},Pd=class extends wt{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&As(this.value.arrayValue,e)}},Nd=class extends wt{constructor(t,e){super(t,"not-in",e)}matches(t){if(As(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!As(this.value.arrayValue,e)}},Od=class extends wt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!Kh(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>As(this.value.arrayValue,i))}};var Md=class{constructor(t,e=null,i=[],r=[],s=null,a=null,c=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}};function Rb(n,t=null,e=[],i=[],r=null,s=null,a=null){return new Md(n,t,e,i,r,s,a)}function Qh(n){let t=q(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Rd(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Ka(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Fi(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Fi(i)).join(",")),t.ue=e}return t.ue}function Yh(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!VA(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!nv(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Sb(n.startAt,t.startAt)&&Sb(n.endAt,t.endAt)}function Ld(n){return F.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Bi=class{constructor(t,e=null,i=[],r=[],s=null,a="F",c=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function UA(n,t,e,i,r,s,a,c){return new Bi(n,t,e,i,r,s,a,c)}function Jh(n){return new Bi(n)}function Cb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jA(n){return n.collectionGroup!==null}function ys(n){let t=q(n);if(t.ce===null){t.ce=[];let e=new Set;for(let s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Mt(Qt.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new ji(s,i))}),e.has(Qt.keyField().canonicalString())||t.ce.push(new ji(Qt.keyField(),i))}return t.ce}function Ie(n){let t=q(n);return t.le||(t.le=BA(t,ys(n))),t.le}function BA(n,t){if(n.limitType==="F")return Rb(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new ji(r.field,s)});let e=n.endAt?new Ui(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ui(n.startAt.position,n.startAt.inclusive):null;return Rb(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Vd(n,t,e){return new Bi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Qa(n,t){return Yh(Ie(n),Ie(t))&&n.limitType===t.limitType}function sv(n){return`${Qh(Ie(n))}|lt:${n.limitType}`}function Ci(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>iv(r)).join(", ")}]`),Ka(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Fi(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Fi(r)).join(",")),`Target(${i})`}(Ie(n))}; limitType=${n.limitType})`}function Ya(n,t){return t.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):F.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(let s of ys(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(a,c,l){let d=Ab(a,c,l);return a.inclusive?d<=0:d<0}(i.startAt,ys(i),r)||i.endAt&&!function(a,c,l){let d=Ab(a,c,l);return a.inclusive?d>=0:d>0}(i.endAt,ys(i),r))}(n,t)}function zA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ov(n){return(t,e)=>{let i=!1;for(let r of ys(n)){let s=$A(r,t,e);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function $A(n,t,e){let i=n.field.isKeyField()?F.comparator(t.key,e.key):function(s,a,c){let l=a.data.field(s),d=c.data.field(s);return l!==null&&d!==null?Vi(l,d):B()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return B()}}var bn=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Xn(this.inner,(e,i)=>{for(let[r,s]of i)t(r,s)})}isEmpty(){return Jb(this.inner)}size(){return this.innerSize}};var qA=new ht(F.comparator);function Ge(){return qA}var av=new ht(F.comparator);function vs(...n){let t=av;for(let e of n)t=t.insert(e.key,e);return t}function cv(n){let t=av;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function $n(){return Is()}function uv(){return Is()}function Is(){return new bn(n=>n.toString(),(n,t)=>n.isEqual(t))}var GA=new ht(F.comparator),HA=new Mt(F.comparator);function J(...n){let t=HA;for(let e of n)t=t.add(e);return t}var WA=new Mt(et);function KA(){return WA}function lv(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Es(t)?"-0":t}}function dv(n){return{integerValue:""+n}}function QA(n,t){return PA(t)?dv(t):lv(n,t)}var zi=class{constructor(){this._=void 0}};function YA(n,t,e){return n instanceof $i?function(r,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Hh(s)&&(s=Wh(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(e,t):n instanceof Yn?mv(n,t):n instanceof Jn?fv(n,t):function(r,s){let a=hv(r,s),c=xb(a)+xb(r.Pe);return Sd(a)&&Sd(r.Pe)?dv(c):lv(r.serializer,c)}(n,t)}function JA(n,t,e){return n instanceof Yn?mv(n,t):n instanceof Jn?fv(n,t):e}function hv(n,t){return n instanceof qi?function(i){return Sd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}var $i=class extends zi{},Yn=class extends zi{constructor(t){super(),this.elements=t}};function mv(n,t){let e=pv(t);for(let i of n.elements)e.some(r=>Ee(r,i))||e.push(i);return{arrayValue:{values:e}}}var Jn=class extends zi{constructor(t){super(),this.elements=t}};function fv(n,t){let e=pv(t);for(let i of n.elements)e=e.filter(r=>!Ee(r,i));return{arrayValue:{values:e}}}var qi=class extends zi{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function xb(n){return dt(n.integerValue||n.doubleValue)}function pv(n){return Kh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function XA(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Yn&&r instanceof Yn||i instanceof Jn&&r instanceof Jn?Li(i.elements,r.elements,Ee):i instanceof qi&&r instanceof qi?Ee(i.Pe,r.Pe):i instanceof $i&&r instanceof $i}(n.transform,t.transform)}var Fd=class{constructor(t,e){this.version=t,this.transformResults=e}},Hn=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function pa(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var Gi=class{};function gv(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Ea(n.key,Hn.none()):new Hi(n.key,n.data,Hn.none());{let e=n.data,i=se.empty(),r=new Mt(Qt.comparator);for(let s of t.fields)if(!r.has(s)){let a=e.field(s);a===null&&s.length>1&&(s=s.popLast(),a=e.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new He(n.key,i,new _e(r.toArray()),Hn.none())}}function ZA(n,t,e){n instanceof Hi?function(r,s,a){let c=r.value.clone(),l=kb(r.fieldTransforms,s,a.transformResults);c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,t,e):n instanceof He?function(r,s,a){if(!pa(r.precondition,s))return void s.convertToUnknownDocument(a.version);let c=kb(r.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(bv(r)),l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,e):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function ws(n,t,e,i){return n instanceof Hi?function(s,a,c,l){if(!pa(s.precondition,a))return c;let d=s.value.clone(),m=Pb(s.fieldTransforms,l,a);return d.setAll(m),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,t,e,i):n instanceof He?function(s,a,c,l){if(!pa(s.precondition,a))return c;let d=Pb(s.fieldTransforms,l,a),m=a.data;return m.setAll(bv(s)),m.setAll(d),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,t,e,i):function(s,a,c){return pa(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,t,e)}function tS(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),s=hv(i.transform,r||null);s!=null&&(e===null&&(e=se.empty()),e.set(i.field,s))}return e||null}function Db(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Li(i,r,(s,a)=>XA(s,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var Hi=class extends Gi{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},He=class extends Gi{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function bv(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function kb(n,t,e){let i=new Map;at(n.length===e.length);for(let r=0;r<e.length;r++){let s=n[r],a=s.transform,c=t.data.field(s.field);i.set(s.field,JA(a,c,e[r]))}return i}function Pb(n,t,e){let i=new Map;for(let r of n){let s=r.transform,a=e.data.field(r.field);i.set(r.field,YA(s,a,t))}return i}var Ea=class extends Gi{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ud=class extends Gi{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var jd=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(t.key)&&ZA(s,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=ws(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=ws(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=uv();return this.mutations.forEach(r=>{let s=t.get(r.key),a=s.overlayedDocument,c=this.applyToLocalView(a,s.mutatedFields);c=e.has(r.key)?null:c;let l=gv(a,c);l!==null&&i.set(r.key,l),a.isValidDocument()||a.convertToNoDocument(H.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),J())}isEqual(t){return this.batchId===t.batchId&&Li(this.mutations,t.mutations,(e,i)=>Db(e,i))&&Li(this.baseMutations,t.baseMutations,(e,i)=>Db(e,i))}},Bd=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){at(t.mutations.length===i.length);let r=function(){return GA}(),s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new n(t,e,i,r)}};var zd=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var $d=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var ft,X;function eS(n){switch(n){default:return B();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function vv(n){if(n===void 0)return $e("GRPC error has no .code"),x.UNKNOWN;switch(n){case ft.OK:return x.OK;case ft.CANCELLED:return x.CANCELLED;case ft.UNKNOWN:return x.UNKNOWN;case ft.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case ft.INTERNAL:return x.INTERNAL;case ft.UNAVAILABLE:return x.UNAVAILABLE;case ft.UNAUTHENTICATED:return x.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case ft.NOT_FOUND:return x.NOT_FOUND;case ft.ALREADY_EXISTS:return x.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return x.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case ft.ABORTED:return x.ABORTED;case ft.OUT_OF_RANGE:return x.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return x.UNIMPLEMENTED;case ft.DATA_LOSS:return x.DATA_LOSS;default:return B()}}(X=ft||(ft={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";var Nb=null;function nS(){return new TextEncoder}var iS=new pn([4294967295,4294967295],0);function Ob(n){let t=nS().encode(n),e=new rd;return e.update(t),new Uint8Array(e.digest())}function Mb(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new pn([e,i],0),new pn([r,s],0)]}var qd=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new qn(`Invalid padding: ${e}`);if(i<0)throw new qn(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new qn(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new qn(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=pn.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(pn.fromNumber(i)));return r.compare(iS)===1&&(r=new pn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=Ob(t),[i,r]=Mb(e);for(let s=0;s<this.hashCount;s++){let a=this.Ee(i,r,s);if(!this.de(a))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new n(s,r,e);return i.forEach(c=>a.insert(c)),a}insert(t){if(this.Ie===0)return;let e=Ob(t),[i,r]=Mb(e);for(let s=0;s<this.hashCount;s++){let a=this.Ee(i,r,s);this.Ae(a)}}Ae(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},qn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ta=class n{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,Ss.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(H.min(),r,new ht(et),Ge(),J())}},Ss=class n{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,J(),J(),J())}};var Pi=class{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}},Aa=class{constructor(t,e){this.targetId=t,this.me=e}},Sa=class{constructor(t,e,i=jt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},Ra=class{constructor(){this.fe=0,this.ge=Vb(),this.pe=jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=J(),e=J(),i=J();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:B()}}),new Ss(this.pe,this.ye,t,e,i)}ve(){this.we=!1,this.ge=Vb()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,at(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Gd=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=Ge(),this.qe=Lb(),this.Qe=new ht(et)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:B()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){let e=t.targetId,i=t.me.count,r=this.Je(e);if(r){let s=r.target;if(Ld(s))if(i===0){let a=new F(s.path);this.Ue(e,a,me.newNoDocument(a,H.min()))}else at(i===1);else{let a=this.Ye(e);if(a!==i){let c=this.Ze(t),l=c?this.Xe(c,t,a):1;if(l!==0){this.je(e);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,d)}Nb?.et(function(m,g,y,R,D){var N,C,U,G,K,ct;let Lt={localCacheCount:m,existenceFilterCount:g.count,databaseId:y.database,projectId:y.projectId},it=g.unchangedNames;return it&&(Lt.bloomFilter={applied:D===0,hashCount:(N=it?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(G=(U=(C=it?.bits)===null||C===void 0?void 0:C.bitmap)===null||U===void 0?void 0:U.length)!==null&&G!==void 0?G:0,padding:(ct=(K=it?.bits)===null||K===void 0?void 0:K.padding)!==null&&ct!==void 0?ct:0,mightContain:w=>{var p;return(p=R?.mightContain(w))!==null&&p!==void 0&&p}}),Lt}(a,t.me,this.Le.tt(),c,l))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e,a,c;try{a=gn(i).toUint8Array()}catch(l){if(l instanceof ya)return Mi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new qd(a,r,s)}catch(l){return Mi(l instanceof qn?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){let i=this.Le.getRemoteKeysForTarget(e),r=0;return i.forEach(s=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(c)||(this.Ue(e,s,null),r++)}),r}rt(t){let e=new Map;this.Be.forEach((s,a)=>{let c=this.Je(a);if(c){if(s.current&&Ld(c.target)){let l=new F(c.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,me.newNoDocument(l,t))}s.be&&(e.set(a,s.Ce()),s.ve())}});let i=J();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(l=>{let d=this.Je(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(t));let r=new Ta(t,e,this.Qe,this.ke,i);return this.ke=Ge(),this.qe=Lb(),this.Qe=new ht(et),r}$e(t,e){if(!this.ze(t))return;let i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;let r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Ra,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Mt(et),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||M("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Ra),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function Lb(){return new ht(F.comparator)}function Vb(){return new ht(F.comparator)}var rS={asc:"ASCENDING",desc:"DESCENDING"},sS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oS={and:"AND",or:"OR"},Hd=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function Wd(n,t){return n.useProto3Json||Ka(t)?t:{value:t}}function Ca(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _v(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function aS(n,t){return Ca(n,t.toTimestamp())}function we(n){return at(!!n),H.fromTimestamp(function(e){let i=qe(e);return new Rt(i.seconds,i.nanos)}(n))}function Xh(n,t){return Kd(n,t).canonicalString()}function Kd(n,t){let e=function(r){return new gt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function yv(n){let t=gt.fromString(n);return at(Av(t)),t}function Qd(n,t){return Xh(n.databaseId,t.path)}function dd(n,t){let e=yv(t);if(e.get(1)!==n.databaseId.projectId)throw new V(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new V(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new F(wv(e))}function Iv(n,t){return Xh(n.databaseId,t)}function cS(n){let t=yv(n);return t.length===4?gt.emptyPath():wv(t)}function Yd(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wv(n){return at(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Fb(n,t,e){return{name:Qd(n,t),fields:e.value.mapValue.fields}}function uS(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:B()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(d,m){return d.useProto3Json?(at(m===void 0||typeof m=="string"),jt.fromBase64String(m||"")):(at(m===void 0||m instanceof Buffer||m instanceof Uint8Array),jt.fromUint8Array(m||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(d){let m=d.code===void 0?x.UNKNOWN:vv(d.code);return new V(m,d.message||"")}(a);e=new Sa(i,r,s,c||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=dd(n,i.document.name),s=we(i.document.updateTime),a=i.document.createTime?we(i.document.createTime):H.min(),c=new se({mapValue:{fields:i.document.fields}}),l=me.newFoundDocument(r,s,a,c),d=i.targetIds||[],m=i.removedTargetIds||[];e=new Pi(d,m,l.key,l)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=dd(n,i.document),s=i.readTime?we(i.readTime):H.min(),a=me.newNoDocument(r,s),c=i.removedTargetIds||[];e=new Pi([],c,a.key,a)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=dd(n,i.document),s=i.removedTargetIds||[];e=new Pi([],s,r,null)}else{if(!("filter"in t))return B();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,a=new $d(r,s),c=i.targetId;e=new Aa(c,a)}}return e}function lS(n,t){let e;if(t instanceof Hi)e={update:Fb(n,t.key,t.value)};else if(t instanceof Ea)e={delete:Qd(n,t.key)};else if(t instanceof He)e={update:Fb(n,t.key,t.data),updateMask:_S(t.fieldMask)};else{if(!(t instanceof Ud))return B();e={verify:Qd(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,a){let c=a.transform;if(c instanceof $i)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Yn)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Jn)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof qi)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw B()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:aS(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B()}(n,t.precondition)),e}function dS(n,t){return n&&n.length>0?(at(t!==void 0),n.map(e=>function(r,s){let a=r.updateTime?we(r.updateTime):we(s);return a.isEqual(H.min())&&(a=we(s)),new Fd(a,r.transformResults||[])}(e,t))):[]}function hS(n,t){return{documents:[Iv(n,t.path)]}}function mS(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Iv(n,r);let s=function(d){if(d.length!==0)return Tv(Te.create(d,"and"))}(t.filters);s&&(e.structuredQuery.where=s);let a=function(d){if(d.length!==0)return d.map(m=>function(y){return{field:xi(y.field),direction:gS(y.dir)}}(m))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);let c=Wd(n,t.limit);return c!==null&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{_t:e,parent:r}}function fS(n){let t=cS(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){at(i===1);let m=e.from[0];m.allDescendants?r=m.collectionId:t=t.child(m.collectionId)}let s=[];e.where&&(s=function(g){let y=Ev(g);return y instanceof Te&&ev(y)?y.getFilters():[y]}(e.where));let a=[];e.orderBy&&(a=function(g){return g.map(y=>function(D){return new ji(Di(D.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(y))}(e.orderBy));let c=null;e.limit&&(c=function(g){let y;return y=typeof g=="object"?g.value:g,Ka(y)?null:y}(e.limit));let l=null;e.startAt&&(l=function(g){let y=!!g.before,R=g.values||[];return new Ui(R,y)}(e.startAt));let d=null;return e.endAt&&(d=function(g){let y=!g.before,R=g.values||[];return new Ui(R,y)}(e.endAt)),UA(t,r,a,s,c,"F",l,d)}function pS(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Ev(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=Di(e.unaryFilter.field);return wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Di(e.unaryFilter.field);return wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Di(e.unaryFilter.field);return wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Di(e.unaryFilter.field);return wt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(n):n.fieldFilter!==void 0?function(e){return wt.create(Di(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Te.create(e.compositeFilter.filters.map(i=>Ev(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return B()}}(e.compositeFilter.op))}(n):B()}function gS(n){return rS[n]}function bS(n){return sS[n]}function vS(n){return oS[n]}function xi(n){return{fieldPath:n.canonicalString()}}function Di(n){return Qt.fromServerFormat(n.fieldPath)}function Tv(n){return n instanceof wt?function(e){if(e.op==="=="){if(Tb(e.value))return{unaryFilter:{field:xi(e.field),op:"IS_NAN"}};if(Eb(e.value))return{unaryFilter:{field:xi(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Tb(e.value))return{unaryFilter:{field:xi(e.field),op:"IS_NOT_NAN"}};if(Eb(e.value))return{unaryFilter:{field:xi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xi(e.field),op:bS(e.op),value:e.value}}}(n):n instanceof Te?function(e){let i=e.getFilters().map(r=>Tv(r));return i.length===1?i[0]:{compositeFilter:{op:vS(e.op),filters:i}}}(n):B()}function _S(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Av(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Rs=class n{constructor(t,e,i,r,s=H.min(),a=H.min(),c=jt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var Jd=class{constructor(t){this.ct=t}};function yS(n){let t=fS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vd(t,t.limit,"L"):t}var xa=class{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(dt(t.integerValue));else if("doubleValue"in t){let i=dt(t.doubleValue);isNaN(i)?this.Et(e,13):(this.Et(e,15),Es(i)?e.dt(0):e.dt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Et(e,20),typeof i=="string"&&(i=qe(i)),e.At(`${i.seconds||""}`),e.dt(i.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(gn(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.Et(e,45),e.dt(i.latitude||0),e.dt(i.longitude||0)}else"mapValue"in t?Xb(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):B()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){let i=t.fields||{};this.Et(e,55);for(let r of Object.keys(i))this.Rt(r,e),this.It(i[r],e)}wt(t,e){let i=t.values||[];this.Et(e,50);for(let r of i)this.It(r,e)}gt(t,e){this.Et(e,37),F.fromName(t).path.forEach(i=>{this.Et(e,60),this.St(i,e)})}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}};xa.bt=new xa;var Xd=class{constructor(){this._n=new Zd}addToCollectionParentIndex(t,e){return this._n.add(e),k.resolve()}getCollectionParents(t,e){return k.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return k.resolve()}deleteFieldIndex(t,e){return k.resolve()}deleteAllFieldIndexes(t){return k.resolve()}createTargetIndexes(t,e){return k.resolve()}getDocumentsMatchingTarget(t,e){return k.resolve(null)}getIndexType(t,e){return k.resolve(0)}getFieldIndexes(t,e){return k.resolve([])}getNextCollectionGroupToUpdate(t){return k.resolve(null)}getMinOffset(t,e){return k.resolve(Kn.min())}getMinOffsetFromCollectionGroup(t,e){return k.resolve(Kn.min())}updateCollectionGroup(t,e,i){return k.resolve()}updateIndexEntries(t,e){return k.resolve()}},Zd=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Mt(gt.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Mt(gt.comparator)).toArray()}};var bk=new Uint8Array(0);var ve=class n{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ve.DEFAULT_COLLECTION_PERCENTILE=10,ve.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ve.DEFAULT=new ve(41943040,ve.DEFAULT_COLLECTION_PERCENTILE,ve.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ve.DISABLED=new ve(-1,0,0);var Cs=class n{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var th=class{constructor(){this.changes=new bn(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,me.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?k.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var eh=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var nh=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&ws(i.mutation,r,_e.empty(),Rt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,J()).next(()=>i))}getLocalViewOfDocuments(t,e,i=J()){let r=$n();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let a=vs();return s.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){let i=$n();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,J()))}populateOverlays(t,e,i){let r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,c)=>{e.set(a,c)})})}computeViews(t,e,i,r){let s=Ge(),a=Is(),c=function(){return Is()}();return e.forEach((l,d)=>{let m=i.get(d.key);r.has(d.key)&&(m===void 0||m.mutation instanceof He)?s=s.insert(d.key,d):m!==void 0?(a.set(d.key,m.mutation.getFieldMask()),ws(m.mutation,d,m.mutation.getFieldMask(),Rt.now())):a.set(d.key,_e.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((d,m)=>a.set(d,m)),e.forEach((d,m)=>{var g;return c.set(d,new eh(m,(g=a.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(t,e){let i=Is(),r=new ht((a,c)=>a-c),s=J();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(let c of a)c.keys().forEach(l=>{let d=e.get(l);if(d===null)return;let m=i.get(l)||_e.empty();m=c.applyToLocalView(d,m),i.set(l,m);let g=(r.get(c.batchId)||J()).add(l);r=r.insert(c.batchId,g)})}).next(()=>{let a=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,m=l.value,g=uv();m.forEach(y=>{if(!s.has(y)){let R=gv(e.get(y),i.get(y));R!==null&&g.set(y,R),s=s.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(t,d,g))}return k.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(a){return F.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):jA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{let a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):k.resolve($n()),c=-1,l=s;return a.next(d=>k.forEach(d,(m,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(m)?k.resolve():this.remoteDocumentCache.getEntry(t,m).next(y=>{l=l.insert(m,y)}))).next(()=>this.populateOverlays(t,d,s)).next(()=>this.computeViews(t,l,d,J())).next(m=>({batchId:c,changes:cv(m)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new F(e)).next(i=>{let r=vs();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let s=e.collectionGroup,a=vs();return this.indexManager.getCollectionParents(t,s).next(c=>k.forEach(c,l=>{let d=function(g,y){return new Bi(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,d,i,r).next(m=>{m.forEach((g,y)=>{a=a.insert(g,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(a=>{s.forEach((l,d)=>{let m=d.getKey();a.get(m)===null&&(a=a.insert(m,me.newInvalidDocument(m)))});let c=vs();return a.forEach((l,d)=>{let m=s.get(l);m!==void 0&&ws(m.mutation,d,_e.empty(),Rt.now()),Ya(e,d)&&(c=c.insert(l,d))}),c})}};var ih=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return k.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:we(r.createTime)}}(e)),k.resolve()}getNamedQuery(t,e){return k.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:yS(r.bundledQuery),readTime:we(r.readTime)}}(e)),k.resolve()}};var rh=class{constructor(){this.overlays=new ht(F.comparator),this.hr=new Map}getOverlay(t,e){return k.resolve(this.overlays.get(e))}getOverlays(t,e){let i=$n();return k.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ht(t,e,s)}),k.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),k.resolve()}getOverlaysForCollection(t,e,i){let r=$n(),s=e.length+1,a=new F(e.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return k.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new ht((d,m)=>d-m),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>i){let m=s.get(d.largestBatchId);m===null&&(m=$n(),s=s.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}let c=$n(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=r)););return k.resolve(c)}ht(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new zd(e,i));let s=this.hr.get(e);s===void 0&&(s=J(),this.hr.set(e,s)),this.hr.set(e,s.add(i.key))}};var xs=class{constructor(){this.Pr=new Mt(pt.Ir),this.Tr=new Mt(pt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){let i=new pt(t,e);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Ar(new pt(t,e))}Rr(t,e){t.forEach(i=>this.removeReference(i,e))}Vr(t){let e=new F(new gt([])),i=new pt(e,t),r=new pt(e,t+1),s=[];return this.Tr.forEachInRange([i,r],a=>{this.Ar(a),s.push(a.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let e=new F(new gt([])),i=new pt(e,t),r=new pt(e,t+1),s=J();return this.Tr.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){let e=new pt(t,0),i=this.Pr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},pt=class{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return F.comparator(t.key,e.key)||et(t.pr,e.pr)}static Er(t,e){return et(t.pr,e.pr)||F.comparator(t.key,e.key)}};var sh=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Mt(pt.Ir)}checkEmpty(t){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new jd(s,e,i,r);this.mutationQueue.push(a);for(let c of r)this.wr=this.wr.add(new pt(c.key,s)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return k.resolve(a)}lookupMutationBatch(t,e){return k.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.br(i),s=r<0?0:r;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new pt(e,0),r=new pt(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],a=>{let c=this.Sr(a.pr);s.push(c)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Mt(et);return e.forEach(r=>{let s=new pt(r,0),a=new pt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,a],c=>{i=i.add(c.pr)})}),k.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,s=i;F.isDocumentKey(s)||(s=s.child(""));let a=new pt(new F(s),0),c=new Mt(et);return this.wr.forEachWhile(l=>{let d=l.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(c=c.add(l.pr)),!0)},a),k.resolve(this.Dr(c))}Dr(t){let e=[];return t.forEach(i=>{let r=this.Sr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){at(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return k.forEach(e.mutations,r=>{let s=new pt(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=i})}Mn(t){}containsKey(t,e){let i=new pt(e,0),r=this.wr.firstAfterOrEqual(i);return k.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,k.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var oh=class{constructor(t){this.vr=t,this.docs=function(){return new ht(F.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),s=r?r.size:0,a=this.vr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return k.resolve(i?i.document.mutableCopy():me.newInvalidDocument(e))}getEntries(t,e){let i=Ge();return e.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():me.newInvalidDocument(r))}),k.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=Ge(),a=e.path,c=new F(a.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:m}}=l.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||xA(CA(m),i)<=0||(r.has(m.key)||Ya(e,m))&&(s=s.insert(m.key,m.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(t,e,i,r){B()}Fr(t,e){return k.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new ah(this)}getSize(t){return k.resolve(this.size)}},ah=class extends th{constructor(t){super(),this.ar=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(i)}),k.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}};var ch=class{constructor(t){this.persistence=t,this.Mr=new bn(e=>Qh(e),Yh),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.Or=0,this.Nr=new xs,this.targetCount=0,this.Lr=Cs.Nn()}forEachTarget(t,e){return this.Mr.forEach((i,r)=>e(r)),k.resolve()}getLastRemoteSnapshotVersion(t){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return k.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Or&&(this.Or=e),k.resolve()}qn(t){this.Mr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Lr=new Cs(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,k.resolve()}updateTargetData(t,e){return this.qn(e),k.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,k.resolve()}removeTargets(t,e,i){let r=0,s=[];return this.Mr.forEach((a,c)=>{c.sequenceNumber<=e&&i.get(c.targetId)===null&&(this.Mr.delete(a),s.push(this.removeMatchingKeysForTargetId(t,c.targetId)),r++)}),k.waitFor(s).next(()=>r)}getTargetCount(t){return k.resolve(this.targetCount)}getTargetData(t,e){let i=this.Mr.get(e)||null;return k.resolve(i)}addMatchingKeys(t,e,i){return this.Nr.dr(e,i),k.resolve()}removeMatchingKeys(t,e,i){this.Nr.Rr(e,i);let r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),k.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),k.resolve()}getMatchingKeysForTargetId(t,e){let i=this.Nr.gr(e);return k.resolve(i)}containsKey(t,e){return k.resolve(this.Nr.containsKey(e))}};var uh=class{constructor(t,e){this.Br={},this.overlays={},this.kr=new Yb(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new ch(this),this.indexManager=new Xd,this.remoteDocumentCache=function(r){return new oh(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Jd(e),this.$r=new ih(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new rh,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Br[t.toKey()];return i||(i=new sh(e,this.referenceDelegate),this.Br[t.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,i){M("MemoryPersistence","Starting transaction:",t);let r=new lh(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return k.or(Object.values(this.Br).map(i=>()=>i.containsKey(t,e)))}},lh=class extends Ed{constructor(t){super(),this.currentSequenceNumber=t}},dh=class n{constructor(t){this.persistence=t,this.zr=new xs,this.jr=null}static Hr(t){return new n(t)}get Jr(){if(this.jr)return this.jr;throw B()}addReference(t,e,i){return this.zr.addReference(i,e),this.Jr.delete(i.toString()),k.resolve()}removeReference(t,e,i){return this.zr.removeReference(i,e),this.Jr.add(i.toString()),k.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),k.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Jr,i=>{let r=F.fromPath(i);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,H.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(i=>{i?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return k.or([()=>k.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}};var hh=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.qi=i,this.Qi=r}static Ki(t,e){let i=J(),r=J();for(let s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(t,e.fromCache,i,r)}};var mh=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var fh=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return cg()?8:kA(yt())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,i,r){let s={result:null};return this.ji(t,e).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Hi(t,e,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new mh;return this.Ji(t,e,a).next(c=>{if(s.result=c,this.Ui)return this.Yi(t,e,a,c.size)})}).next(()=>s.result)}Yi(t,e,i,r){return i.documentReadCount<this.Wi?(bs()<=Y.DEBUG&&M("QueryEngine","SDK will not create cache indexes for query:",Ci(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),k.resolve()):(bs()<=Y.DEBUG&&M("QueryEngine","Query:",Ci(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(bs()<=Y.DEBUG&&M("QueryEngine","The SDK decides to create cache indexes for query:",Ci(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ie(e))):k.resolve())}ji(t,e){if(Cb(e))return k.resolve(null);let i=Ie(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Vd(e,null,"F"),i=Ie(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{let a=J(...s);return this.zi.getDocuments(t,a).next(c=>this.indexManager.getMinOffset(t,i).next(l=>{let d=this.Zi(e,c);return this.Xi(e,d,a,l.readTime)?this.ji(t,Vd(e,null,"F")):this.es(t,d,e,l)}))})))}Hi(t,e,i,r){return Cb(e)||r.isEqual(H.min())?k.resolve(null):this.zi.getDocuments(t,i).next(s=>{let a=this.Zi(e,s);return this.Xi(e,a,i,r)?k.resolve(null):(bs()<=Y.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ci(e)),this.es(t,a,e,RA(r,-1)).next(c=>c))})}Zi(t,e){let i=new Mt(ov(t));return e.forEach((r,s)=>{Ya(t,s)&&(i=i.add(s))}),i}Xi(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,i){return bs()<=Y.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",Ci(e)),this.zi.getDocumentsMatchingQuery(t,e,Kn.min(),i)}es(t,e,i,r){return this.zi.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(a=>{s=s.insert(a.key,a)}),s))}};var ph=class{constructor(t,e,i,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new ht(et),this.rs=new bn(s=>Qh(s),Yh),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(i)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new nh(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}};function IS(n,t,e,i){return new ph(n,t,e,i)}function Sv(n,t){return _(this,null,function*(){let e=q(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{let a=[],c=[],l=J();for(let d of r){a.push(d.batchId);for(let m of d.mutations)l=l.add(m.key)}for(let d of s){c.push(d.batchId);for(let m of d.mutations)l=l.add(m.key)}return e.localDocuments.getDocuments(i,l).next(d=>({us:d,removedBatchIds:a,addedBatchIds:c}))})})})}function wS(n,t){let e=q(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(c,l,d,m){let g=d.batch,y=g.keys(),R=k.resolve();return y.forEach(D=>{R=R.next(()=>m.getEntry(l,D)).next(N=>{let C=d.docVersions.get(D);at(C!==null),N.version.compareTo(C)<0&&(g.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),m.addEntry(N)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(l,g))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=J();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function Rv(n){let t=q(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function ES(n,t){let e=q(n),i=t.snapshotVersion,r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;let c=[];t.targetChanges.forEach((m,g)=>{let y=r.get(g);if(!y)return;c.push(e.Qr.removeMatchingKeys(s,m.removedDocuments,g).next(()=>e.Qr.addMatchingKeys(s,m.addedDocuments,g)));let R=y.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?R=R.withResumeToken(jt.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):m.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(m.resumeToken,i)),r=r.insert(g,R),function(N,C,U){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(y,R,m)&&c.push(e.Qr.updateTargetData(s,R))});let l=Ge(),d=J();if(t.documentUpdates.forEach(m=>{t.resolvedLimboDocuments.has(m)&&c.push(e.persistence.referenceDelegate.updateLimboDocument(s,m))}),c.push(TS(s,a,t.documentUpdates).next(m=>{l=m.cs,d=m.ls})),!i.isEqual(H.min())){let m=e.Qr.getLastRemoteSnapshotVersion(s).next(g=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(m)}return k.waitFor(c).next(()=>a.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(e.ns=r,s))}function TS(n,t,e){let i=J(),r=J();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let a=Ge();return e.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(H.min())?(t.removeEntry(c,l.readTime),a=a.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(l),a=a.insert(c,l)):M("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{cs:a,ls:r}})}function AS(n,t){let e=q(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function SS(n,t){let e=q(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Qr.getTargetData(i,t).next(s=>s?(r=s,k.resolve(r)):e.Qr.allocateTargetId(i).next(a=>(r=new Rs(t,a,"TargetPurposeListen",i.currentSequenceNumber),e.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(i.targetId,i),e.rs.set(t,i.targetId)),i})}function gh(n,t,e){return _(this,null,function*(){let i=q(n),r=i.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Ls(a))throw a;M("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}i.ns=i.ns.remove(t),i.rs.delete(r.target)})}function Ub(n,t,e){let i=q(n),r=H.min(),s=J();return i.persistence.runTransaction("Execute query","readwrite",a=>function(l,d,m){let g=q(l),y=g.rs.get(m);return y!==void 0?k.resolve(g.ns.get(y)):g.Qr.getTargetData(d,m)}(i,a,Ie(t)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(a,c.targetId).next(l=>{s=l})}).next(()=>i.ts.getDocumentsMatchingQuery(a,t,e?r:H.min(),e?s:J())).next(c=>(RS(i,zA(t),c),{documents:c,hs:s})))}function RS(n,t,e){let i=n.ss.get(t)||H.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ss.set(t,i)}var Da=class{constructor(){this.activeTargetIds=KA()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var bh=class{constructor(){this.no=new Da,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,i){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Da,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var vh=class{io(t){}shutdown(){}};var ka=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){M("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){M("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ma=null;function hd(){return ma===null?ma=function(){return 268435456+Math.round(2147483648*Math.random())}():ma++,"0x"+ma.toString(16)}var CS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var _h=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}};var Ot="WebChannelConnection",yh=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,i,r,s,a){let c=hd(),l=this.vo(e,i.toUriEncodedString());M("RestConnection",`Sending RPC '${e}' ${c}:`,l,r);let d={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(d,s,a),this.Mo(e,l,d,r).then(m=>(M("RestConnection",`Received RPC '${e}' ${c}: `,m),m),m=>{throw Mi("RestConnection",`RPC '${e}' ${c} failed with error: `,m,"url: ",l,"request:",r),m})}xo(e,i,r,s,a,c){return this.Co(e,i,r,s,a)}Fo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}vo(e,i){let r=CS[e];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,i,r){let s=hd();return new Promise((a,c)=>{let l=new sd;l.setWithCredentials(!0),l.listenOnce(ad.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gs.NO_ERROR:let m=l.getResponseJson();M(Ot,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(m)),a(m);break;case gs.TIMEOUT:M(Ot,`RPC '${t}' ${s} timed out`),c(new V(x.DEADLINE_EXCEEDED,"Request time out"));break;case gs.HTTP_ERROR:let g=l.getStatus();if(M(Ot,`RPC '${t}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let R=y?.error;if(R&&R.status&&R.message){let D=function(C){let U=C.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(U)>=0?U:x.UNKNOWN}(R.status);c(new V(D,R.message))}else c(new V(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new V(x.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{M(Ot,`RPC '${t}' ${s} completed.`)}});let d=JSON.stringify(r);M(Ot,`RPC '${t}' ${s} sending request:`,r),l.send(e,"POST",d,i,15)})}Oo(t,e,i){let r=hd(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=ld(),c=ud(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.xmlHttpFactory=new od({})),this.Fo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;let m=s.join("");M(Ot,`Creating RPC '${t}' stream ${r}: ${m}`,l);let g=a.createWebChannel(m,l),y=!1,R=!1,D=new _h({lo:C=>{R?M(Ot,`Not sending because RPC '${t}' stream ${r} is closed:`,C):(y||(M(Ot,`Opening RPC '${t}' stream ${r} transport.`),g.open(),y=!0),M(Ot,`RPC '${t}' stream ${r} sending:`,C),g.send(C))},ho:()=>g.close()}),N=(C,U,G)=>{C.listen(U,K=>{try{G(K)}catch(ct){setTimeout(()=>{throw ct},0)}})};return N(g,Ri.EventType.OPEN,()=>{R||(M(Ot,`RPC '${t}' stream ${r} transport opened.`),D.mo())}),N(g,Ri.EventType.CLOSE,()=>{R||(R=!0,M(Ot,`RPC '${t}' stream ${r} transport closed`),D.po())}),N(g,Ri.EventType.ERROR,C=>{R||(R=!0,Mi(Ot,`RPC '${t}' stream ${r} transport errored:`,C),D.po(new V(x.UNAVAILABLE,"The operation could not be completed")))}),N(g,Ri.EventType.MESSAGE,C=>{var U;if(!R){let G=C.data[0];at(!!G);let K=G,ct=K.error||((U=K[0])===null||U===void 0?void 0:U.error);if(ct){M(Ot,`RPC '${t}' stream ${r} received error:`,ct);let Lt=ct.status,it=function(v){let I=ft[v];if(I!==void 0)return vv(I)}(Lt),w=ct.message;it===void 0&&(it=x.INTERNAL,w="Unknown error status: "+Lt+" with message "+ct.message),R=!0,D.po(new V(it,w)),g.close()}else M(Ot,`RPC '${t}' stream ${r} received:`,G),D.yo(G)}}),N(c,cd.STAT_EVENT,C=>{C.stat===da.PROXY?M(Ot,`RPC '${t}' stream ${r} detected buffering proxy`):C.stat===da.NOPROXY&&M(Ot,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.fo()},0),D}};function md(){return typeof document<"u"?document:null}function Ja(n){return new Hd(n,!0)}var Pa=class{constructor(t,e,i=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=i,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();let e=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-i);r>0&&M("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Na=class{constructor(t,e,i,r,s,a,c,l){this.oi=t,this.Go=i,this.zo=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Pa(t,e)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return _(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}r_(){return _(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(t,e){return _(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():e&&e.code===x.RESOURCE_EXHAUSTED?($e(e.toString()),$e("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Ao(e)})}__(){}auth(){this.state=1;let t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===e&&this.u_(i,r)},i=>{t(()=>{let r=new V(x.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(t,e){let i=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>_(this,null,function*(){this.state=0,this.start()}))}c_(t){return M("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(M("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Ih=class extends Na{constructor(t,e,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,a),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();let e=uS(this.serializer,t),i=function(s){if(!("targetChange"in s))return H.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?H.min():a.readTime?we(a.readTime):H.min()}(t);return this.listener.h_(e,i)}P_(t){let e={};e.database=Yd(this.serializer),e.addTarget=function(s,a){let c,l=a.target;if(c=Ld(l)?{documents:hS(s,l)}:{query:mS(s,l)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=_v(s,a.resumeToken);let d=Wd(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(H.min())>0){c.readTime=Ca(s,a.snapshotVersion.toTimestamp());let d=Wd(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,t);let i=pS(this.serializer,t);i&&(e.labels=i),this.i_(e)}I_(t){let e={};e.database=Yd(this.serializer),e.removeTarget=t,this.i_(e)}},wh=class extends Na{constructor(t,e,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,a),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(at(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();let e=dS(t.writeResults,t.commitTime),i=we(t.commitTime);return this.listener.A_(i,e)}return at(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let t={};t.database=Yd(this.serializer),this.i_(t)}d_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>lS(this.serializer,i))};this.i_(e)}};var Eh=class extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new V(x.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(t,Kd(e,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(x.UNKNOWN,s.toString())})}xo(t,e,i,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.xo(t,Kd(e,i),r,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new V(x.UNKNOWN,a.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},Th=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?($e(e),this.y_=!1):M("OnlineStateTracker",e)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Ah=class{constructor(t,e,i,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{i.enqueueAndForget(()=>_(this,null,function*(){Zn(this)&&(M("RemoteStore","Restarting streams for network reachability change."),yield function(l){return _(this,null,function*(){let d=q(l);d.M_.add(4),yield Vs(d),d.N_.set("Unknown"),d.M_.delete(4),yield Xa(d)})}(this))}))}),this.N_=new Th(i,r)}};function Xa(n){return _(this,null,function*(){if(Zn(n))for(let t of n.x_)yield t(!0)})}function Vs(n){return _(this,null,function*(){for(let t of n.x_)yield t(!1)})}function Cv(n,t){let e=q(n);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),nm(e)?em(e):Ji(e).Xo()&&tm(e,t))}function Zh(n,t){let e=q(n),i=Ji(e);e.F_.delete(t),i.Xo()&&xv(e,t),e.F_.size===0&&(i.Xo()?i.n_():Zn(e)&&e.N_.set("Unknown"))}function tm(n,t){if(n.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(H.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Ji(n).P_(t)}function xv(n,t){n.L_.xe(t),Ji(n).I_(t)}function em(n){n.L_=new Gd({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.F_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),Ji(n).start(),n.N_.w_()}function nm(n){return Zn(n)&&!Ji(n).Zo()&&n.F_.size>0}function Zn(n){return q(n).M_.size===0}function Dv(n){n.L_=void 0}function xS(n){return _(this,null,function*(){n.N_.set("Online")})}function DS(n){return _(this,null,function*(){n.F_.forEach((t,e)=>{tm(n,t)})})}function kS(n,t){return _(this,null,function*(){Dv(n),nm(n)?(n.N_.D_(t),em(n)):n.N_.set("Unknown")})}function PS(n,t,e){return _(this,null,function*(){if(n.N_.set("Online"),t instanceof Sa&&t.state===2&&t.cause)try{yield function(r,s){return _(this,null,function*(){let a=s.cause;for(let c of s.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,a),r.F_.delete(c),r.L_.removeTarget(c))})}(n,t)}catch(i){M("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Oa(n,i)}else if(t instanceof Pi?n.L_.Ke(t):t instanceof Aa?n.L_.He(t):n.L_.We(t),!e.isEqual(H.min()))try{let i=yield Rv(n.localStore);e.compareTo(i)>=0&&(yield function(s,a){let c=s.L_.rt(a);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let m=s.F_.get(d);m&&s.F_.set(d,m.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach((l,d)=>{let m=s.F_.get(l);if(!m)return;s.F_.set(l,m.withResumeToken(jt.EMPTY_BYTE_STRING,m.snapshotVersion)),xv(s,l);let g=new Rs(m.target,l,d,m.sequenceNumber);tm(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){M("RemoteStore","Failed to raise snapshot:",i),yield Oa(n,i)}})}function Oa(n,t,e){return _(this,null,function*(){if(!Ls(t))throw t;n.M_.add(1),yield Vs(n),n.N_.set("Offline"),e||(e=()=>Rv(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){M("RemoteStore","Retrying IndexedDB access"),yield e(),n.M_.delete(1),yield Xa(n)}))})}function kv(n,t){return t().catch(e=>Oa(n,e,t))}function Za(n){return _(this,null,function*(){let t=q(n),e=vn(t),i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;NS(t);)try{let r=yield AS(t.localStore,i);if(r===null){t.v_.length===0&&e.n_();break}i=r.batchId,OS(t,r)}catch(r){yield Oa(t,r)}Pv(t)&&Nv(t)})}function NS(n){return Zn(n)&&n.v_.length<10}function OS(n,t){n.v_.push(t);let e=vn(n);e.Xo()&&e.E_&&e.d_(t.mutations)}function Pv(n){return Zn(n)&&!vn(n).Zo()&&n.v_.length>0}function Nv(n){vn(n).start()}function MS(n){return _(this,null,function*(){vn(n).V_()})}function LS(n){return _(this,null,function*(){let t=vn(n);for(let e of n.v_)t.d_(e.mutations)})}function VS(n,t,e){return _(this,null,function*(){let i=n.v_.shift(),r=Bd.from(i,t,e);yield kv(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Za(n)})}function FS(n,t){return _(this,null,function*(){t&&vn(n).E_&&(yield function(i,r){return _(this,null,function*(){if(function(a){return eS(a)&&a!==x.ABORTED}(r.code)){let s=i.v_.shift();vn(i).t_(),yield kv(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Za(i)}})}(n,t)),Pv(n)&&Nv(n)})}function jb(n,t){return _(this,null,function*(){let e=q(n);e.asyncQueue.verifyOperationInProgress(),M("RemoteStore","RemoteStore received new credentials");let i=Zn(e);e.M_.add(3),yield Vs(e),i&&e.N_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),yield Xa(e)})}function US(n,t){return _(this,null,function*(){let e=q(n);t?(e.M_.delete(2),yield Xa(e)):t||(e.M_.add(2),yield Vs(e),e.N_.set("Unknown"))})}function Ji(n){return n.B_||(n.B_=function(e,i,r){let s=q(e);return s.f_(),new Ih(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:xS.bind(null,n),To:DS.bind(null,n),Ao:kS.bind(null,n),h_:PS.bind(null,n)}),n.x_.push(t=>_(this,null,function*(){t?(n.B_.t_(),nm(n)?em(n):n.N_.set("Unknown")):(yield n.B_.stop(),Dv(n))}))),n.B_}function vn(n){return n.k_||(n.k_=function(e,i,r){let s=q(e);return s.f_(),new wh(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:MS.bind(null,n),Ao:FS.bind(null,n),R_:LS.bind(null,n),A_:VS.bind(null,n)}),n.x_.push(t=>_(this,null,function*(){t?(n.k_.t_(),yield Za(n)):(yield n.k_.stop(),n.v_.length>0&&(M("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))}))),n.k_}var Sh=class n{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ze,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){let a=Date.now()+i,c=new n(t,e,a,r,s);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(x.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function im(n,t){if($e("AsyncQueue",`${t}: ${n}`),Ls(n))return new V(x.UNAVAILABLE,`${t}: ${n}`);throw n}var Ma=class n{constructor(t){this.comparator=t?(e,i)=>t(e,i)||F.comparator(e.key,i.key):(e,i)=>F.comparator(e.key,i.key),this.keyedMap=vs(),this.sortedSet=new ht(this.comparator)}static emptySet(t){return new n(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var La=class{constructor(){this.q_=new ht(F.comparator)}track(t){let e=t.doc.key,i=this.q_.get(e);i?t.type!==0&&i.type===3?this.q_=this.q_.insert(e,t):t.type===3&&i.type!==1?this.q_=this.q_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.q_=this.q_.remove(e):t.type===1&&i.type===2?this.q_=this.q_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):B():this.q_=this.q_.insert(e,t)}Q_(){let t=[];return this.q_.inorderTraversal((e,i)=>{t.push(i)}),t}},Wi=class n{constructor(t,e,i,r,s,a,c,l,d){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(t,e,i,r,s){let a=[];return e.forEach(c=>{a.push({type:0,doc:c})}),new n(t,e,Ma.emptySet(e),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qa(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var Rh=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}},Ch=class{constructor(){this.queries=new bn(t=>sv(t),Qa),this.onlineState="Unknown",this.z_=new Set}};function jS(n,t){return _(this,null,function*(){let e=q(n),i=3,r=t.query,s=e.queries.get(r);s?!s.W_()&&t.G_()&&(i=2):(s=new Rh,i=t.G_()?0:1);try{switch(i){case 0:s.K_=yield e.onListen(r,!0);break;case 1:s.K_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(a){let c=im(a,`Initialization of query '${Ci(t.query)}' failed`);return void t.onError(c)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&rm(e)})}function BS(n,t){return _(this,null,function*(){let e=q(n),i=t.query,r=3,s=e.queries.get(i);if(s){let a=s.U_.indexOf(t);a>=0&&(s.U_.splice(a,1),s.U_.length===0?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function zS(n,t){let e=q(n),i=!1;for(let r of t){let s=r.query,a=e.queries.get(s);if(a){for(let c of a.U_)c.H_(r)&&(i=!0);a.K_=r}}i&&rm(e)}function $S(n,t,e){let i=q(n),r=i.queries.get(t);if(r)for(let s of r.U_)s.onError(e);i.queries.delete(t)}function rm(n){n.z_.forEach(t=>{t.next()})}var xh,Bb;(Bb=xh||(xh={})).J_="default",Bb.Cache="cache";var Dh=class{constructor(t,e,i){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new Wi(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache||!this.G_())return!0;let i=e!=="Offline";return(!this.options.ra||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ea(t){if(t.docChanges.length>0)return!0;let e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}na(t){t=Wi.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==xh.Cache}};var Va=class{constructor(t){this.key=t}},Fa=class{constructor(t){this.key=t}},kh=class{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=J(),this.mutatedKeys=J(),this.Ia=ov(t),this.Ta=new Ma(this.Ia)}get Ea(){return this.la}da(t,e){let i=e?e.Aa:new La,r=e?e.Ta:this.Ta,s=e?e.mutatedKeys:this.mutatedKeys,a=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((m,g)=>{let y=r.get(m),R=Ya(this.query,g)?g:null,D=!!y&&this.mutatedKeys.has(y.key),N=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations),C=!1;y&&R?y.data.isEqual(R.data)?D!==N&&(i.track({type:3,doc:R}),C=!0):this.Ra(y,R)||(i.track({type:2,doc:R}),C=!0,(l&&this.Ia(R,l)>0||d&&this.Ia(R,d)<0)&&(c=!0)):!y&&R?(i.track({type:0,doc:R}),C=!0):y&&!R&&(i.track({type:1,doc:y}),C=!0,(l||d)&&(c=!0)),C&&(R?(a=a.add(R),s=N?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),i.track({type:1,doc:m})}return{Ta:a,Aa:i,Xi:c,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;let a=t.Aa.Q_();a.sort((m,g)=>function(R,D){let N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return N(R)-N(D)}(m.type,g.type)||this.Ia(m.doc,g.doc)),this.Va(i),r=r!=null&&r;let c=e&&!r?this.ma():[],l=this.Pa.size===0&&this.current&&!r?1:0,d=l!==this.ha;return this.ha=l,a.length!==0||d?{snapshot:new Wi(this.query,t.Ta,s,a,t.mutatedKeys,l===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new La,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];let t=this.Pa;this.Pa=J(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let e=[];return t.forEach(i=>{this.Pa.has(i)||e.push(new Fa(i))}),this.Pa.forEach(i=>{t.has(i)||e.push(new Va(i))}),e}pa(t){this.la=t.hs,this.Pa=J();let e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return Wi.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Ph=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},Nh=class{constructor(t){this.key=t,this.wa=!1}},Oh=class{constructor(t,e,i,r,s,a){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new bn(c=>sv(c),Qa),this.Da=new Map,this.Ca=new Set,this.va=new ht(F.comparator),this.Fa=new Map,this.Ma=new xs,this.xa={},this.Oa=new Map,this.Na=Cs.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function qS(n,t,e=!0){return _(this,null,function*(){let i=Uv(n),r,s=i.ba.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=yield Ov(i,t,e,!0),r})}function GS(n,t){return _(this,null,function*(){let e=Uv(n);yield Ov(e,t,!0,!1)})}function Ov(n,t,e,i){return _(this,null,function*(){let r=yield SS(n.localStore,Ie(t)),s=r.targetId,a=e?n.sharedClientState.addLocalQueryTarget(s):"not-current",c;return i&&(c=yield HS(n,t,s,a==="current",r.resumeToken)),n.isPrimaryClient&&e&&Cv(n.remoteStore,r),c})}function HS(n,t,e,i,r){return _(this,null,function*(){n.Ba=(g,y,R)=>function(N,C,U,G){return _(this,null,function*(){let K=C.view.da(U);K.Xi&&(K=yield Ub(N.localStore,C.query,!1).then(({documents:w})=>C.view.da(w,K)));let ct=G&&G.targetChanges.get(C.targetId),Lt=G&&G.targetMismatches.get(C.targetId)!=null,it=C.view.applyChanges(K,N.isPrimaryClient,ct,Lt);return $b(N,C.targetId,it.fa),it.snapshot})}(n,g,y,R);let s=yield Ub(n.localStore,t,!0),a=new kh(t,s.hs),c=a.da(s.documents),l=Ss.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),d=a.applyChanges(c,n.isPrimaryClient,l);$b(n,e,d.fa);let m=new Ph(t,e,a);return n.ba.set(t,m),n.Da.has(e)?n.Da.get(e).push(t):n.Da.set(e,[t]),d.snapshot})}function WS(n,t,e){return _(this,null,function*(){let i=q(n),r=i.ba.get(t),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(a=>!Qa(a,t))),void i.ba.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield gh(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Zh(i.remoteStore,r.targetId),Mh(i,r.targetId)}).catch(Ms))):(Mh(i,r.targetId),yield gh(i.localStore,r.targetId,!0))})}function KS(n,t){return _(this,null,function*(){let e=q(n),i=e.ba.get(t),r=e.Da.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Zh(e.remoteStore,i.targetId))})}function QS(n,t,e){return _(this,null,function*(){let i=nR(n);try{let r=yield function(a,c){let l=q(a),d=Rt.now(),m=c.reduce((R,D)=>R.add(D.key),J()),g,y;return l.persistence.runTransaction("Locally write mutations","readwrite",R=>{let D=Ge(),N=J();return l.os.getEntries(R,m).next(C=>{D=C,D.forEach((U,G)=>{G.isValidDocument()||(N=N.add(U))})}).next(()=>l.localDocuments.getOverlayedDocuments(R,D)).next(C=>{g=C;let U=[];for(let G of c){let K=tS(G,g.get(G.key).overlayedDocument);K!=null&&U.push(new He(G.key,K,Zb(K.value.mapValue),Hn.exists(!0)))}return l.mutationQueue.addMutationBatch(R,d,U,c)}).next(C=>{y=C;let U=C.applyToLocalDocumentSet(g,N);return l.documentOverlayCache.saveOverlays(R,C.batchId,U)})}).then(()=>({batchId:y.batchId,changes:cv(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,c,l){let d=a.xa[a.currentUser.toKey()];d||(d=new ht(et)),d=d.insert(c,l),a.xa[a.currentUser.toKey()]=d}(i,r.batchId,e),yield Fs(i,r.changes),yield Za(i.remoteStore)}catch(r){let s=im(r,"Failed to persist write");e.reject(s)}})}function Mv(n,t){return _(this,null,function*(){let e=q(n);try{let i=yield ES(e.localStore,t);t.targetChanges.forEach((r,s)=>{let a=e.Fa.get(s);a&&(at(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.wa=!0:r.modifiedDocuments.size>0?at(a.wa):r.removedDocuments.size>0&&(at(a.wa),a.wa=!1))}),yield Fs(e,i,t)}catch(i){yield Ms(i)}})}function zb(n,t,e){let i=q(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.ba.forEach((s,a)=>{let c=a.view.j_(t);c.snapshot&&r.push(c.snapshot)}),function(a,c){let l=q(a);l.onlineState=c;let d=!1;l.queries.forEach((m,g)=>{for(let y of g.U_)y.j_(c)&&(d=!0)}),d&&rm(l)}(i.eventManager,t),r.length&&i.Sa.h_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function YS(n,t,e){return _(this,null,function*(){let i=q(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Fa.get(t),s=r&&r.key;if(s){let a=new ht(F.comparator);a=a.insert(s,me.newNoDocument(s,H.min()));let c=J().add(s),l=new Ta(H.min(),new Map,new ht(et),a,c);yield Mv(i,l),i.va=i.va.remove(s),i.Fa.delete(t),sm(i)}else yield gh(i.localStore,t,!1).then(()=>Mh(i,t,e)).catch(Ms)})}function JS(n,t){return _(this,null,function*(){let e=q(n),i=t.batch.batchId;try{let r=yield wS(e.localStore,t);Vv(e,i,null),Lv(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Fs(e,r)}catch(r){yield Ms(r)}})}function XS(n,t,e){return _(this,null,function*(){let i=q(n);try{let r=yield function(a,c){let l=q(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return l.mutationQueue.lookupMutationBatch(d,c).next(g=>(at(g!==null),m=g.keys(),l.mutationQueue.removeMutationBatch(d,g))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>l.localDocuments.getDocuments(d,m))})}(i.localStore,t);Vv(i,t,e),Lv(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Fs(i,r)}catch(r){yield Ms(r)}})}function Lv(n,t){(n.Oa.get(t)||[]).forEach(e=>{e.resolve()}),n.Oa.delete(t)}function Vv(n,t,e){let i=q(n),r=i.xa[i.currentUser.toKey()];if(r){let s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.xa[i.currentUser.toKey()]=r}}function Mh(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.Da.get(t))n.ba.delete(i),e&&n.Sa.ka(i,e);n.Da.delete(t),n.isPrimaryClient&&n.Ma.Vr(t).forEach(i=>{n.Ma.containsKey(i)||Fv(n,i)})}function Fv(n,t){n.Ca.delete(t.path.canonicalString());let e=n.va.get(t);e!==null&&(Zh(n.remoteStore,e),n.va=n.va.remove(t),n.Fa.delete(e),sm(n))}function $b(n,t,e){for(let i of e)i instanceof Va?(n.Ma.addReference(i.key,t),ZS(n,i)):i instanceof Fa?(M("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,t),n.Ma.containsKey(i.key)||Fv(n,i.key)):B()}function ZS(n,t){let e=t.key,i=e.path.canonicalString();n.va.get(e)||n.Ca.has(i)||(M("SyncEngine","New document in limbo: "+e),n.Ca.add(i),sm(n))}function sm(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let t=n.Ca.values().next().value;n.Ca.delete(t);let e=new F(gt.fromString(t)),i=n.Na.next();n.Fa.set(i,new Nh(e)),n.va=n.va.insert(e,i),Cv(n.remoteStore,new Rs(Ie(Jh(e.path)),i,"TargetPurposeLimboResolution",Yb.oe))}}function Fs(n,t,e){return _(this,null,function*(){let i=q(n),r=[],s=[],a=[];i.ba.isEmpty()||(i.ba.forEach((c,l)=>{a.push(i.Ba(l,t,e).then(d=>{if((d||e)&&i.isPrimaryClient){let m=d&&!d.fromCache;i.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(d){r.push(d);let m=hh.Ki(l.targetId,d);s.push(m)}}))}),yield Promise.all(a),i.Sa.h_(r),yield function(l,d){return _(this,null,function*(){let m=q(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>k.forEach(d,y=>k.forEach(y.qi,R=>m.persistence.referenceDelegate.addReference(g,y.targetId,R)).next(()=>k.forEach(y.Qi,R=>m.persistence.referenceDelegate.removeReference(g,y.targetId,R)))))}catch(g){if(!Ls(g))throw g;M("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let y=g.targetId;if(!g.fromCache){let R=m.ns.get(y),D=R.snapshotVersion,N=R.withLastLimboFreeSnapshotVersion(D);m.ns=m.ns.insert(y,N)}}})}(i.localStore,s))})}function tR(n,t){return _(this,null,function*(){let e=q(n);if(!e.currentUser.isEqual(t)){M("SyncEngine","User change. New user:",t.toKey());let i=yield Sv(e.localStore,t);e.currentUser=t,function(s,a){s.Oa.forEach(c=>{c.forEach(l=>{l.reject(new V(x.CANCELLED,a))})}),s.Oa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Fs(e,i.us)}})}function eR(n,t){let e=q(n),i=e.Fa.get(t);if(i&&i.wa)return J().add(i.key);{let r=J(),s=e.Da.get(t);if(!s)return r;for(let a of s){let c=e.ba.get(a);r=r.unionWith(c.view.Ea)}return r}}function Uv(n){let t=q(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Mv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=eR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YS.bind(null,t),t.Sa.h_=zS.bind(null,t.eventManager),t.Sa.ka=$S.bind(null,t.eventManager),t}function nR(n){let t=q(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=JS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XS.bind(null,t),t}var Ua=class{constructor(){this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=Ja(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return IS(this.persistence,new fh,t.initialUser,this.serializer)}createPersistence(t){return new uh(dh.Hr,this.serializer)}createSharedClientState(t){return new bh}terminate(){return _(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Lh=class{initialize(t,e){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tR.bind(null,this.syncEngine),yield US(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Ch}()}createDatastore(t){let e=Ja(t.databaseInfo.databaseId),i=function(s){return new yh(s)}(t.databaseInfo);return function(s,a,c,l){return new Eh(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,s,a,c){return new Ah(i,r,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,e=>zb(this.syncEngine,e,0),function(){return ka.D()?new ka:new vh}())}createSyncEngine(t,e){return function(r,s,a,c,l,d,m){let g=new Oh(r,s,a,c,l,d);return m&&(g.La=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return _(this,null,function*(){var t;yield function(i){return _(this,null,function*(){let r=q(i);M("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield Vs(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};var Vh=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):$e("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var Fh=class{constructor(t,e,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Tt.UNAUTHENTICATED,this.clientId=ba.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>_(this,null,function*(){M("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(M("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new ze;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=im(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function fd(n,t){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),M("FirestoreClient","Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>_(this,null,function*(){i.isEqual(r)||(yield Sv(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function qb(n,t){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield rR(n);M("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>jb(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>jb(t.remoteStore,r)),n._onlineComponents=t})}function iR(n){return n.name==="FirebaseError"?n.code===x.FAILED_PRECONDITION||n.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function rR(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){M("FirestoreClient","Using user provided OfflineComponentProvider");try{yield fd(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!iR(e))throw e;Mi("Error using user provided cache. Falling back to memory cache: "+e),yield fd(n,new Ua)}}else M("FirestoreClient","Using default OfflineComponentProvider"),yield fd(n,new Ua);return n._offlineComponents})}function jv(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(M("FirestoreClient","Using user provided OnlineComponentProvider"),yield qb(n,n._uninitializedComponentsProvider._online)):(M("FirestoreClient","Using default OnlineComponentProvider"),yield qb(n,new Lh))),n._onlineComponents})}function sR(n){return jv(n).then(t=>t.syncEngine)}function Gb(n){return _(this,null,function*(){let t=yield jv(n),e=t.eventManager;return e.onListen=qS.bind(null,t.syncEngine),e.onUnlisten=WS.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=GS.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=KS.bind(null,t.syncEngine),e})}function Bv(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var Hb=new Map;function oR(n,t,e){if(!e)throw new V(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function aR(n,t,e,i){if(t===!0&&i===!0)throw new V(x.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Wb(n){if(!F.isDocumentKey(n))throw new V(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function om(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":B()}function Ni(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new V(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=om(n);throw new V(x.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}var ja=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new V(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new V(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}aR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bv((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Ds=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ja({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new V(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ja(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new pd;switch(i.type){case"firstParty":return new _d(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new V(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=Hb.get(e);i&&(M("ComponentProvider","Removing Datastore"),Hb.delete(e),i.terminate())}(this),Promise.resolve()}};function zv(n,t,e,i={}){var r;let s=(n=Ni(n,Ds))._getSettings(),a=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=Tt.MOCK_USER;else{c=ig(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new V(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Tt(d)}n._authCredentials=new gd(new ga(c,l))}}var Ba=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},oe=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},ks=class n extends Ba{constructor(t,e,i){super(t,e,Jh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new oe(this.firestore,null,new F(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function am(n,t,...e){if(n=Nt(n),arguments.length===1&&(t=ba.newId()),oR("doc","path",t),n instanceof Ds){let i=gt.fromString(t,...e);return Wb(i),new oe(n,null,new F(i))}{if(!(n instanceof oe||n instanceof ks))throw new V(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(gt.fromString(t,...e));return Wb(i),new oe(n.firestore,n instanceof ks?n.converter:null,new F(i))}}var Uh=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Pa(this,"async_queue_retry"),this.hu=()=>{let e=md();e&&M("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};let t=md();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;let e=md();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});let e=new ze;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}Tu(){return _(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Ls(t))throw t;M("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(t){let e=this.iu.then(()=>(this.uu=!0,t().catch(i=>{this.au=i,this.uu=!1;let r=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(i);throw $e("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=e,e}enqueueAfterDelay(t,e,i){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);let r=Sh.createAndSchedule(this,t,e,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&B()}verifyOperationInProgress(){}du(){return _(this,null,function*(){let t;do t=this.iu,yield t;while(t!==this.iu)})}Au(t){for(let e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this._u)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){let e=this._u.indexOf(t);this._u.splice(e,1)}};function Kb(n){return function(e,i){if(typeof e!="object"||e===null)return!1;let r=e;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Ki=class extends Ds{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=function(){return new Uh}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Gv(this),this._firestoreClient.terminate()}};function $v(n,t){let e=typeof n=="object"?n:Ii(),i=typeof n=="string"?n:t||"(default)",r=os(e,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=ng("firestore");s&&zv(r,...s)}return r}function qv(n){return n._firestoreClient||Gv(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Gv(n){var t,e,i;let r=n._freezeSettings(),s=function(c,l,d,m){return new Td(c,l,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Bv(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new Fh(n._authCredentials,n._appCheckCredentials,n._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var Ps=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(jt.fromBase64String(t))}catch(e){throw new V(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(jt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Qi=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new V(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Ns=class{constructor(t){this._methodName=t}};var Os=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new V(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new V(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return et(this._lat,t._lat)||et(this._long,t._long)}};var cR=/^__.*__$/;var za=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new He(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function Hv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}var jh=class n{constructor(t,e,i,r,s,a){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.wu(t),r}Su(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return qa(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(Hv(this.fu)&&cR.test(t))throw this.Du('Document fields cannot begin and end with "__"')}},Bh=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Ja(t)}Fu(t,e,i,r=!1){return new jh({fu:t,methodName:e,vu:i,path:Qt.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function uR(n){let t=n._freezeSettings(),e=Ja(n._databaseId);return new Bh(n._databaseId,!!t.ignoreUndefinedProperties,e)}var $a=class n extends Ns{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof n}};function lR(n,t,e,i){let r=n.Fu(1,t,e);Kv("Data must be an object, but it was:",r,i);let s=[],a=se.empty();Xn(i,(l,d)=>{let m=cm(t,l,e);d=Nt(d);let g=r.Su(m);if(d instanceof $a)s.push(m);else{let y=tc(d,g);y!=null&&(s.push(m),a.set(m,y))}});let c=new _e(s);return new za(a,c,r.fieldTransforms)}function dR(n,t,e,i,r,s){let a=n.Fu(1,t,e),c=[Qb(t,i,e)],l=[r];if(s.length%2!=0)throw new V(x.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)c.push(Qb(t,s[y])),l.push(s[y+1]);let d=[],m=se.empty();for(let y=c.length-1;y>=0;--y)if(!fR(d,c[y])){let R=c[y],D=l[y];D=Nt(D);let N=a.Su(R);if(D instanceof $a)d.push(R);else{let C=tc(D,N);C!=null&&(d.push(R),m.set(R,C))}}let g=new _e(d);return new za(m,g,a.fieldTransforms)}function tc(n,t){if(Wv(n=Nt(n)))return Kv("Unsupported field value:",t,n),hR(n,t);if(n instanceof Ns)return function(i,r){if(!Hv(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(i,r){let s=[],a=0;for(let c of i){let l=tc(c,r.bu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if((i=Nt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return QA(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Rt.fromDate(i);return{timestampValue:Ca(r.serializer,s)}}if(i instanceof Rt){let s=new Rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ca(r.serializer,s)}}if(i instanceof Os)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ps)return{bytesValue:_v(r.serializer,i._byteString)};if(i instanceof oe){let s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Du(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xh(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${om(i)}`)}(n,t)}function hR(n,t){let e={};return Jb(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xn(n,(i,r)=>{let s=tc(r,t.pu(i));s!=null&&(e[i]=s)}),{mapValue:{fields:e}}}function Wv(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Rt||n instanceof Os||n instanceof Ps||n instanceof oe||n instanceof Ns)}function Kv(n,t,e){if(!Wv(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=om(e);throw i==="an object"?t.Du(n+" a custom object"):t.Du(n+" "+i)}}function Qb(n,t,e){if((t=Nt(t))instanceof Qi)return t._internalPath;if(typeof t=="string")return cm(n,t);throw qa("Field path arguments must be of type string or ",n,!1,void 0,e)}var mR=new RegExp("[~\\*/\\[\\]]");function cm(n,t,e){if(t.search(mR)>=0)throw qa(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Qi(...t.split("."))._internalPath}catch{throw qa(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function qa(n,t,e,i,r){let s=i&&!i.isEmpty(),a=r!==void 0,c=`Function ${t}() called with invalid data`;e&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${i}`),a&&(l+=` in document ${r}`),l+=")"),new V(x.INVALID_ARGUMENT,c+n+l)}function fR(n,t){return n.some(e=>e.isEqual(t))}var Ga=class{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new zh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(Qv("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},zh=class extends Ga{data(){return super.data()}};function Qv(n,t){return typeof t=="string"?cm(n,t):t instanceof Qi?t._internalPath:t._delegate._internalPath}function pR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new V(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $h=class{convertValue(t,e="none"){switch(Qn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return dt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(gn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw B()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return Xn(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new Os(dt(t.latitude),dt(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=Wh(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Ts(t));default:return null}}convertTimestamp(t){let e=qe(t);return new Rt(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=gt.fromString(t);at(Av(i));let r=new Ia(i.get(1),i.get(3)),s=new F(i.popFirst(5));return r.isEqual(e)||$e(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}};var Gn=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},Ha=class extends Ga{constructor(t,e,i,r,s,a){super(t,e,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new Oi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(Qv("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},Oi=class extends Ha{data(t={}){return super.data(t)}},qh=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Gn(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Oi(this._firestore,this._userDataWriter,i.key,i,new Gn(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new V(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>{let l=new Oi(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Gn(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Oi(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Gn(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,m=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:gR(c.type),doc:l,oldIndex:d,newIndex:m}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function gR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}var Wa=class extends $h{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ps(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new oe(this.firestore,null,e)}};function ec(n,t,e,...i){n=Ni(n,oe);let r=Ni(n.firestore,Ki),s=uR(r),a;return a=typeof(t=Nt(t))=="string"||t instanceof Qi?dR(s,"updateDoc",n._key,t,e,i):lR(s,"updateDoc",n._key,t),bR(r,[a.toMutation(n._key,Hn.exists(!0))])}function um(n,...t){var e,i,r;n=Nt(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||Kb(t[a])||(s=t[a],a++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Kb(t[a])){let g=t[a];t[a]=(e=g.next)===null||e===void 0?void 0:e.bind(g),t[a+1]=(i=g.error)===null||i===void 0?void 0:i.bind(g),t[a+2]=(r=g.complete)===null||r===void 0?void 0:r.bind(g)}let l,d,m;if(n instanceof oe)d=Ni(n.firestore,Ki),m=Jh(n._key.path),l={next:g=>{t[a]&&t[a](vR(d,n,g))},error:t[a+1],complete:t[a+2]};else{let g=Ni(n,Ba);d=Ni(g.firestore,Ki),m=g._query;let y=new Wa(d);l={next:R=>{t[a]&&t[a](new qh(d,y,g,R))},error:t[a+1],complete:t[a+2]},pR(n._query)}return function(y,R,D,N){let C=new Vh(N),U=new Dh(R,C,D);return y.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return jS(yield Gb(y),U)})),()=>{C.$a(),y.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return BS(yield Gb(y),U)}))}}(qv(d),m,c,l)}function bR(n,t){return function(i,r){let s=new ze;return i.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return QS(yield sR(i),r,s)})),s.promise}(qv(n),t)}function vR(n,t,e){let i=e.docs.get(t._key),r=new Wa(n);return new Ha(n,r,t._key,i,new Gn(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){Yi=r})(dn),ln(new re("firestore",(i,{instanceIdentifier:r,options:s})=>{let a=i.getProvider("app").getImmediate(),c=new Ki(new bd(i.getProvider("auth-internal")),new Id(i.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new V(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ia(d.options.projectId,m)}(a,r),a);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),It(yb,"4.6.3",t),It(yb,"4.6.3","esm2017")})();var nc=function(){return nc=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},nc.apply(this,arguments)};var IR={includeMetadataChanges:!1};function Yv(n,t){return t===void 0&&(t=IR),new En(function(e){var i=um(n,t,{next:e.next.bind(e),error:e.error.bind(e),complete:e.complete.bind(e)});return{unsubscribe:i}})}function Jv(n){return Yv(n,{includeMetadataChanges:!0})}function Xv(n,t){return t===void 0&&(t={}),Jv(n).pipe(tt(function(e){return Zv(e,t)}))}function Zv(n,t){var e;t===void 0&&(t={});var i=n.data(t);return!n.exists()||typeof i!="object"||i===null||!t.idField?i:nc(nc({},i),(e={},e[t.idField]=n.id,e))}var ti=class{constructor(t){return t}},t_="firestore",lm=class{constructor(){return as(t_)}};var dm=new rt("angularfire2.firestore-instances");function wR(n,t){let e=qo(t_,n,t);return e&&new ti(e)}function ER(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new ti(i)}}var TR={provide:lm,deps:[[new $t,dm]]},AR={provide:ti,useFactory:wR,deps:[[new $t,dm],Fe]};function e_(n,...t){return It("angularfire",Ln.full,"fst"),ue([AR,TR,{provide:dm,useFactory:ER(n),multi:!0,deps:[ot,ke,Ti,Fn,[new $t,ps],[new $t,Ei],...t]}])}var n_=Vn(Xv,!0);var i_=Vn($v,!0);var r_={providers:[Jf({eventCoalescing:!0}),Yp(Jp),Xp(),Sg(()=>Rg({projectId:"club-juegos-e57b9",appId:"1:652977867113:web:c31aeaf7bd14a0516255f8",storageBucket:"club-juegos-e57b9.appspot.com",apiKey:"AIzaSyDb6GTzso0Pls6eXdzmcKYEU74t2UcqYVs",authDomain:"club-juegos-e57b9.firebaseapp.com",messagingSenderId:"652977867113"})),gb(()=>bb()),e_(()=>i_())]};var mm;try{mm=typeof Intl<"u"&&Intl.v8BreakIterator}catch{mm=!1}var Yt=(()=>{let t=class t{constructor(i){this._platformId=i,this.isBrowser=this._platformId?sp(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||mm)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(j(Pe))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Us;function RR(){if(Us==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Us=!0}))}finally{Us=Us||!1}return Us}function Xi(n){return RR()?n:!!n.capture}var hm;function CR(){if(hm==null){let n=typeof document<"u"?document.head:null;hm=!!(n&&(n.createShadowRoot||n.attachShadow))}return hm}function s_(n){if(CR()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function We(n){return n.composedPath?n.composedPath()[0]:n.target}function o_(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function fm(n){return Array.isArray(n)?n:[n]}function ei(n){return n instanceof te?n.nativeElement:n}var a_=new Set,ni,xR=(()=>{let t=class t{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):kR}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&DR(i,this._nonce),this._matchMedia(i)}};t.\u0275fac=function(r){return new(r||t)(j(Yt),j(Tr,8))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function DR(n,t){if(!a_.has(n))try{ni||(ni=document.createElement("style"),t&&ni.setAttribute("nonce",t),ni.setAttribute("type","text/css"),document.head.appendChild(ni)),ni.sheet&&(ni.sheet.insertRule(`@media ${n} {body{ }}`,0),a_.add(n))}catch(e){console.error(e)}}function kR(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var u_=(()=>{let t=class t{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Jt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return c_(fm(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=c_(fm(i)).map(c=>this._registerQuery(c).observable),a=yr(s);return a=ro(a.pipe(Ce(1)),a.pipe(oo(1),jc(0))),a.pipe(tt(c=>{let l={matches:!1,breakpoints:{}};return c.forEach(({matches:d,query:m})=>{l.matches=l.matches||d,l.breakpoints[m]=d}),l}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),a={observable:new En(c=>{let l=d=>this._zone.run(()=>c.next(d));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(wr(r),tt(({matches:c})=>({query:i,matches:c})),li(this._destroySubject)),mql:r};return this._queries.set(i,a),a}};t.\u0275fac=function(r){return new(r||t)(j(xR),j(ot))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function c_(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function gm(n){return n.buttons===0||n.detail===0}function bm(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var PR=new rt("cdk-input-modality-detector-options"),NR={ignoreKeys:[18,17,224,91,16]},h_=650,Zi=Xi({passive:!0,capture:!0}),OR=(()=>{let t=class t{get mostRecentModality(){return this._modality.value}constructor(i,r,s,a){this._platform=i,this._mostRecentTarget=null,this._modality=new Bt(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(l=>l===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=We(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<h_||(this._modality.next(gm(c)?"keyboard":"mouse"),this._mostRecentTarget=We(c))},this._onTouchstart=c=>{if(bm(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=We(c)},this._options=O(O({},NR),a),this.modalityDetected=this._modality.pipe(oo(1)),this.modalityChanged=this.modalityDetected.pipe(zc()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Zi),s.addEventListener("mousedown",this._onMousedown,Zi),s.addEventListener("touchstart",this._onTouchstart,Zi)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Zi),document.removeEventListener("mousedown",this._onMousedown,Zi),document.removeEventListener("touchstart",this._onTouchstart,Zi))}};t.\u0275fac=function(r){return new(r||t)(j(Yt),j(ot),j(_t),j(PR,8))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var sc=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(sc||{}),MR=new rt("cdk-focus-monitor-default-options"),rc=Xi({passive:!0,capture:!0}),m_=(()=>{let t=class t{constructor(i,r,s,a,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Jt,this._rootNodeFocusAndBlurListener=l=>{let d=We(l);for(let m=d;m;m=m.parentElement)l.type==="focus"?this._onFocus(l,m):this._onBlur(l,m)},this._document=a,this._detectionMode=c?.detectionMode||sc.IMMEDIATE}monitor(i,r=!1){let s=ei(i);if(!this._platform.isBrowser||s.nodeType!==1)return $();let a=s_(s)||this._getDocument(),c=this._elementInfo.get(s);if(c)return r&&(c.checkChildren=!0),c.subject;let l={checkChildren:r,subject:new Jt,rootNode:a};return this._elementInfo.set(s,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(i){let r=ei(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let a=ei(i),c=this._getDocument().activeElement;a===c?this._getClosestElementsInfo(a).forEach(([l,d])=>this._originChanged(l,r,d)):(this._setOrigin(r),typeof a.focus=="function"&&a.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===sc.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===sc.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?h_:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),a=We(i);!s||!s.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,rc),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,rc)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(li(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,rc),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,rc),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,a)=>{(a===i||s.checkChildren&&a.contains(i))&&r.push([a,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let a=i.labels;if(a){for(let c=0;c<a.length;c++)if(a[c].contains(r))return!0}return!1}};t.\u0275fac=function(r){return new(r||t)(j(ot),j(Yt),j(OR),j(_t,8),j(MR,8))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var ii=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(ii||{}),l_="cdk-high-contrast-black-on-white",d_="cdk-high-contrast-white-on-black",pm="cdk-high-contrast-active",f_=(()=>{let t=class t{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=L(u_).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ii.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,a=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ii.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ii.BLACK_ON_WHITE}return ii.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(pm,l_,d_),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===ii.BLACK_ON_WHITE?i.add(pm,l_):r===ii.WHITE_ON_BLACK&&i.add(pm,d_)}}};t.\u0275fac=function(r){return new(r||t)(j(Yt),j(_t))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var vm=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=qt({type:t}),t.\u0275inj=zt({});let n=t;return n})();function FR(){return!0}var UR=new rt("mat-sanity-checks",{providedIn:"root",factory:FR}),ri=(()=>{let t=class t{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return o_()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};t.\u0275fac=function(r){return new(r||t)(j(f_),j(UR,8),j(_t))},t.\u0275mod=qt({type:t}),t.\u0275inj=zt({imports:[vm,vm]});let n=t;return n})();var ae=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(ae||{}),Im=class{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=ae.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},p_=Xi({passive:!0,capture:!0}),wm=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=We(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,i,r){let s=this._events.get(e);if(s){let a=s.get(i);a?a.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,p_)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(i),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,p_)))}},g_={enterDuration:225,exitDuration:150},jR=800,b_=Xi({passive:!0,capture:!0}),v_=["mousedown","touchstart"],__=["mouseup","mouseleave","touchend","touchcancel"],js=class js{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ei(i))}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=O(O({},g_),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let a=i.radius||BR(t,e,r),c=t-r.left,l=e-r.top,d=s.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=`${c-a}px`,m.style.top=`${l-a}px`,m.style.height=`${a*2}px`,m.style.width=`${a*2}px`,i.color!=null&&(m.style.backgroundColor=i.color),m.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(m);let g=window.getComputedStyle(m),y=g.transitionProperty,R=g.transitionDuration,D=y==="none"||R==="0s"||R==="0s, 0s"||r.width===0&&r.height===0,N=new Im(this,m,i,D);m.style.transform="scale3d(1, 1, 1)",N.state=ae.FADING_IN,i.persistent||(this._mostRecentTransientRipple=N);let C=null;return!D&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let U=()=>this._finishRippleTransition(N),G=()=>this._destroyRipple(N);m.addEventListener("transitionend",U),m.addEventListener("transitioncancel",G),C={onTransitionEnd:U,onTransitionCancel:G}}),this._activeRipples.set(N,C),(D||!d)&&this._finishRippleTransition(N),N}fadeOutRipple(t){if(t.state===ae.FADING_OUT||t.state===ae.HIDDEN)return;let e=t.element,i=O(O({},g_),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=ae.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=ei(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,v_.forEach(i=>{js._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{__.forEach(e=>{this._triggerElement.addEventListener(e,this,b_)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===ae.FADING_IN?this._startFadeOutTransition(t):t.state===ae.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=ae.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=ae.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=gm(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+jR;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!bm(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===ae.VISIBLE||t.config.terminateOnPointerUp&&t.state===ae.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(v_.forEach(e=>js._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(__.forEach(e=>t.removeEventListener(e,this,b_)),this._pointerUpEventsRegistered=!1))}};js._eventManager=new wm;var Em=js;function BR(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var E_=new rt("mat-ripple-global-options"),zR=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,a,c){this._elementRef=i,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new Em(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:O(O(O({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,O(O({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,O(O({},this.rippleConfig),i))}};t.\u0275fac=function(r){return new(r||t)(vt(te),vt(ot),vt(Yt),vt(E_,8),vt(Ne,8))},t.\u0275dir=nn({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&Sn("mat-ripple-unbounded",s.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let n=t;return n})(),T_=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=qt({type:t}),t.\u0275inj=zt({imports:[ri,ri]});let n=t;return n})();var y_={capture:!0},I_=["focus","mousedown","mouseenter","touchstart"],_m="mat-ripple-loader-uninitialized",ym="mat-ripple-loader-class-name",w_="mat-ripple-loader-centered",oc="mat-ripple-loader-disabled",A_=(()=>{let t=class t{constructor(){this._document=L(_t,{optional:!0}),this._animationMode=L(Ne,{optional:!0}),this._globalRippleOptions=L(E_,{optional:!0}),this._platform=L(Yt),this._ngZone=L(ot),this._hosts=new Map,this._onInteraction=i=>{let r=We(i);if(r instanceof HTMLElement){let s=r.closest(`[${_m}="${this._globalRippleOptions?.namespace??""}"]`);s&&this._createRipple(s)}},this._ngZone.runOutsideAngular(()=>{for(let i of I_)this._document?.addEventListener(i,this._onInteraction,y_)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of I_)this._document?.removeEventListener(r,this._onInteraction,y_)}configureRipple(i,r){i.setAttribute(_m,this._globalRippleOptions?.namespace??""),(r.className||!i.hasAttribute(ym))&&i.setAttribute(ym,r.className||""),r.centered&&i.setAttribute(w_,""),r.disabled&&i.setAttribute(oc,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let s=this._hosts.get(i);if(s){s.disabled=r;return}r?i.setAttribute(oc,""):i.removeAttribute(oc)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute(ym)),i.append(s);let a=new zR(new te(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return a._isInitialized=!0,a.trigger=i,a.centered=i.hasAttribute(w_),a.disabled=i.hasAttribute(oc),this.attachRipple(i,a),a}attachRipple(i,r){i.removeAttribute(_m),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var $R=["determinateSpinner"];function qR(n,t){if(n&1&&(Qc(),Pt(0,"svg",11),ne(1,"circle",12),Ut()),n&2){let e=Rn();le("viewBox",e._viewBox()),ee(),lo("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),le("r",e._circleRadius())}}var GR=new rt("mat-progress-spinner-default-options",{providedIn:"root",factory:HR});function HR(){return{diameter:S_}}var S_=100,WR=10,R_=(()=>{let t=class t{get color(){return this._color||this._defaultColor}set color(i){this._color=i}constructor(i,r,s){this._elementRef=i,this._defaultColor="primary",this._value=0,this._diameter=S_,this._noopAnimations=r==="NoopAnimations"&&!!s&&!s._forceAnimations,this.mode=i.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",s&&(s.color&&(this.color=this._defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth))}get value(){return this.mode==="determinate"?this._value:0}set value(i){this._value=Math.max(0,Math.min(100,i||0))}get diameter(){return this._diameter}set diameter(i){this._diameter=i||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(i){this._strokeWidth=i||0}_circleRadius(){return(this.diameter-WR)/2}_viewBox(){let i=this._circleRadius()*2+this.strokeWidth;return`0 0 ${i} ${i}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}};t.\u0275fac=function(r){return new(r||t)(vt(te),vt(Ne,8),vt(GR))},t.\u0275cmp=xe({type:t,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,s){if(r&1&&Zc($R,5),r&2){let a;fo(a=po())&&(s._determinateCircle=a.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(r,s){r&2&&(le("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",s.mode==="determinate"?s.value:null)("mode",s.mode),ho("mat-"+s.color),lo("width",s.diameter,"px")("height",s.diameter,"px")("--mdc-circular-progress-size",s.diameter+"px")("--mdc-circular-progress-active-indicator-width",s.diameter+"px"),Sn("_mat-animation-noopable",s._noopAnimations)("mdc-circular-progress--indeterminate",s.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Pr],diameter:[2,"diameter","diameter",Pr],strokeWidth:[2,"strokeWidth","strokeWidth",Pr]},exportAs:["matProgressSpinner"],standalone:!0,features:[An,Oe],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,s){if(r&1&&(Rr(0,qR,2,8,"ng-template",null,0,Wf),Pt(2,"div",2,1),Qc(),Pt(4,"svg",3),ne(5,"circle",4),Ut()(),Of(),Pt(6,"div",5)(7,"div",6)(8,"div",7),mo(9,8),Ut(),Pt(10,"div",9),mo(11,8),Ut(),Pt(12,"div",10),mo(13,8),Ut()()()),r&2){let a=Gf(1);ee(4),le("viewBox",s._viewBox()),ee(),lo("stroke-dasharray",s._strokeCircumference(),"px")("stroke-dashoffset",s._strokeDashOffset(),"px")("stroke-width",s._circleStrokeWidth(),"%"),le("r",s._circleRadius()),ee(4),rn("ngTemplateOutlet",a),ee(2),rn("ngTemplateOutlet",a),ee(2),rn("ngTemplateOutlet",a)}},dependencies:[ip],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0});let n=t;return n})();var C_=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=qt({type:t}),t.\u0275inj=zt({imports:[Nr,ri]});let n=t;return n})();var QR=["mat-button",""],YR=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],JR=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var XR=new rt("MAT_BUTTON_CONFIG");var ZR=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],tC=(()=>{let t=class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,s,a){this._elementRef=i,this._platform=r,this._ngZone=s,this._animationMode=a,this._focusMonitor=L(m_),this._rippleLoader=L(A_),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=L(XR,{optional:!0}),l=i.nativeElement,d=l.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(l,{className:"mat-mdc-button-ripple"});for(let{attribute:m,mdcClasses:g}of ZR)l.hasAttribute(m)&&d.add(...g)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};t.\u0275fac=function(r){Sr()},t.\u0275dir=nn({type:t,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",sn],disabled:[2,"disabled","disabled",sn],ariaDisabled:[2,"aria-disabled","ariaDisabled",sn],disabledInteractive:[2,"disabledInteractive","disabledInteractive",sn]},features:[An]});let n=t;return n})();var x_=(()=>{let t=class t extends tC{constructor(i,r,s,a){super(i,r,s,a)}};t.\u0275fac=function(r){return new(r||t)(vt(te),vt(Yt),vt(ot),vt(Ne,8))},t.\u0275cmp=xe({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,s){r&2&&(le("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),ho(s.color?"mat-"+s.color:""),Sn("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[jf,Oe],attrs:QR,ngContentSelectors:JR,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){r&1&&(Xc(YR),ne(0,"span",0),xr(1),Pt(2,"span",1),xr(3,1),Ut(),xr(4,2),ne(5,"span",2)(6,"span",3)),r&2&&Sn("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let n=t;return n})();var D_=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=qt({type:t}),t.\u0275inj=zt({imports:[ri,T_,ri]});let n=t;return n})();function nC(n,t){if(n&1){let e=qf();Pt(0,"div",2)(1,"div"),Dr(2),Ut(),Pt(3,"div")(4,"button",3),Cr("click",function(){Wc(e);let r=Rn();return Kc(r.sum())}),Dr(5,"+"),Ut()(),Pt(6,"div")(7,"button",3),Cr("click",function(){Wc(e);let r=Rn();return Kc(r.reset())}),Dr(8,"reset"),Ut()()()}if(n&2){let e=Rn();ee(2),Hf(e.counter)}}function iC(n,t){n&1&&(Pt(0,"div",2),ne(1,"mat-spinner"),Ut())}var k_=(()=>{let t=class t{constructor(i){this.firestore=i,this.ready=!1,this.counter=0,this.docRef=am(this.firestore,"app","settings"),n_(this.docRef).subscribe(s=>{this.counter=s.counter,this.ready=!0})}sum(){this.counter++,ec(this.docRef,{counter:this.counter})}reset(){this.counter=0,ec(this.docRef,{counter:this.counter})}};t.\u0275fac=function(r){return new(r||t)(vt(ti))},t.\u0275cmp=xe({type:t,selectors:[["app-root"]],standalone:!0,features:[Oe],decls:4,vars:2,consts:[[1,"main"],["class","content",4,"ngIf"],[1,"content"],["mat-button","","type","button",3,"click"]],template:function(r,s){r&1&&(Pt(0,"main",0),Rr(1,nC,9,1,"div",1)(2,iC,2,0,"div",1),Ut(),ne(3,"router-outlet")),r&2&&(ee(),rn("ngIf",s.ready),ee(),rn("ngIf",!s.ready))},dependencies:[qu,Nr,np,C_,R_,D_,x_]});let n=t;return n})();mp(k_,r_).catch(n=>console.error(n));
